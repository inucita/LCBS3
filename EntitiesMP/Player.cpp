/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 2 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"

	
#include "StdH.h"
#include "GameMP/SEColors.h"
	
#include <Engine/Build.h>
#include <locale.h>
	
#include "ModelsMP/Player/SeriousSam/Player.h"
#include "ModelsMP/Player/SeriousSam/Body.h"
#include "ModelsMP/Player/SeriousSam/Head.h"
#include "EntitiesMP/Common/CharacterDefinition.h"

#include "EntitiesMP/PlayerMarker.h"
#include "EntitiesMP/PlayerWeapons.h"
#include "EntitiesMP/PlayerAnimator.h"
#include "EntitiesMP/PlayerView.h"
#include "EntitiesMP/MovingBrush.h"
#include "EntitiesMP/Switch.h"
#include "EntitiesMP/MessageHolder.h"
#include "EntitiesMP/Camera.h"
#include "EntitiesMP/WorldLink.h"
#include "EntitiesMP/MusicHolder.h"
#include "EntitiesMP/EnemyBase.h"
#include "EntitiesMP/PetBase.h"
#include "EntitiesMP/Pet.h"
#include "EntitiesMP/WildPetBase.h"
#include "EntitiesMP/WildPet.h"
#include "EntitiesMP/SlaveBase.h"
#include "EntitiesMP/Slave.h"
#include "EntitiesMP/Enemy.h"
#include "EntitiesMP/CharacterBase.h"
#include "EntitiesMP/Character.h"
#include "EntitiesMP/EnemySpawner.h"
#include "EntitiesMP/PlayerActionMarker.h"
#include "EntitiesMP/BasicEffects.h"
#include "EntitiesMP/BackgroundViewer.h"
#include "EntitiesMP/WorldSettingsController.h"
#include "EntitiesMP/HudPicHolder.h"
#include "EntitiesMP/DoorController.h"
#include "EntitiesMP/WorldBase.h"

//강동민 수정 시작 시스템 싱글던젼 개선	10.07
// 고정 시점 카메라 & 제한 영역
#include "EntitiesMP/FixedCameraField.h"
#include "EntitiesMP/Common/FixedCameraContainer.h"
#include "EntitiesMP/RestrictedField.h"
#include "EntitiesMP/Common/RestrictedFieldContainer.h"
//강동민 수정 끝 싱글던젼 개선		10.07

#include "EntitiesMP/Items.h"
	
//안태훈 수정 시작	//(Add & Modify SSSE Effect)(0.1)
#include "EntitiesMP/Missile.h"
	
#include <Engine/Effect/EffectCommon.h>
#include <Engine/Effect/CWorldTag.h>
#include <Engine/Effect/CEffectGroupManager.h>
#include <Engine/Effect/CTag.h>
#include <Engine/Effect/CTagManager.h>
#include <Engine/Ska/ModelInstance.h>
#include <Engine/Effect/CSkaEffect.h>
#include <Engine/Base/Timer.h>
#include <Engine/Math/AdditionalFunction.h>
//안태훈 수정 끝	//(Add & Modify SSSE Effect)(0.1)
//안태훈 수정 시작	//(Zone Change System)(0.1)
#include <Engine/World/World.h>
#include <Engine/Interface/UIManager.h>
#include <Engine/Interface/UIChatting.h>
#include <Engine/Interface/UIPortal.h>
#include <Engine/Interface/UIPlayerInfo.h>
//안태훈 수정 끝	//(Zone Change System)(0.1)
//안태훈 수정 시작	//(5th Closed beta)(0.2)
#define PICKING_EFFECT_REMAIN_TIME (0.0f)
//안태훈 수정 끝	//(5th Closed beta)(0.2)

#include <Engine/GameState.h>
#include <Engine/GlobalDefinition.h>
#include <Engine/Terrain/Terrain.h>

#include <Engine/Interface/UIAutoHelp.h> 
#include <Engine/Interface/UISignBoard.h> 
#include <Engine/Interface/UIGamble.h>
#include <Engine/Interface/UISiegeWarfareDoc.h>
#include <Engine/Network/MessageDefine.h>
#include <Engine/Interface/UINotice.h>
#include <Engine/Interface/UIQuestBook.h>
#include <Engine/Interface/UIMessageBox.h>
#include <Engine/Interface/UITeleport.h>

#include <Engine/JobInfo.h>
#include <Engine/TransformInfo.h>
#include <Engine/Interface/UIBuff.h>
#include <Engine/Interface/UISummon.h>
#include <Engine/Interface/UIPetInfo.h>
#include <Engine/Interface/UIWildPetInfo.h>
#include <Engine/PetInfo.h>
#include <Engine/SlaveInfo.h>
#include <Engine/LocalDefine.h>

// Date : 2005-09-23(오전 9:27:43), By Lee Ki-hwan
// 버튼 액션시 보내던 MOVE메세지에 대한 제한을 두기위한 플래그 
#define BUTTON_MOVE_ENABLE	0

//	extern void JumpFromBouncer(CEntity *penToBounce, CEntity *penBouncer);
	// from game
#define GRV_SHOWEXTRAS  (1L<<0)   // add extra stuff like console, weapon, pause
	
// FIXME : GENDER가 쓰이는 부분도 제거대상.
#define GENDER_MALE     0
#define GENDER_FEMALE   1
#define GENDEROFFSET    100   // sound components for genders are offset by this value

#define MAX_TARGETS		20

#define SOUND_BSP_COUNT 3		// yjpark
#define SOUND_TER_COUNT 4		// yjpark

#define		HITTYPE_MISS			(1 << 0)		// 회피
#define		HITTYPE_WEAK			(1 << 1)		// 약하게
#define		HITTYPE_NORMAL			(1 << 2)		// 보통
#define		HITTYPE_STRONG			(1 << 3)		// 강하게
#define		HITTYPE_HARD			(1 << 4)		// 매우 강하게
#define		HITTYPE_CRITICAL		(1 << 5)		// 크리티컬
#define		HITTYPE_DEADLY			(1 << 6)		// 죽도록 강하게

// NOTE : 심하게 밀리는 싱글던젼...
#define	EXTREAM_SINGLEDUNGEON		(10)
	
	//0105
	//INDEX idPlayerWhole_Animation[ANIM_TOTAL]	= {0};
	ENGINE_API extern INDEX idPlayerWhole_Animation[ANIM_TOTAL];

	//INDEX idPlayerWhole_Anim_Face1 = -1;
	//INDEX idPlayerWhole_Anim_Face2 = -1;
	INDEX idPlayerWhole_Anim_Face3 = -1;
	INDEX idPlayerWhole_Anim_Face4 = -1;

	// bone ID's
	// collision boxes
	INDEX idPlayer_Collision_Stand     = -1;

#define PLAYER_ANIM_GROUP_LEGS        0x01
#define PLAYER_ANIM_GROUP_TORSO       0x02
#define PLAYER_ANIM_GROUP_WHOLEBODY   0x03

#define AREA_CASTLE_X0	1015
#define AREA_CASTLE_X1	1340
#define AREA_CASTLE_Z0	815
#define AREA_CASTLE_Z1	1173

#define AREA_CASTLE_DRATAN_X0	1570
#define AREA_CASTLE_DRATAN_X1	2024
#define AREA_CASTLE_DRATAN_Z0	105
#define AREA_CASTLE_DRATAN_Z1	650

#define MUSIC_CASTLE_AREA		CTFILENAME("data\\sounds\\game\\BGM\\GB_pease.ogg")
#define MUSIC_FIELD_AREA		CTFILENAME("data\\sounds\\game\\BGM\\GB_field01.ogg")
#define MUSIC_FIELD_ENVIRON		CTFILENAME("data\\sounds\\game\\BGM\\GBE_field.ogg")

#define MUSIC_DRATAN_ENVIRON		CTFILENAME("data\\sounds\\game\\BGM\\GBE_ruin.ogg")

#define MUSIC_DUNGEON_AREA      CTFILENAME("data\\sounds\\game\\BGM\\GB_dungeon01.ogg")
#define MUSIC_DUNGEON_ENVIRON   CTFILENAME("data\\sounds\\game\\BGM\\GBE_dungeon.ogg")

#define MUSIC_CASTLE_BATTLE		CTFILENAME("Data\\Sounds\\Game\\BGM\\GB_battletheme.ogg")
#define MUSIC_MERAC_FIELD		CTFILENAME("Data\\Sounds\\Game\\BGM\\GB_meracpease.ogg")

// egeha
#define MUSIC_EGEHA_PEASE		CTFILENAME("Data\\Sounds\\Game\\BGM\\GB_egehapease.ogg")

#define MODEL_TREASURE	("Data\\Item\\Common\\ITEM_treasure02.smc")

// Check Attack Flag
#define ENF_EX2_PVP				(1L<<0)
#define ENF_EX2_LEGIT			(1L<<1)
#define ENF_EX2_MYPARTY			(1L<<2)
#define ENF_EX2_MYGUILD			(1L<<3)
#define ENF_EX2_ENEMYGUILD		(1L<<4)
#define ENF_EX2_WAR_OURFORCE	(1L<<5)
#define ENF_EX2_WAR_ENEMY		(1L<<6)


#include <EntitiesMP/Player.h>
#include <EntitiesMP/Player_tables.h>
CEntityEvent *ECameraStart::MakeCopy(void) { CEntityEvent *peeCopy = new ECameraStart(*this); return peeCopy;}
SLONG ECameraStart::GetSizeOf(void) { return sizeof(*this);}
ECameraStart::ECameraStart() : CEntityEvent(EVENTCODE_ECameraStart) {;
 ClearToDefault(penCamera);
};
BOOL ECameraStart::CheckIDs(void) { return TRUE ; }
CEntityEvent *ECameraStop::MakeCopy(void) { CEntityEvent *peeCopy = new ECameraStop(*this); return peeCopy;}
SLONG ECameraStop::GetSizeOf(void) { return sizeof(*this);}
ECameraStop::ECameraStop() : CEntityEvent(EVENTCODE_ECameraStop) {;
 ClearToDefault(penCamera);
};
BOOL ECameraStop::CheckIDs(void) { return TRUE ; }
CEntityEvent *ESlaveKilledEnemy::MakeCopy(void) { CEntityEvent *peeCopy = new ESlaveKilledEnemy(*this); return peeCopy;}
SLONG ESlaveKilledEnemy::GetSizeOf(void) { return sizeof(*this);}
ESlaveKilledEnemy::ESlaveKilledEnemy() : CEntityEvent(EVENTCODE_ESlaveKilledEnemy) {;
};
BOOL ESlaveKilledEnemy::CheckIDs(void) { return TRUE ; }
CEntityEvent *EStopLerp::MakeCopy(void) { CEntityEvent *peeCopy = new EStopLerp(*this); return peeCopy;}
SLONG EStopLerp::GetSizeOf(void) { return sizeof(*this);}
EStopLerp::EStopLerp() : CEntityEvent(EVENTCODE_EStopLerp) {;
 ClearToDefault(bActive);
};
BOOL EStopLerp::CheckIDs(void) { return TRUE ; }
CEntityEvent *ERebirth::MakeCopy(void) { CEntityEvent *peeCopy = new ERebirth(*this); return peeCopy;}
SLONG ERebirth::GetSizeOf(void) { return sizeof(*this);}
ERebirth::ERebirth() : CEntityEvent(EVENTCODE_ERebirth) {;
};
BOOL ERebirth::CheckIDs(void) { return TRUE ; }
CEntityEvent *EPlayerRebirth::MakeCopy(void) { CEntityEvent *peeCopy = new EPlayerRebirth(*this); return peeCopy;}
SLONG EPlayerRebirth::GetSizeOf(void) { return sizeof(*this);}
EPlayerRebirth::EPlayerRebirth() : CEntityEvent(EVENTCODE_EPlayerRebirth) {;
 ClearToDefault(iRespawnInPlace);
};
BOOL EPlayerRebirth::CheckIDs(void) { return TRUE ; }
CEntityEvent *EDisconnected::MakeCopy(void) { CEntityEvent *peeCopy = new EDisconnected(*this); return peeCopy;}
SLONG EDisconnected::GetSizeOf(void) { return sizeof(*this);}
EDisconnected::EDisconnected() : CEntityEvent(EVENTCODE_EDisconnected) {;
};
BOOL EDisconnected::CheckIDs(void) { return TRUE ; }
CEntityEvent *EAutoAction::MakeCopy(void) { CEntityEvent *peeCopy = new EAutoAction(*this); return peeCopy;}
SLONG EAutoAction::GetSizeOf(void) { return sizeof(*this);}
EAutoAction::EAutoAction() : CEntityEvent(EVENTCODE_EAutoAction) {;
 ClearToDefault(eidFirstMarker);
};
BOOL EAutoAction::CheckIDs(void) { return TRUE && eidFirstMarker.IsValid(); }
CEntityEvent *EPlayerKilledEnemy::MakeCopy(void) { CEntityEvent *peeCopy = new EPlayerKilledEnemy(*this); return peeCopy;}
SLONG EPlayerKilledEnemy::GetSizeOf(void) { return sizeof(*this);}
EPlayerKilledEnemy::EPlayerKilledEnemy() : CEntityEvent(EVENTCODE_EPlayerKilledEnemy) {;
 ClearToDefault(eidEnemy);
 ClearToDefault(iScore);
 ClearToDefault(eCauseOfDeath);
 ClearToDefault(eKillType);
};
BOOL EPlayerKilledEnemy::CheckIDs(void) { return TRUE && eidEnemy.IsValid(); }
CEntityEvent *EPlayerDeath::MakeCopy(void) { CEntityEvent *peeCopy = new EPlayerDeath(*this); return peeCopy;}
SLONG EPlayerDeath::GetSizeOf(void) { return sizeof(*this);}
EPlayerDeath::EPlayerDeath() : CEntityEvent(EVENTCODE_EPlayerDeath) {;
 ClearToDefault(eidInflictor);
 ClearToDefault(vDirection);
 ClearToDefault(vHitPoint);
 ClearToDefault(fAmount);
 ClearToDefault(dmtType);
};
BOOL EPlayerDeath::CheckIDs(void) { return TRUE && eidInflictor.IsValid(); }
CEntityEvent *EShowConsole::MakeCopy(void) { CEntityEvent *peeCopy = new EShowConsole(*this); return peeCopy;}
SLONG EShowConsole::GetSizeOf(void) { return sizeof(*this);}
EShowConsole::EShowConsole() : CEntityEvent(EVENTCODE_EShowConsole) {;
};
BOOL EShowConsole::CheckIDs(void) { return TRUE ; }
CEntityEvent *EPlayerStats::MakeCopy(void) { CEntityEvent *peeCopy = new EPlayerStats(*this); return peeCopy;}
SLONG EPlayerStats::GetSizeOf(void) { return sizeof(*this);}
EPlayerStats::EPlayerStats() : CEntityEvent(EVENTCODE_EPlayerStats) {;
 ClearToDefault(iIndex);
 ClearToDefault(iFrags);
 ClearToDefault(iKills);
 ClearToDefault(iDeaths);
};
BOOL EPlayerStats::CheckIDs(void) { return TRUE ; }
CEntityEvent *EAddBulletSpray::MakeCopy(void) { CEntityEvent *peeCopy = new EAddBulletSpray(*this); return peeCopy;}
SLONG EAddBulletSpray::GetSizeOf(void) { return sizeof(*this);}
EAddBulletSpray::EAddBulletSpray() : CEntityEvent(EVENTCODE_EAddBulletSpray) {;
 ClearToDefault(vPos);
 ClearToDefault(eptType);
 ClearToDefault(vReflected);
};
BOOL EAddBulletSpray::CheckIDs(void) { return TRUE ; }
CEntityEvent *EAddGoreSpray::MakeCopy(void) { CEntityEvent *peeCopy = new EAddGoreSpray(*this); return peeCopy;}
SLONG EAddGoreSpray::GetSizeOf(void) { return sizeof(*this);}
EAddGoreSpray::EAddGoreSpray() : CEntityEvent(EVENTCODE_EAddGoreSpray) {;
 ClearToDefault(iEntityHit);
 ClearToDefault(vPos);
 ClearToDefault(vHit);
 ClearToDefault(sptType);
 ClearToDefault(colParticles);
};
BOOL EAddGoreSpray::CheckIDs(void) { return TRUE ; }
#line 291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"

// ----------------------------------------------------------------<<
INDEX	m_timeCnt = 0; // 락체크(3초후 락을 풀어줌) wooss 060515
UBYTE	m_checkLock =0;
// ----------------------------------------------------------------->>
extern void DrawHUD( const CPlayer *penPlayerCurrent, CDrawPort *pdpCurrent, BOOL bSnooping, const CPlayer *penPlayerOwner);
extern void InitHUD(void);
extern void EndHUD(void);
extern void CameraEffect(const CPlacement3D &plPlr, CPlacement3D &plCam);

static CTimerValue _tvProbingLast;
static BOOL _bTripleHead = FALSE;
static BOOL _bSeparatedTripleHead = FALSE;

// used to render certain entities only for certain players (like picked items, etc.)
extern ULONG _ulPlayerRenderingMask = 0;
extern FLOAT _fAttackLengthMul = 1.0f; //0.8이된다. 애니메이션 길이는 짧아짐.
extern FLOAT _fAttackSpeedMul =  1.0f; //1.2이 된다.
// temporary BOOL used to discard calculating of 3rd view when calculating absolute view placement
BOOL _bDiscard3rdView=FALSE;

#define NAME name

const FLOAT _fBlowUpAmmount = 70.0f;

//강동민 수정 시작 싱글던젼 스토리	10.12
// 고정 시점 카메라.
static BOOL _bInFixedCamera	= FALSE;
//강동민 수정 끝 싱글던젼 스토리	10.12

//강동민 수정 시작 벽타기	10.21
//static BOOL _bOldClimbWall = FALSE;
//강동민 수정 끝 벽타기	10.21

static BOOL _bPersonalShop = FALSE;

extern ENGINE_API INDEX g_iAutoAttack;
extern ENGINE_API INDEX g_iCountry;


// computer message adding flags
#define CMF_READ       (1L<<0)
#define CMF_ANALYZE    (1L<<1)

struct MarkerDistance {
public:
	FLOAT md_fMinD;
	CPlayerMarker *md_ppm;
	void Clear(void);
};

/*
#define MAX_DEATH	(100)
struct	DeathTable {

	CEntity*  m_penDeathEntity;
	FLOAT	DeathTime;
	BOOL	bActive;
};
*/

//DeathTable _DeathTable[MAX_DEATH];

// export current player projection
CAnyProjection3D prPlayerProjection;

//안태훈 수정 시작	//(Effect Add & Modify for Close Beta)(0.1)
static INDEX g_iPCMinBrightness = 32;
static INDEX g_iChaLightModifyValue = 255;
//안태훈 수정 끝	//(Effect Add & Modify for Close Beta)(0.1)

int qsort_CompareMarkerDistance(const void *pv0, const void *pv1)
{
	MarkerDistance &md0 = *(MarkerDistance*)pv0;
	MarkerDistance &md1 = *(MarkerDistance*)pv1;
	if(      md0.md_fMinD<md1.md_fMinD) return +1;
	else if( md0.md_fMinD>md1.md_fMinD) return -1;
	else                                return  0;
}

static inline FLOAT IntensityAtDistance( FLOAT fFallOff, FLOAT fHotSpot, FLOAT fDistance)
{
	// intensity is zero if further than fall-off range
	if( fDistance>fFallOff) return 0.0f;
	// intensity is maximum if closer than hot-spot range
	if( fDistance<fHotSpot) return 1.0f;
	// interpolate if between fall-off and hot-spot range
	return (fFallOff-fDistance)/(fFallOff-fHotSpot);
}

static CTString MakeEmptyString(INDEX ctLen, char ch=' ')
{
	char ach[2];
	ach[0] = ch;
	ach[1] = 0;
	CTString strSpaces;
	for (INDEX i=0; i<ctLen; i++) {
		strSpaces+=ach;
	}
	return strSpaces;
}

// take a two line string and align into one line of minimum given length
static _ctAlignWidth = 20;
static CTString AlignString(const CTString &strOrg)
{
	// split into two lines
	CTString strL = strOrg;
	strL.OnlyFirstLine();
	CTString strR = strOrg;
	strR.RemovePrefix(strL);
	strR.DeleteChar(0);
	
	// get their lengths
	INDEX iLenL = strL.LengthNaked();
	INDEX iLenR = strR.LengthNaked();
	
	// find number of spaces to insert
	INDEX ctSpaces = _ctAlignWidth-(iLenL+iLenR);
	if (ctSpaces<1) {
		ctSpaces=1;
	}
	
	// make aligned string
	return strL+MakeEmptyString(ctSpaces)+strR;
}

static CTString CenterString(const CTString &str)
{
	INDEX ctSpaces = (_ctAlignWidth-str.LengthNaked())/2;
	if (ctSpaces<0) {
		ctSpaces=0;
	}
	return MakeEmptyString(ctSpaces)+str;
}

static CTString PadStringRight(const CTString &str, INDEX iLen)
{
	INDEX ctSpaces = iLen-str.LengthNaked();
	if (ctSpaces<0) {
		ctSpaces=0;
	}
	return str+MakeEmptyString(ctSpaces);
}

static CTString PadStringLeft(const CTString &str, INDEX iLen)
{
	INDEX ctSpaces = iLen-str.LengthNaked();
	if (ctSpaces<0) {
		ctSpaces=0;
	}
	return MakeEmptyString(ctSpaces)+str;
}

static void DumpEnemies(void)
{
	// get the world pointer
	CWorld *pwo = (CWorld *)_pShell->GetINDEX("pwoCurrentWorld");
	// if there is no current world
	if (pwo==NULL) return;
	// for each entity in the world
	{FOREACHINDYNAMICCONTAINER(pwo->wo_cenEntities, CEntity, iten) {
		CEntity *pen = iten;
		if( IsDerivedFromClass( pen, &CEnemyBase_DLLClass) && !((CEnemyBase*)pen)->m_bTemplate) {
			FLOAT3D vPos=pen->GetPlacement().pl_PositionVector;
			CPrintF("Class: %s, Name: %s, ID: %d, Coordinates(%d,%d,%d)\n", 
				pen->GetClass()->ec_pdecDLLClass->dec_strName, pen->GetName(),
				pen->en_ulID, (INDEX)vPos(1), (INDEX)vPos(2), (INDEX)vPos(3));
		}
	}}
}

static void DumpSpawners(void)
{
	// get the world pointer
	CWorld *pwo = (CWorld *)_pShell->GetINDEX("pwoCurrentWorld");
	// if there is no current world
	if (pwo==NULL) return;
	// for each entity in the world
	{FOREACHINDYNAMICCONTAINER(pwo->wo_cenEntities, CEntity, iten) {
		CEntity *pen = iten;
		if( IsDerivedFromClass( pen, &CEnemySpawner_DLLClass)) {
			CEnemySpawner *penSpawner = (CEnemySpawner *)pen;
			FLOAT3D vPos=pen->GetPlacement().pl_PositionVector;
			CTString strEnemyClass="Unknown";
			CTString strEnemyName="Unknown";
			if(penSpawner->m_penTarget!=NULL)
			{
				strEnemyClass=penSpawner->m_penTarget->GetClass()->ec_pdecDLLClass->dec_strName+CTString("'s");
				strEnemyName=penSpawner->m_penTarget->GetName();
			}
			CPrintF("Spawner: %s (ID=%d), Pos=%d,%d,%d Not spawned yet %d enemies of class \"%s\", named: \"%s\")\n", 
				pen->GetName(), pen->en_ulID, (INDEX)vPos(1), (INDEX)vPos(2), (INDEX)vPos(3),
				penSpawner->m_ctTotal, strEnemyClass, strEnemyName);
		}
	}}
}

static void GoTo(FLOAT x, FLOAT y, FLOAT z, FLOAT r)
{
	CPlayer *pen=(CPlayer *)CEntity::GetPlayerEntity(0);
	if(pen!=NULL)
	{
		CPlacement3D plWhere=CPlacement3D(FLOAT3D(x,y,z),ANGLE3D(r,0,0));
		pen->GetPlayerWeapons()->m_penReservedTarget	= NULL;
		pen->GetPlayerWeapons()->m_penRayHitTmp			= NULL;
		pen->Teleport(plWhere, FALSE);
		((CMovableEntity*)pen)->m_bFallDownToFloor = TRUE;
	}
}

//-----------------------------------------------------------------------------
// Purpose: 컨테이너 내의 모든 엔티티에 한번에 데미지를 줍니다.
// Input  : pEntity - 
//			sTI - 
//			vCenter - 
// Output : static void
//-----------------------------------------------------------------------------
void DamagedTargetsInRange(CEntity* pEntity, CSelectedEntities& dcEntities, enum DamageType dmtType, FLOAT fDamageAmmount, FLOAT3D vCenter, BOOL bSkill)
{	
	if(dcEntities.Count() <= 0)	return;

	for( ENTITIES_ITERATOR it = dcEntities.vectorSelectedEntities.begin();
		it != dcEntities.vectorSelectedEntities.end(); ++it )
	{										
		CEntity &en = *(*it);		
		//CEntity *pEn = iten;
		FLOAT3D vHitPos;
		
		CModelInstance *pMI = en.GetModelInstance();
		if(!pMI)
		{
			continue;
		}

		//pEntity->InflictDirectDamage( (*it), pEntity, DMT_EXPLOSION,
		//	15.0f, vHitPos, (vHitPos-vCenter).Normalize() );

		if( _pNetwork->m_bSingleMode )
		{				
			// 10번 월드의 경우...
			if( g_slZone == EXTREAM_SINGLEDUNGEON )
			{
				//pEntity->CheckModelRangeDamage(en, vCenter, fMinD, vHitPos);
				pEntity->InflictDirectDamage( (*it), pEntity, dmtType, fDamageAmmount, vCenter, vCenter.Normalize() );
			}
			// 기타 다른 월드의 경우....
			else
			{
				pEntity->InflictDirectDamage( (*it), pEntity, dmtType, bSkill ? 30.0f : 15.0f, vCenter, vCenter.Normalize() );
			}
		}
		else
		{
			pEntity->InflictDirectDamage( (*it), pEntity, dmtType, fDamageAmmount, vCenter, vCenter.Normalize() );
		}
	}
};

#define HEADING_MAX      45.0f
#define PITCH_MAX        85.0f
#define BANKING_MAX      45.0f

// player flags
#define PLF_INITIALIZED           (1UL<<0)   // set when player entity is ready to function
#define PLF_VIEWROTATIONCHANGED   (1UL<<1)   // for adjusting view rotation separately from legs
#define PLF_JUMPALLOWED           (1UL<<2)   // if jumping is allowed
//#define PLF_SYNCWEAPON            (1UL<<3)   // weapon model needs to be synchronized before rendering
#define PLF_AUTOMOVEMENTS         (1UL<<4)   // complete automatic control of movements
#define PLF_DONTRENDER            (1UL<<5)   // don't render view (used at end of level)
#define PLF_CHANGINGLEVEL         (1UL<<6)   // mark that we next are to appear at start of new level
#define PLF_APPLIEDACTION         (1UL<<7)   // used to detect when player is not connected
#define PLF_NOTCONNECTED          (1UL<<8)   // set if the player is not connected
#define PLF_LEVELSTARTED          (1UL<<9)   // marks that level start time was recorded
#define PLF_ISZOOMING             (1UL<<10)  // marks that player is zoomed in with the sniper
#define PLF_RESPAWNINPLACE        (1UL<<11)  // don't move to marker when respawning (for current death only)
#define PLF_REAPPLYINGACTIONS     (1UL<<12)  // mark that we're reapplying actions (client local prediction)  

// defines representing flags used to fill player buttoned actions
#define PLACT_FIRE                (1L<<0)
//#define PLACT_RELOAD              (1L<<1)
//#define PLACT_WEAPON_NEXT         (1L<<2)
//#define PLACT_WEAPON_PREV         (1L<<3)
//#define PLACT_WEAPON_FLIP         (1L<<4)

// FIXME : 어느 순간부터 PLACT_USE 쓰는 부분이 다 막혀있음, 그래서 카메라 마커 동작중에 안먹는듯함...
#define PLACT_USE                 (1L<<5)
#define PLACT_3RD_PERSON_VIEW     (1L<<7)
#define PLACT_CENTER_VIEW         (1L<<8)
#define PLACT_USE_HELD            (1L<<9)
#define PLACT_SELECT_WEAPON_SHIFT (14)
#define PLACT_SELECT_WEAPON_MASK  (0x1FL<<PLACT_SELECT_WEAPON_SHIFT)

#define PICKEDREPORT_TIME   (2.0f)  // how long (picked-up) message stays on screen

struct PlayerControls 
{
	FLOAT fMoveForward;
	FLOAT fMoveBackward;
	FLOAT fMoveLeft;
	FLOAT fMoveRight;
	FLOAT fMoveUp;
	FLOAT fMoveDown;
	
	FLOAT fTurnLeft;
	FLOAT fTurnRight;
	FLOAT fTurnUp;
	FLOAT fTurnDown;
	FLOAT fTurnBankingLeft;
	FLOAT fTurnBankingRight;	
	
	FLOAT fLookLeft;
	FLOAT fLookRight;
	FLOAT fLookUp;
	FLOAT fLookDown;
	FLOAT fLookBankingLeft;
	FLOAT fLookBankingRight;
	
#define CTL_DIGITAL_FIRST bCenterView
	
	BOOL bCenterView;
	//BOOL bSelectWeapon[MAX_WEAPONS+1];
	//BOOL bWeaponNext;
	//BOOL bWeaponPrev;
	//BOOL bWeaponFlip;
	
	BOOL bWalk;
	BOOL bStrafe;
	BOOL bFire;	
	BOOL bUse;
	BOOL b3rdPersonView;	
};

static struct PlayerControls pctlCurrent;

// cheats
static INDEX cht_iGoToMarker = -1;
static INDEX cht_bKillAll    = FALSE;
static INDEX cht_bKillAllAuto = FALSE;
static INDEX cht_bKillAllInLevel = FALSE;
static INDEX cht_bStartDebugTrigger = FALSE;
static INDEX cht_bGiveAll    = FALSE;
static INDEX cht_bOpen       = FALSE;
static INDEX cht_bAllMessages= FALSE;
static INDEX cht_bRefresh    = FALSE;
extern INDEX cht_bGod        = FALSE;
extern INDEX cht_bFly        = FALSE;
extern INDEX cht_bGhost      = FALSE;
extern INDEX cht_bInvisible  = FALSE;
extern FLOAT cht_fTranslationMultiplier = 1.0f;
extern INDEX cht_bEnable     = 0;   

// interface control
static INDEX hud_bShowAll	    = TRUE; // used internaly in menu/console
//extern INDEX hud_bShowWeapon  = TRUE;
//extern INDEX hud_bShowMessages = TRUE;
extern INDEX hud_bShowInfo    = TRUE;
extern INDEX hud_bShowLatency = FALSE;
extern INDEX hud_iShowPlayers = -1;   // auto
extern INDEX hud_iSortPlayers = -1;   // auto
extern FLOAT hud_fOpacity     = 0.9f;
extern FLOAT hud_fScaling     = 1.0f;
//extern FLOAT hud_tmWeaponsOnScreen = 3.0f;
extern FLOAT hud_tmLatencySnapshot = 1.0f;
//extern INDEX hud_bShowMatchInfo = TRUE;
//extern INDEX hud_bShowFloatingScore = TRUE;

extern FLOAT plr_fBreathingStrength = 0.0f;
extern FLOAT plr_tmSnoopingTime;
//extern INDEX cht_bKillFinalBoss = FALSE;
//INDEX cht_bDebugFinalBoss = FALSE;
//INDEX cht_bDumpFinalBossData = FALSE;
//INDEX cht_bDebugFinalBossAnimations = FALSE;
INDEX cht_bDumpPlayerShading = FALSE;

// misc
static FLOAT plr_fAcceleration  = 1000.0f;
static FLOAT plr_fDeceleration  = 600.0f;
/*static FLOAT plr_fSpeedForward  = 10.0f;
static FLOAT plr_fSpeedBackward = 10.0f;
static FLOAT plr_fSpeedSide     = 10.0f;*/
//0105 1line 삭제
//static FLOAT plr_fSpeed         = 10.0f;
//0105
static FLOAT plr_fSpeed         = 5.0f;
static FLOAT plr_fSpeedTmp         = 0.0f;
//..
static FLOAT plr_fSpeedUp       = 11.0f;
static FLOAT plr_fViewHeightStand  = 1.9f;
//static FLOAT plr_fViewHeightCrouch = 0.7f;
static FLOAT plr_fViewHeightSwim   = 0.4f;
static FLOAT plr_fViewHeightDive   = 0.0f;
extern FLOAT plr_fViewDampFactor        = 0.4f;
extern FLOAT plr_fViewDampLimitGroundUp = 0.1f;
extern FLOAT plr_fViewDampLimitGroundDn = 0.4f;
extern FLOAT plr_fViewDampLimitWater    = 0.1f;
static FLOAT plr_fFrontClipDistance = 0.25f;
static FLOAT plr_fFarClipDistance = 500.0f;
static FLOAT plr_fFOV = 90.0f;
static FLOAT gfx_fTripleHeadFOVBias = 1.4f;  // not too much

static FLOAT net_tmLatencyAvg;
extern INDEX plr_bRenderPicked = FALSE;
extern INDEX plr_bRenderPickedParticles = FALSE;
extern INDEX plr_bOnlySam = FALSE;
extern INDEX ent_bReportBrokenChains = FALSE;
extern FLOAT ent_tmMentalIn   = 0.5f;
extern FLOAT ent_tmMentalOut  = 0.75f;
extern FLOAT ent_tmMentalFade = 0.5f;
static INDEX plr_bRespawnInPlaceCoop = TRUE;

extern FLOAT gfx_fEnvParticlesDensity = 1.0f;
extern FLOAT gfx_fEnvParticlesRange   = 1.0f;

static FLOAT plr_fSwimSoundDelay = 0.8f;
static FLOAT plr_fDiveSoundDelay = 1.6f;
static FLOAT plr_fWalkSoundDelay = 0.6f;//0.5f; //0323
static FLOAT plr_fRunSoundDelay  = 0.415f;//0.35f;//0.3f;

//static FLOAT ctl_tmComputerDoubleClick = 0.5f; // double click delay for calling computer
//static FLOAT _tmLastUseOrCompPressed = -10.0f;  // for computer doubleclick

extern INDEX gam_iBlood = 2;     // 0=none, 1=green, 2=red, 3=hippie
extern INDEX gam_bGibs  = TRUE;

// speeds for button rotation
static FLOAT ctl_fButtonRotationSpeedH = 300.0f;
static FLOAT ctl_fButtonRotationSpeedP = 150.0f;
static FLOAT ctl_fButtonRotationSpeedB = 150.0f;
// modifier for axis strafing
static FLOAT ctl_fAxisStrafingModifier = 1.0f;

static plr_bSetRespawn = FALSE;

//0530 kwon 추가
static unsigned int tmStartTime = 0;

//0625 kwon
static ANGLE aWantedHeadingRelativeTmp = 0;
static g_bIsRotating = FALSE;
static FLOAT3D g_vMove = FLOAT3D(0,0,0);
static FLOAT3D g_vMoveDirection = FLOAT3D(0,0,0);
static g_bIsRotateEnd = FALSE;
static g_bFirstRotate = FALSE;
static FLOAT3D g_bTargetDirection = FLOAT3D(0,0,0);

//0722
static g_bPreSkill  = FALSE; 
static g_bDoSkill   = FALSE;
static g_bPostSkill = FALSE;
static FLOAT g_deltaX = 0;
static FLOAT g_deltaZ = 0;

extern INDEX dbg_bShowEnemyBodyPoint = FALSE;

extern ENGINE_API BOOL g_bHead_change; // 일본 헬멧 추가 관련 

// set when computer is called on level start
DECL_DLL extern BOOL cmp_bLevelStart = FALSE;
// set to play video before and after end of level
//DECL_DLL extern CTString cmp_strVideo1 = "";
//DECL_DLL extern CTString cmp_strVideo2 = "";
//DECL_DLL extern CTString cmp_strVideoInGame = "";

// !=NULL if some player wants to call computer
DECL_DLL extern class CPlayer *cmp_ppenPlayer = NULL;
// !=NULL for rendering computer on secondary display in dualhead
DECL_DLL extern class CPlayer *cmp_ppenDHPlayer = NULL;
// set to update current message in background mode (for dualhead)
DECL_DLL extern BOOL cmp_bUpdateInBackground = FALSE;
// set for initial calling computer without rendering game
DECL_DLL extern BOOL cmp_bInitialStart = FALSE;

// game sets this for player hud and statistics and hiscore sound playing
//DECL_DLL extern INDEX plr_iHiScore = 0.0f;

// these define address and size of player controls structure
DECL_DLL extern void *ctl_pvPlayerControls = &pctlCurrent;
DECL_DLL extern const SLONG ctl_slPlayerControlsSize = sizeof(pctlCurrent);

// called to compose action packet from current controls
DECL_DLL void ctl_ComposeActionPacket(const CPlayerCharacter &pc, CPlayerAction &paAction, BOOL bPreScan)
{
//	return;//0114

	CPlayerSettings *pps = (CPlayerSettings *)pc.pc_aubAppearance;
	
	// find local player, if any
	CPlayer *penThis = (CPlayer *)CEntity::GetPlayerEntity(pc.pc_iPlayerIndex);
	
	// if not found
	if (penThis==NULL) {
		// do nothing
		return;
	}
	
	// accumulate local rotation
	FLOAT3D &vRotation = penThis->m_aLocalRotation;
	FLOAT3D &vViewRotation = penThis->m_aLocalViewRotation;
	FLOAT3D &vTranslation  = penThis->m_vLocalTranslation;
	
	//  CPrintF("compose: prescan %d, x:%g\n", bPreScan, paAction.pa_aRotation(1));
	
	FLOAT fMoveLeft  = pctlCurrent.fMoveLeft;
	FLOAT fMoveRight = pctlCurrent.fMoveRight;
	if(pctlCurrent.bStrafe&&pctlCurrent.fTurnLeft>0.0f) 
	{
		fMoveLeft += pctlCurrent.fTurnLeft;
	}

	if(pctlCurrent.bStrafe&&pctlCurrent.fTurnRight>0.0f) 
	{
		fMoveRight += pctlCurrent.fTurnRight;
	}
	
	// no analogue controls on move up/down
	if (pctlCurrent.fMoveDown>0.0f) pctlCurrent.fMoveDown = 1.0f;
	//if (pctlCurrent.fMoveUp  >0.0f) pctlCurrent.fMoveUp   = 1.0f;	// 점프
	//pctlCurrent.fMoveUp   = 0.0f;	// 점프
	pctlCurrent.fMoveUp   = 0.0f;	// 점프

/*
	// NOTE : 제한 영역내에서만 점프하도록 하는 루틴임.
	//--------------------------------------------------------------------------
	if(!_bLoginProcess)
	{
		// 제한 영역내에 플레이어가 들어가있다면...
		CRestrictedField *pField = FindPlayerInRestrictedField(penThis);
		if(pField)
		{
			if (pctlCurrent.fMoveUp  >0.0f) pctlCurrent.fMoveUp   = 1.0f;	// 점프
			CPrintF("제한영역 내에 들어와있습니다.!\n");
		}
		else
		{
			pctlCurrent.fMoveUp   = 0.0f;	// 점프
		}
	}
	else
	{
		pctlCurrent.fMoveUp   = 0.0f;	// 점프
	}
	*/
	//--------------------------------------------------------------------------
	
	vTranslation(1) -= fMoveLeft  * plr_fSpeed;
	vTranslation(1) += fMoveRight * plr_fSpeed;
	vTranslation(2) -= pctlCurrent.fMoveDown * plr_fSpeedUp;
	vTranslation(2) += pctlCurrent.fMoveUp   * plr_fSpeedUp;
	vTranslation(3) -= pctlCurrent.fMoveForward  * plr_fSpeed;
	vTranslation(3) += pctlCurrent.fMoveBackward * plr_fSpeed;
	//0212
	//  CPrintF(TRANS("plr_fSpeed : %f\n"), plr_fSpeed);
	
	FLOAT fSensitivityH = ((FLOAT)(pps->ps_iSensitivity)/127.0f)*0.75f;
	FLOAT fSensitivityP = ((FLOAT)(pps->ps_iSensitivity)/127.0f)*0.50f;
	
	// if not strafing
	if(!pctlCurrent.bStrafe) 
	{
		vRotation(1)+= pctlCurrent.fTurnLeft*(1.0f+fSensitivityH);
		vRotation(1)-= pctlCurrent.fTurnRight*(1.0f+fSensitivityH);
	}
	
	BOOL bInvertLook = pps->ps_ulFlags&PSF_INVERTLOOK;
	FLOAT fInvert = bInvertLook ? -1.0f : 1.0f;      
	
	vRotation(2)+= fInvert*(pctlCurrent.fTurnUp  *(1.0f+fSensitivityP));
	vRotation(2)-= fInvert*(pctlCurrent.fTurnDown*(1.0f+fSensitivityP));
	vRotation(3)+= pctlCurrent.fTurnBankingLeft ;
	vRotation(3)-= pctlCurrent.fTurnBankingRight;
	
	memset(&pctlCurrent, 0, offsetof(PlayerControls, CTL_DIGITAL_FIRST));
	
	paAction.pa_vTranslation  = penThis->m_vLocalTranslation;
	penThis->m_vLocalTranslation  = FLOAT3D(0,0,0);
	
	// if prescanning
	if (bPreScan) 
	{
		// no button checking
		return;
	}
	
	// use current accumulated rotation
	paAction.pa_aRotation     = penThis->m_aLocalRotation;
	paAction.pa_aViewRotation = penThis->m_aLocalViewRotation;
	
	// reset all button actions
	paAction.pa_ulButtons = 0;
	
	/*
	// set weapon selection bits
	for(INDEX i=1; i<MAX_WEAPONS; i++) 
	{
		if(pctlCurrent.bSelectWeapon[i]) 
		{
			paAction.pa_ulButtons = i<<PLACT_SELECT_WEAPON_SHIFT;
			break;
		}
	}
	*/
	// set button pressed flags
	//if(pctlCurrent.bWeaponNext) paAction.pa_ulButtons |= PLACT_WEAPON_NEXT;
	//if(pctlCurrent.bWeaponPrev) paAction.pa_ulButtons |= PLACT_WEAPON_PREV;
	//if(pctlCurrent.bWeaponFlip) paAction.pa_ulButtons |= PLACT_WEAPON_FLIP;
//	if(pctlCurrent.bFire)       paAction.pa_ulButtons |= PLACT_FIRE;//0114
	//if(pctlCurrent.bReload)     paAction.pa_ulButtons |= PLACT_RELOAD;
//	if(pctlCurrent.bUse)        paAction.pa_ulButtons |= PLACT_USE|PLACT_USE_HELD|PLACT_SNIPER_USE;
	//if(pctlCurrent.bComputer)      paAction.pa_ulButtons |= PLACT_COMPUTER;
	if(pctlCurrent.b3rdPersonView) paAction.pa_ulButtons |= PLACT_3RD_PERSON_VIEW;
	if(pctlCurrent.bCenterView)    paAction.pa_ulButtons |= PLACT_CENTER_VIEW;
	// is 'use' being held?
	//if(pctlCurrent.bUseOrComputer) paAction.pa_ulButtons |= PLACT_USE_HELD|PLACT_SNIPER_USE;

	// FIXME : Sniper들어간 부분 모두 제거하기.
	//if(pctlCurrent.bSniperZoomIn)  paAction.pa_ulButtons |= PLACT_SNIPER_ZOOMIN;
	//if(pctlCurrent.bSniperZoomOut) paAction.pa_ulButtons |= PLACT_SNIPER_ZOOMOUT;
	//if(pctlCurrent.bFireBomb)      paAction.pa_ulButtons |= PLACT_FIREBOMB;
	
	// if userorcomp just pressed
	/*
	if(pctlCurrent.bUseOrComputer && !pctlCurrent.bUseOrComputerLast) 
	{
		// if double-click is off
		if (ctl_tmComputerDoubleClick==0 || (pps->ps_ulFlags&PSF_COMPSINGLECLICK)) 
		{
			// press both
			paAction.pa_ulButtons |= PLACT_USE|PLACT_COMPUTER;
			// if double-click is on
		} 
		else 
		{
			// if double click
			if (_pTimer->GetRealTimeTick()<=_tmLastUseOrCompPressed+ctl_tmComputerDoubleClick) 
			{
				// computer pressed
				paAction.pa_ulButtons |= PLACT_COMPUTER;
				// if single click
			} 
			else 
			{
				// use pressed
				paAction.pa_ulButtons |= PLACT_USE;
			}
		}
		_tmLastUseOrCompPressed = _pTimer->GetRealTimeTick();
	}
	// remember old userorcomp pressed state
	pctlCurrent.bUseOrComputerLast = pctlCurrent.bUseOrComputer;
	*/
};

extern UINT g_uiEntityVersion;
extern ENGINE_API INDEX g_bTestClient;
extern ENGINE_API HWND  _hwndMain;
ENGINE_API char *g_szExitError;


void CPlayer_Precache(void)
{
	CDLLEntityClass *pdec = &CPlayer_DLLClass;
	
	// precache view
	extern void CPlayerView_Precache(void);
	CPlayerView_Precache();

	pdec->PrecacheSound( SOUND_DEFAULT );

	// Bsp
	pdec->PrecacheSound( SOUND_WALK_MARBLE_IN_L );
	pdec->PrecacheSound( SOUND_WALK_MARBLE_IN_R );
	pdec->PrecacheSound( SOUND_WALK_BLOCK_OUT_L );
	pdec->PrecacheSound( SOUND_WALK_BLOCK_OUT_R );
	pdec->PrecacheSound( SOUND_WALK_WOOD_OUT_L );
	pdec->PrecacheSound( SOUND_WALK_WOOD_OUT_R );

	// Terrain
	pdec->PrecacheSound( SOUND_TER_WALK_DIRT_L );
	pdec->PrecacheSound( SOUND_TER_WALK_DIRT_R );
	pdec->PrecacheSound( SOUND_TER_WALK_GRASS_L );
	pdec->PrecacheSound( SOUND_TER_WALK_GRASS_R );
	pdec->PrecacheSound( SOUND_TER_WALK_ROCK_L );
	pdec->PrecacheSound( SOUND_TER_WALK_ROCK_R );
	pdec->PrecacheSound( SOUND_TER_WALK_BLOCK_L );
	pdec->PrecacheSound( SOUND_TER_WALK_BLOCK_R );
	pdec->PrecacheSound( SOUND_WATER_WALK_SHALLOW_L );
	pdec->PrecacheSound( SOUND_WATER_WALK_SHALLOW_R );

	// Effect
	pdec->PrecacheSound( SOUND_HEALER_HEAL_PRE );
	pdec->PrecacheSound( SOUND_HEALER_HEAL_DO );
	pdec->PrecacheSound( SOUND_HEALER_PARTY_HEAL_DO );
	pdec->PrecacheSound( SOUND_HEALER_DEFENCE_MANA_DO );

	// 강신체 사운드.
	pdec->PrecacheSound( SOUND_WALK_ELENEN_WALK		);
	pdec->PrecacheSound( SOUND_WALK_ELENEN_RUN		);
	pdec->PrecacheSound( SOUND_WALK_HELL_WALK		);
	pdec->PrecacheSound( SOUND_WALK_HELL_RUN		);

	pdec->PrecacheSound( SOUND_WALK_HORSE_WALK		);
	pdec->PrecacheSound( SOUND_WALK_HORSE_RUN		);
	pdec->PrecacheSound( SOUND_WALK_DRAGON_WALK		);
	//pdec->PrecacheSound( SOUND_WALK_DRAGON_RUN		);

	pdec->PrecacheSound( SOUND_HEALER_DAMAGE );
	pdec->PrecacheSound( SOUND_MAGE_DAMAGE );
	pdec->PrecacheSound( SOUND_TITAN_DAMAGE );
	pdec->PrecacheSound( SOUND_KNIGHT_DAMAGE );
	pdec->PrecacheSound( SOUND_ROGUE_DAMAGE );
	pdec->PrecacheSound( SOUND_SORCERER_DAMAGE );

	pdec->PrecacheSound( SOUND_HEALER_ATTACK );
	pdec->PrecacheSound( SOUND_MAGE_ATTACK );
	pdec->PrecacheSound( SOUND_TITAN_ATTACK );
	pdec->PrecacheSound( SOUND_KNIGHT_ATTACK );
	pdec->PrecacheSound( SOUND_ROGUE_ATTACK );
	pdec->PrecacheSound( SOUND_SORCERER_ATTACK );

	pdec->PrecacheSound( SOUND_SWORD_BLOW );
	pdec->PrecacheSound( SOUND_SWORD_CRITICAL );
	pdec->PrecacheSound( SOUND_BIGSWORD_BLOW  );
	pdec->PrecacheSound( SOUND_BIGSWORD_CRITICAL );
	pdec->PrecacheSound( SOUND_DROP_ITEM		);
	pdec->PrecacheSound( SOUND_DROP_MONEY		);
	pdec->PrecacheSound( SOUND_PICK_ITEM		);
	pdec->PrecacheSound( SOUND_BUTTON_CLICK		);

	pdec->PrecacheSound(  SOUND_POTION  );
	pdec->PrecacheSound(  SOUND_CRAK  );
	//pdec->PrecacheSound(  SOUND_MINE  );
	pdec->PrecacheSound(  SOUND_PROCESS	);
	pdec->PrecacheSound(  SOUND_PRODUCT	);
	pdec->PrecacheSound(  SOUND_POLYMOPH );

	pdec->PrecacheSound(  SOUND_DAGGER_BLOW);
	pdec->PrecacheSound(  SOUND_DAGGER_CRITICAL);
	pdec->PrecacheSound(  SOUND_FOOT_BLOW);
	pdec->PrecacheSound(  SOUND_FOOT_CRITICAL);
	pdec->PrecacheSound(  SOUND_AXE_BLOW  );
	pdec->PrecacheSound(  SOUND_AXE_CRITICAL );

	pdec->PrecacheSound( SOUND_DAIR_STRIKE_PRE);
	pdec->PrecacheSound( SOUND_DAIR_STRIKE_BLOW1);
	pdec->PrecacheSound( SOUND_DAIR_STRIKE_BLOW2);
	pdec->PrecacheSound( SOUND_DAIR_STRIKE_BLOW3);
	pdec->PrecacheSound( SOUND_A_DAIR_STRIKE_PRE);
	pdec->PrecacheSound( SOUND_A_DAIR_STRIKE_BLOW1);
	pdec->PrecacheSound( SOUND_A_DAIR_STRIKE_BLOW2);
	pdec->PrecacheSound( SOUND_A_DAIR_STRIKE_BLOW3);
}

DECL_DLL void CheckEntityVersion()
{
	if( !((g_bTestClient && g_uiEntityVersion >= 10000) || (!g_bTestClient && g_uiEntityVersion < 10000)) )
	{
		if(g_szExitError) delete[] g_szExitError;
		g_szExitError = new char[4096];
		strcpy(g_szExitError, _S( 864, "버전 정보가 맞지 않습니다." ));
		_pGameState->Running() = FALSE;
		_pGameState->QuitScreen() = FALSE;
	}	
}

/*
//0825
void Init_DeathTable(void)
{
	for ( int i = 0; i < MAX_DEATH; ++i )
	{
		_DeathTable[i].m_penDeathEntity = NULL;
		_DeathTable[i].DeathTime		= 0.0f;
		_DeathTable[i].bActive			= FALSE;
	}
}
*/

void TestEffect()
{
	CEntity *penTarget = ((CPlayer*)CEntity::GetPlayerEntity(0))->GetPlayerWeapons()->m_penRayHitTmp;
	if(penTarget == NULL) return;
	if(penTarget->GetRenderType() != CEntity::RT_SKAMODEL) return;
	if(penTarget->GetModelInstance() == NULL) return;
	if(!penTarget->IsEnemy()) return;
	void ShotConnect(CEntity *penShoter, CEntity *penTarget, FLOAT fWaitTime
					 , const char *szHitEffectName, const char *szConnectEffectName);
	ShotConnect(CEntity::GetPlayerEntity(0), penTarget
		, 3
		, "KN_TN_Dlnk_Hit"
		, "KN_TN_Dlnk_ms"
		);
}

void CPlayer_OnInitClass(void)
{
	// clear current player controls
	memset(&pctlCurrent, 0, sizeof(pctlCurrent));
	_pShell->DeclareSymbol("void TestEffect();", TestEffect);
	_pShell->DeclareSymbol("persistent user INDEX g_iPCMinBrightness;", &g_iPCMinBrightness);
	_pShell->DeclareSymbol("persistent user INDEX g_iChaLightModifyValue;", &g_iChaLightModifyValue);
	_pShell->DeclareSymbol("persistent user INDEX gam_iBlood;", &gam_iBlood);
	_pShell->DeclareSymbol("persistent user INDEX gam_bGibs;",  &gam_bGibs);
	// declare player control variables
	_pShell->DeclareSymbol("user FLOAT ctl_fMoveForward;",  &pctlCurrent.fMoveForward);
	_pShell->DeclareSymbol("user FLOAT ctl_fMoveBackward;", &pctlCurrent.fMoveBackward);
	_pShell->DeclareSymbol("user FLOAT ctl_fMoveLeft;",     &pctlCurrent.fMoveLeft);
	_pShell->DeclareSymbol("user FLOAT ctl_fMoveRight;",    &pctlCurrent.fMoveRight);
	_pShell->DeclareSymbol("user FLOAT ctl_fMoveUp;",       &pctlCurrent.fMoveUp);
	_pShell->DeclareSymbol("user FLOAT ctl_fMoveDown;",     &pctlCurrent.fMoveDown);
	_pShell->DeclareSymbol("user FLOAT ctl_fTurnLeft;",         &pctlCurrent.fTurnLeft);
	_pShell->DeclareSymbol("user FLOAT ctl_fTurnRight;",        &pctlCurrent.fTurnRight);
	_pShell->DeclareSymbol("user FLOAT ctl_fTurnUp;",           &pctlCurrent.fTurnUp);
	_pShell->DeclareSymbol("user FLOAT ctl_fTurnDown;",         &pctlCurrent.fTurnDown);
	_pShell->DeclareSymbol("user FLOAT ctl_fTurnBankingLeft;",  &pctlCurrent.fTurnBankingLeft);
	_pShell->DeclareSymbol("user FLOAT ctl_fTurnBankingRight;", &pctlCurrent.fTurnBankingRight);
	_pShell->DeclareSymbol("user INDEX ctl_bCenterView;",       &pctlCurrent.bCenterView);
	_pShell->DeclareSymbol("user INDEX ctl_fLookLeft;",         &pctlCurrent.fLookLeft);
	_pShell->DeclareSymbol("user INDEX ctl_fLookRight;",        &pctlCurrent.fLookRight);
	_pShell->DeclareSymbol("user INDEX ctl_fLookUp;",           &pctlCurrent.fLookUp);
	_pShell->DeclareSymbol("user INDEX ctl_fLookDown;",         &pctlCurrent.fLookDown);
	_pShell->DeclareSymbol("user INDEX ctl_fLookBankingLeft;",  &pctlCurrent.fLookBankingLeft);
	_pShell->DeclareSymbol("user INDEX ctl_fLookBankingRight;", &pctlCurrent.fLookBankingRight );
	_pShell->DeclareSymbol("user INDEX ctl_bWalk;",           &pctlCurrent.bWalk);
	_pShell->DeclareSymbol("user INDEX ctl_bStrafe;",         &pctlCurrent.bStrafe);
	_pShell->DeclareSymbol("user INDEX ctl_bFire;",           &pctlCurrent.bFire);
	//_pShell->DeclareSymbol("user INDEX ctl_bReload;",         &pctlCurrent.bReload);
	_pShell->DeclareSymbol("user INDEX ctl_bUse;",            &pctlCurrent.bUse);
	//_pShell->DeclareSymbol("user INDEX ctl_bComputer;",       &pctlCurrent.bComputer);
	//_pShell->DeclareSymbol("user INDEX ctl_bUseOrComputer;",  &pctlCurrent.bUseOrComputer);
	_pShell->DeclareSymbol("user INDEX ctl_b3rdPersonView;",  &pctlCurrent.b3rdPersonView);
	//_pShell->DeclareSymbol("user INDEX ctl_bWeaponNext;",         &pctlCurrent.bWeaponNext);
	//_pShell->DeclareSymbol("user INDEX ctl_bWeaponPrev;",         &pctlCurrent.bWeaponPrev);
	//_pShell->DeclareSymbol("user INDEX ctl_bWeaponFlip;",         &pctlCurrent.bWeaponFlip);
	//_pShell->DeclareSymbol("user INDEX ctl_bSelectWeapon[30+1];", &pctlCurrent.bSelectWeapon);
	//_pShell->DeclareSymbol("persistent user FLOAT ctl_tmComputerDoubleClick;", &ctl_tmComputerDoubleClick);
	_pShell->DeclareSymbol("persistent user FLOAT ctl_fButtonRotationSpeedH;", &ctl_fButtonRotationSpeedH);
	_pShell->DeclareSymbol("persistent user FLOAT ctl_fButtonRotationSpeedP;", &ctl_fButtonRotationSpeedP);
	_pShell->DeclareSymbol("persistent user FLOAT ctl_fButtonRotationSpeedB;", &ctl_fButtonRotationSpeedB);
	_pShell->DeclareSymbol("persistent user FLOAT ctl_fAxisStrafingModifier;", &ctl_fAxisStrafingModifier);
	//new
	//_pShell->DeclareSymbol("user INDEX ctl_bSniperZoomIn;",         &pctlCurrent.bSniperZoomIn);
	//_pShell->DeclareSymbol("user INDEX ctl_bSniperZoomOut;",        &pctlCurrent.bSniperZoomOut);
	//_pShell->DeclareSymbol("user INDEX ctl_bFireBomb;",             &pctlCurrent.bFireBomb);
	
	_pShell->DeclareSymbol("user FLOAT plr_fSwimSoundDelay;", &plr_fSwimSoundDelay);
	_pShell->DeclareSymbol("user FLOAT plr_fDiveSoundDelay;", &plr_fDiveSoundDelay);
	_pShell->DeclareSymbol("user FLOAT plr_fWalkSoundDelay;", &plr_fWalkSoundDelay);
	_pShell->DeclareSymbol("user FLOAT plr_fRunSoundDelay;",  &plr_fRunSoundDelay);
	
	_pShell->DeclareSymbol("     INDEX hud_bShowAll;",     &hud_bShowAll);
	_pShell->DeclareSymbol("user INDEX hud_bShowInfo;",    &hud_bShowInfo);
	_pShell->DeclareSymbol("user const FLOAT net_tmLatencyAvg;", &net_tmLatencyAvg);
	_pShell->DeclareSymbol("persistent user INDEX hud_bShowLatency;", &hud_bShowLatency);
	_pShell->DeclareSymbol("persistent user INDEX hud_iShowPlayers;", &hud_iShowPlayers);
	_pShell->DeclareSymbol("persistent user INDEX hud_iSortPlayers;", &hud_iSortPlayers);
	//_pShell->DeclareSymbol("persistent user INDEX hud_bShowWeapon;",  &hud_bShowWeapon);
	//_pShell->DeclareSymbol("persistent user INDEX hud_bShowMessages;",&hud_bShowMessages);
	_pShell->DeclareSymbol("persistent user FLOAT hud_fScaling;",     &hud_fScaling);
	_pShell->DeclareSymbol("persistent user FLOAT hud_fOpacity;",     &hud_fOpacity);
//	_pShell->DeclareSymbol("persistent user INDEX hud_bShowFloatingScore;", &hud_bShowFloatingScore);  
	//_pShell->DeclareSymbol("persistent user FLOAT hud_tmWeaponsOnScreen;",  &hud_tmWeaponsOnScreen);
	_pShell->DeclareSymbol("persistent user FLOAT hud_tmLatencySnapshot;",  &hud_tmLatencySnapshot);
	_pShell->DeclareSymbol("persistent user FLOAT plr_fBreathingStrength;", &plr_fBreathingStrength);
//	_pShell->DeclareSymbol("INDEX cht_bKillFinalBoss;",  &cht_bKillFinalBoss);
//	_pShell->DeclareSymbol("INDEX cht_bDebugFinalBoss;", &cht_bDebugFinalBoss);
//	_pShell->DeclareSymbol("INDEX cht_bDumpFinalBossData;", &cht_bDumpFinalBossData);
//	_pShell->DeclareSymbol("INDEX cht_bDebugFinalBossAnimations;", &cht_bDebugFinalBossAnimations);
	_pShell->DeclareSymbol("INDEX cht_bDumpPlayerShading;", &cht_bDumpPlayerShading);
	//_pShell->DeclareSymbol("persistent user INDEX hud_bShowMatchInfo;", &hud_bShowMatchInfo);
	
	// cheats
	_pShell->DeclareSymbol("user INDEX cht_bGod;",       &cht_bGod);
	_pShell->DeclareSymbol("user INDEX cht_bFly;",       &cht_bFly);
	_pShell->DeclareSymbol("user INDEX cht_bGhost;",     &cht_bGhost);
	_pShell->DeclareSymbol("user INDEX cht_bInvisible;", &cht_bInvisible);
	_pShell->DeclareSymbol("user INDEX cht_bGiveAll;",   &cht_bGiveAll);
	_pShell->DeclareSymbol("user INDEX cht_bKillAll;",   &cht_bKillAll);
	_pShell->DeclareSymbol("user INDEX cht_bKillAllAuto;",   &cht_bKillAllAuto);
	_pShell->DeclareSymbol("user INDEX cht_bKillAllInLevel;",   &cht_bKillAllInLevel);
	_pShell->DeclareSymbol("user INDEX cht_bStartDebugTrigger;", &cht_bStartDebugTrigger);
	_pShell->DeclareSymbol("user INDEX cht_bOpen;",      &cht_bOpen);
	_pShell->DeclareSymbol("user INDEX cht_bAllMessages;", &cht_bAllMessages);
	_pShell->DeclareSymbol("user FLOAT cht_fTranslationMultiplier ;", &cht_fTranslationMultiplier);
	_pShell->DeclareSymbol("user INDEX cht_bRefresh;", &cht_bRefresh);
	// this one is masqueraded cheat enable variable
	_pShell->DeclareSymbol("INDEX cht_bEnable;", &cht_bEnable);
	
	// this cheat is always enabled
	_pShell->DeclareSymbol("user INDEX cht_iGoToMarker;", &cht_iGoToMarker);
	
	// debug variables
	_pShell->DeclareSymbol("void DumpEnemies(void);", &DumpEnemies);
	_pShell->DeclareSymbol("void DumpSpawners(void);", &DumpSpawners);
	//_pShell->DeclareSymbol("void DumpZombies(void);", &DumpZombies);
	_pShell->DeclareSymbol("void GoTo(INDEX, INDEX, INDEX);", &GoTo);
	_pShell->DeclareSymbol("user INDEX dbg_bEnemyKillTest;", &dbg_bEnemyKillTest);  
	_pShell->DeclareSymbol("persistent user INDEX dbg_bShowEnemyBodyPoint;", &dbg_bShowEnemyBodyPoint);  
	
	// player speed and view parameters, not declared except in internal build
#if 1
	_pShell->DeclareSymbol("user FLOAT plr_fViewHeightStand;", &plr_fViewHeightStand);
	//_pShell->DeclareSymbol("user FLOAT plr_fViewHeightCrouch;",&plr_fViewHeightCrouch);
	_pShell->DeclareSymbol("user FLOAT plr_fViewHeightSwim;",  &plr_fViewHeightSwim);
	_pShell->DeclareSymbol("user FLOAT plr_fViewHeightDive;",  &plr_fViewHeightDive);
	_pShell->DeclareSymbol("user FLOAT plr_fViewDampFactor;",         &plr_fViewDampFactor);
	_pShell->DeclareSymbol("user FLOAT plr_fViewDampLimitGroundUp;",  &plr_fViewDampLimitGroundUp);
	_pShell->DeclareSymbol("user FLOAT plr_fViewDampLimitGroundDn;",  &plr_fViewDampLimitGroundDn);
	_pShell->DeclareSymbol("user FLOAT plr_fViewDampLimitWater;",     &plr_fViewDampLimitWater);
	_pShell->DeclareSymbol("user FLOAT plr_fAcceleration;",  &plr_fAcceleration);
	_pShell->DeclareSymbol("user FLOAT plr_fDeceleration;",  &plr_fDeceleration);
	/*_pShell->DeclareSymbol("user FLOAT plr_fSpeedForward;",  &plr_fSpeedForward);
	_pShell->DeclareSymbol("user FLOAT plr_fSpeedBackward;", &plr_fSpeedBackward);
	_pShell->DeclareSymbol("user FLOAT plr_fSpeedSide;",     &plr_fSpeedSide);*/
	_pShell->DeclareSymbol("user FLOAT plr_fSpeed;",         &plr_fSpeed);
	_pShell->DeclareSymbol("user FLOAT plr_fSpeedUp;",       &plr_fSpeedUp);
#endif
	_pShell->DeclareSymbol("persistent user FLOAT plr_fFOV;", &plr_fFOV);
	_pShell->DeclareSymbol("persistent user FLOAT plr_fFrontClipDistance;", &plr_fFrontClipDistance);
	_pShell->DeclareSymbol("persistent user FLOAT plr_fFarClipDistance;", &plr_fFarClipDistance);
	_pShell->DeclareSymbol("persistent user FLOAT gfx_fTripleHeadFOVBias;", &gfx_fTripleHeadFOVBias);
	_pShell->DeclareSymbol("persistent user INDEX plr_bRenderPicked;", &plr_bRenderPicked);
	_pShell->DeclareSymbol("persistent user INDEX plr_bRenderPickedParticles;", &plr_bRenderPickedParticles);
	_pShell->DeclareSymbol("persistent user INDEX plr_bOnlySam;", &plr_bOnlySam);
	_pShell->DeclareSymbol("persistent user INDEX ent_bReportBrokenChains;", &ent_bReportBrokenChains);
	_pShell->DeclareSymbol("persistent user FLOAT ent_tmMentalIn  ;", &ent_tmMentalIn  );
	_pShell->DeclareSymbol("persistent user FLOAT ent_tmMentalOut ;", &ent_tmMentalOut );
	_pShell->DeclareSymbol("persistent user FLOAT ent_tmMentalFade;", &ent_tmMentalFade);
	_pShell->DeclareSymbol("persistent user FLOAT gfx_fEnvParticlesDensity;", &gfx_fEnvParticlesDensity);
	_pShell->DeclareSymbol("persistent user FLOAT gfx_fEnvParticlesRange;", &gfx_fEnvParticlesRange);
	_pShell->DeclareSymbol("user INDEX plr_bRespawnInPlaceCoop;", &plr_bRespawnInPlaceCoop);
	
	// player appearance interface
	_pShell->DeclareSymbol("INDEX SetPlayerAppearance(INDEX, INDEX, INDEX, INDEX);", (void*)&SetPlayerAppearance);
	//0105
	_pShell->DeclareSymbol("INDEX SetPlayerAppearanceSka(INDEX, INDEX, INDEX, INDEX);", (void*)&SetPlayerAppearanceSka);
	//..
	// call player weapons persistant variable initialization
	extern void CPlayerWeapons_Init(void);
	CPlayerWeapons_Init();
	
	// initialize HUD
	InitHUD();	
	
	//0825
//	Init_DeathTable();	

	// precache
	CPlayer_Precache();
}

// clean up
void CPlayer_OnEndClass(void)
{
	EndHUD();
}

FLOAT TopHealth(void)
{
	if (GetSP()->sp_gdGameDifficulty<=CSessionProperties::GD_EASY) {
		return 200;
	} else {
		return 100;
	}
}

// info structure
static EntityInfo eiPlayerGround = {
	EIBT_FLESH, 80.0f,
	0.0f, 1.7f, 0.0f,     // source (eyes)
	0.0f, 1.0f, 0.0f,     // target (body)
};
/*
static EntityInfo eiPlayerCrouch = {
	EIBT_FLESH, 80.0f,
	0.0f, 1.2f, 0.0f,     // source (eyes)
	0.0f, 0.7f, 0.0f,     // target (body)
};
*/
static EntityInfo eiPlayerSwim = {
	EIBT_FLESH, 40.0f,
	0.0f, 0.0f, 0.0f,     // source (eyes)
	0.0f, 0.0f, 0.0f,     // target (body)
};

// animation light specific
//#define LIGHT_ANIM_MINIGUN 2
//#define LIGHT_ANIM_TOMMYGUN 3
//#define LIGHT_ANIM_COLT_SHOTGUN 4
#define LIGHT_ANIM_NONE 5

const char *NameForState(PlayerState pst)
{
	switch(pst) {
	case PST_STAND: return "stand";
//	case PST_CROUCH: return "crouch";
	case PST_FALL: return "fall";
	case PST_SWIM: return "swim";
	case PST_DIVE: return "dive";
	default: return "???";
	};
}

/*
// print explanation on how a player died
void PrintPlayerDeathMessage(CPlayer *ppl, const EPlayerDeath &ePLDeath)
{
	CTString strMyName = ppl->GetPlayerName();
	CEntity *penKiller = (CEntity*) ePLDeath.eidInflictor;
	// if killed by a valid entity
	if( penKiller!=NULL) {
		// if killed by a player
		if( IsOfClass( penKiller, &CPlayer_DLLClass)) {
			// if not self
			if( penKiller!=ppl) {
				CTString strKillerName = ((CPlayer*)penKiller)->GetPlayerName();
				
				if(ePLDeath.dmtType==DMT_TELEPORT) {
					CPrintF(TRANS("%s telefragged %s\n"), strKillerName, strMyName);
				} else if(ePLDeath.dmtType==DMT_CLOSERANGE) {
					CPrintF(TRANS("%s cut %s into pieces\n"), strKillerName, strMyName);
				} else if(ePLDeath.dmtType==DMT_CHAINSAW) {
					CPrintF(TRANS("%s cut %s into pieces\n"), strKillerName, strMyName);
				} else if(ePLDeath.dmtType==DMT_BULLET ||
					ePLDeath.dmtType==DMT_SHOTGUN ||
					ePLDeath.dmtType==DMT_SNIPER) {
					CPrintF(TRANS("%s poured lead into %s\n"), strKillerName, strMyName);
				} else if(ePLDeath.dmtType==DMT_PROJECTILE || ePLDeath.dmtType==DMT_EXPLOSION) {
					CPrintF(TRANS("%s blew %s away\n"), strKillerName, strMyName);
				} 
				else {
					CPrintF(TRANS("%s killed %s\n"), strKillerName, strMyName);
				}
			} else {
				// make message from damage type
				switch(ePLDeath.dmtType) {
				case DMT_DROWNING:  CPrintF(TRANS("%s drowned\n"), strMyName); break;
				case DMT_BURNING:   CPrintF(TRANS("%s burst into flames\n"), strMyName); break;
				case DMT_SPIKESTAB: CPrintF(TRANS("%s fell into a spike-hole\n"), strMyName); break;
				case DMT_FREEZING:  CPrintF(TRANS("%s has frozen\n"), strMyName); break;
				case DMT_ACID:      CPrintF(TRANS("%s dissolved\n"), strMyName); break;
				case DMT_PROJECTILE:
				case DMT_EXPLOSION:
					CPrintF(TRANS("%s was blown away\n"), strMyName); break;
				default:            CPrintF(TRANS("%s has committed suicide\n"), strMyName);
				}
			}
			// if killed by an enemy
		} else if( IsDerivedFromClass( penKiller, &CEnemyBase_DLLClass)) {
			// check for telefrag first
			if(ePLDeath.dmtType==DMT_TELEPORT) {
				CPrintF(TRANS("%s was telefragged\n"), strMyName);
				return;
			}
			
			// describe how this enemy killed player - conversion to eDeath is done to reduce changes to existing code
			EDeath eDeath;
			eDeath.eLastDamage.penInflictor = (CEntity*) ePLDeath.eidInflictor;
			eDeath.eLastDamage.vDirection   = ePLDeath.vDirection;
			eDeath.eLastDamage.vHitPoint    = ePLDeath.vHitPoint;
			eDeath.eLastDamage.fAmount      = ePLDeath.fAmount;
			eDeath.eLastDamage.dmtType      = ePLDeath.dmtType;
			CPrintF("%s\n", (const char*)((CEnemyBase*)penKiller)->GetPlayerKillDescription(strMyName, eDeath));
			
			// if killed by some other entity
		} else {
			// make message from damage type
			switch(ePLDeath.dmtType) {
			case DMT_SPIKESTAB: CPrintF(TRANS("%s was pierced\n"), strMyName); break;
			case DMT_BRUSH:     CPrintF(TRANS("%s was squashed\n"), strMyName); break;
			case DMT_ABYSS:     CPrintF(TRANS("%s went over the edge\n"), strMyName); break;
			case DMT_IMPACT:    CPrintF(TRANS("%s swashed\n"), strMyName); break;
			case DMT_HEAT:      CPrintF(TRANS("%s stood in the sun for too long\n"), strMyName); break;
			default:            CPrintF(TRANS("%s passed away\n"), strMyName);
			}
		}
		// if no entity pointer (shouldn't happen)
	} else {
		CPrintF(TRANS("%s is missing in action\n"), strMyName);
	}
}
*/

//안태훈 수정 시작	//(Open beta)(2004-12-08)
void ShotMissile(CEntity *penShoter, const char *szShotPosTagName
				 , CEntity *penTarget, FLOAT fMoveSpeed
				 , const char *szHitEffectName, const char *szArrowEffectName
				 , bool bCritical
				 , FLOAT fHorizonalOffset = 0.0f, FLOAT fVerticalOffset = 0.0f	//-1.0f ~ 1.0f
				 , INDEX iArrowType = 0, const char *szMissileModel = NULL);
void ShotMagicContinued(CEntity *penShoter, FLOAT3D vStartPos, FLOATquat3D qStartRot
				 , CEntity *penTarget, FLOAT fMoveSpeed
				 , const char *szHitEffectName, const char *szMagicEffectName
				 , bool bCritical, INDEX iOrbitType, BOOL bDirectTag = FALSE);
void ShotGoWaitBack(CEntity *penShoter, FLOAT3D vStartPos, FLOATquat3D qStartRot
				 , CEntity *penTarget, FLOAT fMoveSpeed, FLOAT fWaitTime
				 , const char *szHitEffectName, const char *szMoveEffectName
				 , bool bCritical
				 , FLOAT fHorizonalOffset = 0.0f, FLOAT fVerticalOffset = 0.0f	//-1.0f ~ 1.0f
				 );
void ShotConnect(CEntity *penShoter, CEntity *penTarget, FLOAT fWaitTime
				 , const char *szHitEffectName, const char *szConnectEffectName);
//안태훈 수정 끝	//(Open beta)(2004-12-08)
/*
void ShotFallDown(FLOAT3D vStartPos, FLOAT3D vToTargetDir, FLOAT fMoveSpeed
				 , const char *szHitEffectName, const char *szFallObjEffectName
				 , bool bCritical);
*/
extern void GetTargetDirection(CEntity *penMe, CEntity *penTarget, FLOAT3D &vTargetPos, FLOAT3D &vDirection);

void CPlayer::SetDefaultProperties(void) {
  m_strName = "<unnamed player>";
  m_ulLastButtons = 0x0;
  m_fArmor = 0.0f;
  m_strGroup = "";
  m_ulKeys = 0;
  m_fMaxHealth = 1;
  m_ulFlags = 0;
  m_penWeapons = NULL;
  m_penAnimator = NULL;
  m_penView = NULL;
  m_pen3rdPersonView = NULL;
  m_iViewState = PVT_PLAYEREYES ;
  m_iLastViewState = PVT_PLAYEREYES ;
  m_aoLightAnimation.SetData(NULL);

  m_fDamageAmmount = 0.0f;
  m_tmWoundedTime = 0.0f;
  m_iGender = GENDER_MALE ;
  m_pstState = PST_STAND ;
  m_fFallTime = 0.0f;
  m_fSwimTime = 0.0f;
  m_tmOutOfWater = 0.0f;
  m_tmMoveSound = 0.0f;
  m_bMoveSoundLeft = TRUE ;
  m_tmNextAmbientOnce = 0.0f;
  m_tmMouthSoundLast = 0.0f;
  m_penCamera = NULL;
  m_strCenterMessage = "";
  m_tmCenterMessageEnd = 0.0f;
  m_bPendingMessage = FALSE ;
  m_tmMessagePlay = 0.0f;
  m_tmAnalyseEnd = 0.0f;
  m_bComputerInvoked = FALSE ;
  m_tmAnimateInbox = -100.0f;
  m_penMainMusicHolder = NULL;
  m_tmLastDamage = -1.0f;
  m_fMaxDamageAmmount = 0.0f;
  m_vDamage = FLOAT3D(0 , 0 , 0);
  m_tmSpraySpawned = -1.0f;
  m_fSprayDamage = 0.0f;
  m_penSpray = NULL;
  m_soWeapon0.SetOwner(this);
m_soWeapon0.Stop(FALSE);
  m_soWeapon1.SetOwner(this);
m_soWeapon1.Stop(FALSE);
  m_soWeapon2.SetOwner(this);
m_soWeapon2.Stop(FALSE);
  m_soWeapon3.SetOwner(this);
m_soWeapon3.Stop(FALSE);
  m_soWeaponAmbient.SetOwner(this);
m_soWeaponAmbient.Stop(FALSE);
  m_soPowerUpBeep.SetOwner(this);
m_soPowerUpBeep.Stop(FALSE);
  m_soMouth.SetOwner(this);
m_soMouth.Stop(FALSE);
  m_soFootL.SetOwner(this);
m_soFootL.Stop(FALSE);
  m_soFootR.SetOwner(this);
m_soFootR.Stop(FALSE);
  m_soBody.SetOwner(this);
m_soBody.Stop(FALSE);
  m_soLocalAmbientLoop.SetOwner(this);
m_soLocalAmbientLoop.Stop(FALSE);
  m_soLocalAmbientOnce.SetOwner(this);
m_soLocalAmbientOnce.Stop(FALSE);
  m_soMessage.SetOwner(this);
m_soMessage.Stop(FALSE);
  m_iHighScore = 0;
  m_iBeatenHighScore = 0;
  m_tmLatency = 0.0f;
  m_tmLatencyLastAvg = 0.0f;
  m_tmLatencyAvgSum = 0.0f;
  m_ctLatencyAvg = 0;
  m_bEndOfLevel = FALSE ;
  m_bEndOfGame = FALSE ;
  m_iMayRespawn = 0;
  m_tmSpawned = 0.0f;
  m_vDied = FLOAT3D(0 , 0 , 0);
  m_aDied = FLOAT3D(0 , 0 , 0);
  m_tmEstTime = 0.0f;
  m_iTimeScore = 0;
  m_iStartTime = 0;
  m_iEndTime = 0;
  m_tmLevelStarted = 0.0f;
  m_strLevelStats = "";
  m_penActionMarker = NULL;
  m_fAutoSpeed = 0.0f;
  m_iAutoOrgWeapon = 0;
  m_vAutoSpeed = FLOAT3D(0 , 0 , 0);
  m_tmSpiritStart = 0.0f;
  m_tmFadeStart = 0.0f;
  m_tmLastPicked = -10000.0f;
  m_strPickedName = "";
  m_fPickedAmmount = 0.0f;
  m_fPickedMana = 0.0f;
  m_vLastStain = FLOAT3D(0 , 0 , 0);
  m_iLastRotationH = 0;
  m_iLastRotationP = 0;
  m_iLastRotationB = 0;
  m_iLastViewRotationH = 0;
  m_iLastViewRotationP = 0;
  m_iLastViewRotationB = 0;
  m_vLastTranslation = FLOAT3D(0 , 0 , 0);
  m_aLocalRotation = FLOAT3D(0 , 0 , 0);
  m_aLocalViewRotation = FLOAT3D(0 , 0 , 0);
  m_vLocalTranslation = FLOAT3D(0 , 0 , 0);
  m_tmInvisibility = 0.0f;
  m_tmInvulnerability = 0.0f;
  m_tmSeriousDamage = 0.0f;
  m_tmSeriousSpeed = 0.0f;
  m_tmInvisibilityMax = 30.0f;
  m_tmInvulnerabilityMax = 30.0f;
  m_tmSeriousDamageMax = 40.0f;
  m_tmSeriousSpeedMax = 20.0f;
  m_tmChainShakeEnd = 0.0f;
  m_fChainShakeStrength = 1.0f;
  m_fChainShakeFreqMod = 1.0f;
  m_fChainsawShakeDX = 0.0f;
  m_fChainsawShakeDY = 0.0f;
  m_iWeaponsID = -1;
  m_iAnimatorID = -1;
  m_bInitializeOverNet = TRUE ;
  m_bDontLerpView = FALSE ;
  m_bMdl = FALSE ;
  m_LocCurrent = FLOAT3D(0 , 0 , 0);
  m_LocDesired = FLOAT3D(0 , 0 , 0);
  m_tmSpawnedForInv = -99.0f;
  m_bIsMove = FALSE ;
  m_bStartAttack = FALSE ;
  m_vDesiredPosition = FLOAT3D(0 , 0 , 0);
  m_aRotateSpeed = AngleDeg(1800.0f);
  m_fMoveSpeed = 5.0f;
  m_fMoveFrequency = 0.25f;
  m_bMoving = FALSE ;
  m_fBurnPower = 1.0f;
  m_fBurnRatio = 1.0f;
  m_fBurnTime = 0.5f;
  m_fBurnFadeInTime = 0.2f;
  m_fBurnFadeOutTime = 0.2f;
  m_penAttackingEnemy = NULL;
  m_bLockMove = FALSE ;
  m_bReserveMove = FALSE ;
  m_bForward = FALSE ;
  m_nDesiredSkillNum = -1;
  m_bReserveSkill = FALSE ;
  m_bSkilling = FALSE ;
  m_nCurrentSkillNum = -1;
  m_nReservedSkillNum = -1;
  m_fSkillDistance = 15.0f;
  m_idCurrentSkillAnim = -1;
  m_tmSkillStartTime = 0.0f;
  m_tmSkillAnimTime = 0.0f;
  m_fSkillAnimTime = 0.0f;
  m_bWaitForSkillTarget = FALSE ;
  m_aHeadingRotation = 0.0f;
  m_nPreDesiredSkillNum = -1;
  m_bWaitForSkillResponse = FALSE ;
  m_fCameraAngle = 0.0f;
  m_bPlayAction = FALSE ;
  m_nPlayActionNum = -1;
  m_penWillDeathMob = NULL;
  m_bReservedCancel = FALSE ;
  m_bNotRenderParticles = FALSE ;
  m_bRcvAtMsg = FALSE ;
  m_bCriticalDamage = FALSE ;
  m_bReadySendSkillMessage = TRUE ;
  m_idCurrentActionAnim = -1;
  m_nCurrentActionNum = -1;
  m_nDesiredActionNum = -1;
  m_bAction = FALSE ;
  m_nActionSit = 0;
  m_fnMusic = CTFILENAME("data\\sounds\\BGM\\Another_Ballad.ogg");
  m_fVolume = 10.0f;
  m_mtType = MT_LIGHT ;
  m_bFieldArea = FALSE ;
  m_bDying = FALSE ;
  m_bLockSkillCancel = FALSE ;
  m_bProduction = FALSE ;
  m_nProductionNum = -1;
  m_bEnvironmentSound = FALSE ;
  m_bStartPostSkill = TRUE ;
  m_bRunningMode = TRUE ;
  m_iSkillEffectStep = 0;
  m_bCriticalDamageMe = FALSE ;
  m_tmSendSkillMessage = 0.0f;
  m_bSpeedUp = FALSE ;
  m_bSendStopMessage = TRUE ;
  m_vMyPositionTmp = FLOAT3D(0.0f , 0.0f , 0.0f);
  m_bMobChange = FALSE ;
  m_nLegit = FALSE ;
  m_bStuned = FALSE ;
  m_bDisappearWeapon = FALSE ;
  m_bChanging = FALSE ;
  m_nChangeMonsterId = 0;
  m_nProduceItemDBIndex = 0;
  m_bHold = FALSE ;
  m_bCannotUseSkill = FALSE ;
  m_bRide = FALSE ;
  m_iRideType = -1;
  m_bDeathChk = FALSE ;
  m_bIsTransform = FALSE ;
  m_iTransformType = 0;
  m_bTransforming = FALSE ;
  CPlayerEntity::SetDefaultProperties();
}
  
#line 1842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::Precache(void) 
#line 1843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: Precache  ();
#line 1845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::LevelChangePlayerClear(void) 
#line 1848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLastPicked  = - 99.0f;
#line 1851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmInvisibility  = - 99.0f;
#line 1852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmInvulnerability  = - 99.0f;
#line 1853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSeriousDamage  = - 99.0f;
#line 1854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSeriousSpeed  = - 99.0f;
#line 1855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSpawned  = - 99.0f;
#line 1856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_tmLastBreathed  = en_tmEntityTime ;
#line 1858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSpawnedForInv  = - 99.0f;
#line 1860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::OnEnd(void) 
#line 1863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: OnEnd  ();
#line 1865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::HandleEvent(const CEntityEvent & ee) 
#line 1869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ee  . ee_slEvent  == EVENTCODE_EShowConsole ){
#line 1871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> IsServer  ()){
#line 1872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetGameEnd  ();
#line 1873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 1875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(ee  . ee_slEvent  == EVENTCODE_EPlayerStats ){
#line 1876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> IsServer  ()){
#line 1877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerStats  epls  = (EPlayerStats  &) ee ;
#line 1878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * ppl  = (CPlayer  *) _pNetwork  -> ga_srvServer  . srv_apltPlayers  [ epls  . iIndex  ] . plt_penPlayerEntity ;
#line 1879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_srvServer  . srv_apltPlayers  [ epls  . iIndex  ] . IsActive  () && ppl  != NULL ){
#line 1881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ppl  -> m_psGameStats  . ps_iKills  = epls  . iKills ;
#line 1882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ppl  -> m_psGameStats  . ps_iDeaths  = epls  . iDeaths ;
#line 1883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 1886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(ee  . ee_slEvent  == EVENTCODE_EAddBulletSpray ){
#line 1887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> IsServer  ()){
#line 1888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EAddBulletSpray  & eabs  = (EAddBulletSpray  &) ee ;
#line 1889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddBulletSpray  (eabs  . vPos  , eabs  . eptType  , eabs  . vReflected );
#line 1890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 1892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(ee  . ee_slEvent  == EVENTCODE_EAddGoreSpray ){
#line 1893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> IsServer  ()){
#line 1894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EAddGoreSpray  & eags  = (EAddGoreSpray  &) ee ;
#line 1895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 1896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (eags  . iEntityHit  , penEntity )){
#line 1897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vSpillDir  = - en_vGravityDir  * 0.5f;
#line 1898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D boxCutted  = FLOATaabbox3D (FLOAT3D (0 , 0 , 0) , FLOAT3D (1 , 1 , 1));
#line 1899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> GetRenderType  () == RT_MODEL ){
#line 1900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> en_pmoModelObject  -> GetCurrentFrameBBox  (boxCutted );
#line 1901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(penEntity  -> GetRenderType  () == RT_SKAMODEL ){
#line 1902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iColBox  = penEntity  -> GetModelInstance  () -> GetCurrentColisionBoxIndex  ();
#line 1903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ColisionBox  cb  = penEntity  -> GetModelInstance  () -> GetColisionBox  (iColBox );
#line 1904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
boxCutted  = FLOATaabbox3D (cb  . Min  () , cb  . Max  ());
#line 1905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fPower  = 4.0f;
#line 1916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddGoreSpray  (eags  . vPos  , eags  . vHit  , eags  . sptType  , vSpillDir  , boxCutted  , fPower  , eags  . colParticles );
#line 1917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 1920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CPlayerEntity  :: HandleEvent  (ee );
#line 1922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetWeaponAndAnimator() 
#line 1926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iWeaponsID  = m_penWeapons  -> en_ulID ;
#line 1928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iAnimatorID  = m_penAnimator  -> en_ulID ;
#line 1929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  SBYTE CPlayer::GetNetworkType()const 
#line 1934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return MSG_CHAR_PC ;
#line 1936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetRotation(INDEX & iRotPacked,FLOAT fUnpacked) 
#line 1939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iRotPacked  = (UWORD ) (fUnpacked  * 20);
#line 1941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CPlayer::GetRotation(INDEX iRotPacked) 
#line 1944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ((FLOAT) iRotPacked ) / 20;
#line 1946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CPlayer::GetRotationDiff(INDEX iRotPacked,FLOAT fUnpacked) 
#line 1949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UWORD  uwRotPacked2  = (UWORD ) (fUnpacked  * 20);
#line 1951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UWORD  uwDiff  = uwRotPacked2  - ((UWORD ) iRotPacked );
#line 1952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ((FLOAT) ((SWORD ) uwDiff )) / 20;
#line 1953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PlaySound(CSoundObject & so,SLONG idSoundComponent,SLONG slPlayType) 
#line 1956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsReapplyingActions  ()){
#line 1958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: PlaySound  (so  , idSoundComponent  , slPlayType );
#line 1959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PlaySound(CSoundObject & so,const CTFileName & fnmSound,SLONG slPlayType) 
#line 1962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsReapplyingActions  ()){
#line 1964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: PlaySound  (so  , fnmSound  , slPlayType );
#line 1965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 1966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::InitializeFromNet() 
#line 1969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 1970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerInit  ePLInit ;
#line 1971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLInit  . ulWeaponsID  = m_iWeaponsID ;
#line 1972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLInit  . ulAnimatorID  = m_iAnimatorID ;
#line 1973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLInit  . bCreate  = m_bInitializeOverNet ;
#line 1974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Initialize  (ePLInit  , FALSE );
#line 1975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 1977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsActionApplied() {
#line 1978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ((m_ulFlags  & PLF_APPLIEDACTION ) != 0);
#line 1979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetActionApplied() {
#line 1982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_APPLIEDACTION ;
#line 1983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ClearActionApplied() {
#line 1986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_APPLIEDACTION ;
#line 1987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsReapplyingActions() {
#line 1990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ((m_ulFlags  & PLF_REAPPLYINGACTIONS ) != 0);
#line 1991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetReapplyingActions() {
#line 1993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_REAPPLYINGACTIONS ;
#line 1994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ClearReapplyingActions() {
#line 1996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_REAPPLYINGACTIONS ;
#line 1997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::DumpToConsole() 
#line 2000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerWeapons  * penWeapons  = (CPlayerWeapons  *) (CEntity  *) m_penWeapons ;
#line 2002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("Entity ID: %X, Name: %s\n") , en_ulID  , en_pcCharacter  . pc_strName );
#line 2003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   Health: %d, Armor: %d\n") , (INDEX) en_fHealth  , m_fArmor );
#line 2009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   PlayerFlags: 0x%08X\n") , m_ulFlags );
#line 2010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   Available weapons: 0x%X\n") , penWeapons  -> m_iAvailableWeapons );
#line 2013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsFlagOn  (ENF_ALIVE )){
#line 2014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   ENF_ALIVE = TRUE\n"));
#line 2015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 2016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   ENF_ALIVE = FALSE\n"));
#line 2017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   Placement:       x: %6.2f, y: %6.2f, z:%6.2f\n") , en_plPlacement  . pl_PositionVector  (1) 
#line 2020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, en_plPlacement  . pl_PositionVector  (2) , en_plPlacement  . pl_PositionVector  (3));
#line 2021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   Last Placement:  x: %6.2f, y: %6.2f, z:%6.2f\n") , en_plLastPlacement  . pl_PositionVector  (1) 
#line 2022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, en_plLastPlacement  . pl_PositionVector  (2) , en_plLastPlacement  . pl_PositionVector  (3));
#line 2023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   Translation:     x: %6.2f, y: %6.2f, z:%6.2f\n") , en_vCurrentTranslationAbsolute  (1) 
#line 2024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, en_vCurrentTranslationAbsolute  (2) , en_vCurrentTranslationAbsolute  (3));
#line 2025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("   Rotation:        h: %6.2f, p: %6.2f, b:%6.2f\n") , en_aCurrentRotationAbsolute  (1) 
#line 2026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, en_aCurrentRotationAbsolute  (2) , en_aCurrentRotationAbsolute  (3));
#line 2028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(en_RenderType ){
#line 2029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_ILLEGAL : {CPrintF  (TRANS  ("   RenderType: RT_ILLEGAL\n"));break ;}
#line 2030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_NONE : {CPrintF  (TRANS  ("   RenderType: RT_NONE\n"));break ;}
#line 2031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_MODEL : {CPrintF  (TRANS  ("   RenderType: RT_MODEL\n"));break ;}
#line 2032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_BRUSH : {CPrintF  (TRANS  ("   RenderType: RT_BRUSH\n"));break ;}
#line 2033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_EDITORMODEL : {CPrintF  (TRANS  ("   RenderType: RT_EDITORMODEL\n"));break ;}
#line 2034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_VOID : {CPrintF  (TRANS  ("   RenderType: RT_VOID\n"));break ;}
#line 2035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_FIELDBRUSH : {CPrintF  (TRANS  ("   RenderType: RT_FIELDBRUSH\n"));break ;}
#line 2036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_SKAMODEL : {CPrintF  (TRANS  ("   RenderType: RT_SKAMODEL\n"));break ;}
#line 2037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_SKAEDITORMODEL : {CPrintF  (TRANS  ("   RenderType: RT_SKAEDITORMODEL\n"));break ;}
#line 2038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case RT_TERRAIN : {CPrintF  (TRANS  ("   RenderType: RT_TERRAIN\n"));break ;}
#line 2039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
};
#line 2040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ProcessProduce(SBYTE sbChaType,SLONG slChaIndex,SBYTE sbTargetType,SLONG slTargetIndex,SLONG slTargetHP) 
#line 2043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbTargetType  != MSG_CHAR_NPC )
#line 2045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 2050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penCharacter  = NULL ;
#line 2052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (slTargetIndex  , sbTargetType  , penTargetEntity ))
#line 2053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slTargetHP  <= 0)
#line 2055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> DeathNow  ();
#line 2058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . index  == slChaIndex )
#line 2059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsProduct  ())
#line 2064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelProduct  ();
#line 2066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_pNetwork  -> SearchEntityByNetworkID  (slChaIndex  , sbChaType  , penCharacter ))
#line 2069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penCharacter ) -> m_nPlayProduceNum  = - 1;
#line 2071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 2077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::UpdateUnitInfo(CEntity * pEntity,INDEX iTargetID,SLONG lTargetHP) 
#line 2078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  == NULL ){return ;}
#line 2081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_PET ))
#line 2082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _PetTargetInfo  . fHealth  = lTargetHP ;
#line 2084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(pEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ))
#line 2085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _PetTargetInfo  . fHealth  = lTargetHP ;
#line 2087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 2090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = UI_SUMMON_START ;i  <= UI_SUMMON_END ;++ i )
#line 2092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUISummon  * pUISummon  = (CUISummon  *) _pUIMgr  -> GetUI  (i );
#line 2094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pUISummon  -> GetSummonEntity  () && pUISummon  -> GetSummonIndex  () == iTargetID )
#line 2095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _SlaveTargetInfo  [ i  - UI_SUMMON_START  ] . fHealth  = lTargetHP ;
#line 2097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  CModelInstance * CPlayer::GetPlayerModelInstance(CEntity * pEntity) 
#line 2103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity )
#line 2105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  -> IsPlayer  ())
#line 2107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return GetCurrentPlayerModelInstance  ();
#line 2109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pEntity  -> IsCharacter  ())
#line 2111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ((CCharacter  *) pEntity ) -> GetCurrentPlayerModelInstance  ();
#line 2113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return NULL ;
#line 2116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 2119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * CPlayer::GetCurrentPlayerModelInstance() 
#line 2120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = NULL ;
#line 2122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bPetRide )
#line 2123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMITemp  = GetModelInstance  ();
#line 2126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ctmi  = pMITemp  -> mi_cmiChildren  . Count  ();
#line 2127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ctmi  > 0)
#line 2128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  = & pMITemp  -> mi_cmiChildren  [ 0 ];
#line 2130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  = GetModelInstance  ();
#line 2134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  = GetModelInstance  ();
#line 2139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return pMI ;
#line 2141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::EvocationStart(LONG lIndex,SBYTE sbType) 
#line 2144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(lIndex  == _pNetwork  -> MyCharacterInfo  . index )
#line 2146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbEvocationType  = sbType  - 1;
#line 2148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iTransformType  = sbType ;
#line 2149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  = TRUE ;
#line 2150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bIsTransform  = FALSE ;
#line 2151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  chaID  = _pNetwork  -> SearchClientChaIndex  (lIndex );
#line 2155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chaID  != - 1)
#line 2156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 2158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (chaID  , penEntity ))
#line 2159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_bIsTransform  = FALSE ;
#line 2161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_iTransformType  = sbType ;
#line 2162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> EvocateNow  ();
#line 2163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::EvocationStop(LONG lIndex) 
#line 2168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(lIndex  == _pNetwork  -> MyCharacterInfo  . index )
#line 2170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbEvocationType  = - 1;
#line 2172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iTransformType  = 0;
#line 2173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iStopTransformItem  = 522;
#line 2174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  = TRUE ;
#line 2175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> DelFromNoticeList  (iStopTransformItem  , NOTICE_TRANSFORM );
#line 2176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> RefreshNoticeList  ();
#line 2177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  chaID  = _pNetwork  -> SearchClientChaIndex  (lIndex );
#line 2181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chaID  != - 1)
#line 2182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 2184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (chaID  , penEntity ))
#line 2185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_iTransformType  = 0;
#line 2187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> EvocateNow  ();
#line 2188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::Read_net_Mob(int index,CNetworkMessage * istr) 
#line 2194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDesiredPosition ;
#line 2196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D DummyAngle ;
#line 2197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 2198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ipl ;
#line 2200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(index )
#line 2201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHAR_STATUS : 
#line 2204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  mob_index  , mob_ClientId  , state  , state2 ;
#line 2206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  hp  , maxhp  , mp  , maxmp ;
#line 2207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  pkPenalty ;
#line 2208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  pktitle ;
#line 2210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> mob_index  
#line 2211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> hp  
#line 2212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> maxhp  
#line 2213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> mp  
#line 2214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> maxmp  
#line 2215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> pkPenalty  
#line 2216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> pktitle  
#line 2217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> state  
#line 2218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> state2 ;
#line 2220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mob_ClientId  = - 1;
#line 2221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobTarget  * pMT  = NULL ;
#line 2222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_amtMob  . Count  ();++ ipl )
#line 2223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobTarget  & mt  = _pNetwork  -> ga_srvServer  . srv_amtMob  [ ipl  ];
#line 2225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mt  . mob_Index  == mob_index )
#line 2226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mob_ClientId  = mt  . mob_iClientIndex ;
#line 2228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMT  = & mt ;
#line 2231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mt  . mob_iType  == MOB_XMAS_TREE_CENTER  || mt  . mob_iType  == MOB_XMAS_TREE_DECO )
#line 2232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetFlowerTree  () -> SetMobFlowerTree  (mt );
#line 2234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetFlowerTree  () -> FlowerTreeUpdate  (hp );
#line 2235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mob_ClientId  != - 1)
#line 2240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (mob_ClientId  , penEntity ))
#line 2242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penEntity )) -> m_nMaxiHealth  = maxhp ;
#line 2244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penEntity )) -> m_nCurrentHealth  = hp ;
#line 2245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> UpdateTargetInfo  (maxhp  , hp );
#line 2248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> en_pmiModelInstance  && pMT  != NULL )
#line 2253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMT  -> ChangeStatus  (& penEntity  -> en_pmiModelInstance  -> m_tmSkaTagManager  , state );
#line 2256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMT  -> mob_statusEffect  . IsSturn  () 
#line 2257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| pMT  -> mob_statusEffect  . IsState  (EST_ASSIST_STONE ) 
#line 2258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| pMT  -> mob_statusEffect  . IsState  (EST_ASSIST_SLEEP ) 
#line 2259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| pMT  -> mob_statusEffect  . IsState  (EST_ASSIST_BLIND ))
#line 2260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_bStuned  = TRUE ;
#line 2262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {((CUnit  *) penEntity ) -> m_bStuned  = FALSE ;}
#line 2264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMT  -> mob_statusEffect  . IsHold  ())
#line 2265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_bHold  = TRUE ;
#line 2267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {((CUnit  *) penEntity ) -> m_bHold  = FALSE ;}
#line 2269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMT  -> mob_statusEffect  . IsState  (EST_ASSIST_SILENT )){((CUnit  *) penEntity ) -> m_bCannotUseSkill  = TRUE ;}
#line 2270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {((CUnit  *) penEntity ) -> m_bCannotUseSkill  = FALSE ;}
#line 2271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERTALWAYS  ("Mob must have ska model and tag manager.");
#line 2275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_MOVE : 
#line 2285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  movetype ;
#line 2287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  index ;
#line 2288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT speed ;
#line 2289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT x ;
#line 2290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT z ;
#line 2291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT h ;
#line 2292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT r ;
#line 2293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  yLayer ;
#line 2294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  sbAttributePos ;
#line 2295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> movetype ;
#line 2296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> index ;
#line 2297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> speed ;
#line 2298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> x ;
#line 2299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> z ;
#line 2300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> h ;
#line 2301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> r ;
#line 2302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> yLayer ;
#line 2303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> sbAttributePos ;
#line 2305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (1) = x ;
#line 2306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (2) = h  + 1;
#line 2307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (3) = z ;
#line 2309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_amtMob  . Count  ();ipl  ++)
#line 2310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobTarget  & mt  = _pNetwork  -> ga_srvServer  . srv_amtMob  [ ipl  ];
#line 2312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mt  . mob_Index  == index )
#line 2313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (mt  . mob_iClientIndex  , penEntity ))
#line 2315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mt  . SetyLayer  (yLayer );
#line 2317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  != ATTC_UNWALKABLE )
#line 2318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2319 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mt  . mob_sbAttributePos  = sbAttributePos ;
#line 2320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_vDesiredPosition  = vDesiredPosition ;
#line 2323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(movetype  == MSG_MOVE_RUN  || movetype  == MSG_MOVE_WALK )
#line 2324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(speed  < 0)
#line 2328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
speed  = 0.1f;
#line 2330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = speed ;
#line 2335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_bSingleMode )
#line 2336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fWalkSpeed  = speed ;
#line 2338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = speed ;
#line 2339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fCloseRunSpeed  = speed ;
#line 2340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fAttackRunSpeed  = speed ;
#line 2341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(movetype  == MSG_MOVE_STOP )
#line 2344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = 5.0f;
#line 2346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> StopandTeleport  ();
#line 2347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> MoveNow  ();
#line 2350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  : 
#line 2358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::Read_net_Pet(int index,CNetworkMessage * istr) 
#line 2363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDesiredPosition ;
#line 2365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 2366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 2368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(index )
#line 2369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHAR_STATUS : 
#line 2371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_MOVE : 
#line 2376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  movetype ;
#line 2378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  index ;
#line 2379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT speed ;
#line 2380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT x ;
#line 2381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT z ;
#line 2382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT h ;
#line 2383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT r ;
#line 2384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  yLayer ;
#line 2385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  sbAttributePos ;
#line 2386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> movetype ;
#line 2387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> index ;
#line 2388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> speed ;
#line 2389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> x ;
#line 2390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> z ;
#line 2391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> h ;
#line 2392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> r ;
#line 2393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> yLayer ;
#line 2394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> sbAttributePos ;
#line 2396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (1) = x ;
#line 2397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (2) = h  + 1;
#line 2398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (3) = z ;
#line 2402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(index  != _pNetwork  -> _PetTargetInfo  . lIndex )
#line 2403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actPet  . Count  ();ipl  ++)
#line 2405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPetTarget  & pt  = _pNetwork  -> ga_srvServer  . srv_actPet  [ ipl  ];
#line 2408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pt  . pet_Index  == index )
#line 2409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (pt  . pet_iClientIndex  , penEntity ))
#line 2411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . SetyLayer  (yLayer );
#line 2413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  != ATTC_UNWALKABLE )
#line 2414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_sbAttributePos  = sbAttributePos ;
#line 2416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_iCountry  == KOREA )
#line 2420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_WAR )
#line 2422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_PEACE  || sbAttributePos  == ATTC_WAR )
#line 2444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_vDesiredPosition  = vDesiredPosition ;
#line 2465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(movetype  == MSG_MOVE_RUN  || movetype  == MSG_MOVE_WALK )
#line 2466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(speed  < 0)
#line 2470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
speed  = 0.1f;
#line 2472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = speed ;
#line 2475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fWalkSpeed  = speed ;
#line 2476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fCloseRunSpeed  = speed ;
#line 2477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fAttackRunSpeed  = speed ;
#line 2479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(movetype  == MSG_MOVE_STOP )
#line 2481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = 5.0f;
#line 2483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> StopandTeleport  ();
#line 2484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> MoveNow  ();
#line 2486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(index  == _pNetwork  -> _PetTargetInfo  . lIndex )
#line 2493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _PetTargetInfo  . pen_pEntity )
#line 2495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_iCountry  == KOREA )
#line 2498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_WAR )
#line 2500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _PetTargetInfo  . pen_pEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _PetTargetInfo  . pen_pEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_PEACE  || sbAttributePos  == ATTC_WAR )
#line 2521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _PetTargetInfo  . pen_pEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2536 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _PetTargetInfo  . pen_pEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_EX_PET_COMMAND : 
#line 2546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
LONG  lPetIndex ;
#line 2548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
LONG  lCommandSkillIndex ;
#line 2549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbTargetType ;
#line 2550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
LONG  lTargetIndex ;
#line 2552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> lPetIndex ;
#line 2553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> lCommandSkillIndex ;
#line 2554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> sbTargetType ;
#line 2555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> lTargetIndex ;
#line 2557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 2558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (lPetIndex  , MSG_CHAR_PET  , penEntity ))
#line 2559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nPlayActionNum  = (SLONG ) lCommandSkillIndex ;
#line 2561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(lPetIndex  != _pNetwork  -> _PetTargetInfo  . lIndex )
#line 2562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> ActionNow  ();
#line 2566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & rSkillData  = _pNetwork  -> GetSkillData  (lCommandSkillIndex );
#line 2567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PetStartEffectGroup  (rSkillData  . GetFireEffect1  (0) , lPetIndex );
#line 2568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::Read_net_WildPet(int index,CNetworkMessage * istr) 
#line 2575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDesiredPosition ;
#line 2577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 2578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 2580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(index )
#line 2581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_SUB_STAT : 
#line 2583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_MOVE : 
#line 2590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  movetype ;
#line 2592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  index ;
#line 2593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT speed ;
#line 2594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT x ;
#line 2595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT z ;
#line 2596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT h ;
#line 2597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT r ;
#line 2598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  yLayer ;
#line 2599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  sbAttributePos ;
#line 2600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> movetype ;
#line 2601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> index ;
#line 2602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> speed ;
#line 2603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> x ;
#line 2604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> z ;
#line 2605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> h ;
#line 2606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> r ;
#line 2607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> yLayer ;
#line 2608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> sbAttributePos ;
#line 2610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (1) = x ;
#line 2611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (2) = h  + 1;
#line 2612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (3) = z ;
#line 2616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actWildPet  . Count  ();ipl  ++)
#line 2617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CWildPetInfo  & pt  = _pNetwork  -> ga_srvServer  . srv_actWildPet  [ ipl  ];
#line 2620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pt  . m_nNetIndex  == index  && pt  . m_nOwnerIndex  != _pNetwork  -> MyCharacterInfo  . index )
#line 2621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (pt  . pet_iClientIndex  , penEntity ))
#line 2623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . m_sbYlayer  = yLayer ;
#line 2625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  != ATTC_UNWALKABLE )
#line 2626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . m_sbAttributePos  = sbAttributePos ;
#line 2628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_iCountry  == KOREA  || g_iCountry  == USA )
#line 2632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_WAR )
#line 2634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_PEACE  || sbAttributePos  == ATTC_WAR )
#line 2655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_vDesiredPosition  = vDesiredPosition ;
#line 2675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(movetype  == MSG_MOVE_RUN  || movetype  == MSG_MOVE_WALK )
#line 2676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(speed  < 0)
#line 2680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
speed  = 0.1f;
#line 2682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fMoveSpeed  = speed ;
#line 2685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fWalkSpeed  = speed ;
#line 2686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fCloseRunSpeed  = speed ;
#line 2687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fAttackRunSpeed  = speed ;
#line 2689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(movetype  == MSG_MOVE_STOP )
#line 2691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fMoveSpeed  = 5.0f;
#line 2693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> StopandTeleport  ();
#line 2694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> MoveNow  ();
#line 2696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(pt  . m_nNetIndex  == index  && pt  . m_nOwnerIndex  == _pNetwork  -> MyCharacterInfo  . index )
#line 2698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(speed  < 0)
#line 2700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
speed  = 0.1f;
#line 2702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fMoveSpeed  = speed ;
#line 2705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fWalkSpeed  = speed ;
#line 2706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fCloseRunSpeed  = speed ;
#line 2707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) pt  . pet_pEntity ) -> m_fAttackRunSpeed  = speed ;
#line 2709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_iCountry  == KOREA  || g_iCountry  == USA )
#line 2710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_WAR )
#line 2712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_PEACE  || sbAttributePos  == ATTC_WAR )
#line 2733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 2736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 2738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 2741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 2743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 2745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pt  . pet_pEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 2749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::Read_net_Damage(SBYTE sbType,CNetworkMessage * istr) 
#line 2762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  attackID ;
#line 2764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  damageType ;
#line 2765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  skillIndex ;
#line 2766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  targetType ;
#line 2767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  targetID ;
#line 2768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetHP ;
#line 2769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetMP ;
#line 2770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetDamage ;
#line 2771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  targetFlag ;
#line 2772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  attackSpeed ;
#line 2774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackID ;
#line 2775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> damageType ;
#line 2776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> skillIndex ;
#line 2777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetType ;
#line 2778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetID ;
#line 2779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetHP ;
#line 2780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetMP ;
#line 2781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetDamage ;
#line 2782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackSpeed ;
#line 2783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetFlag ;
#line 2785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 2787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (attackID  , sbType  , penEntity ))
#line 2788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbType  == MSG_CHAR_NPC  && targetType  == MSG_CHAR_NPC  && _pNetwork  -> m_bSingleMode )
#line 2791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strMobName  = penEntity  -> GetName  ();
#line 2794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 2796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 2798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 2799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(targetFlag )
#line 2801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_MISS : 
#line 2803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (677 , "구출 NPC가 공격을 회피했습니다."));
#line 2804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 2805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_WEAK : 
#line 2807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (678 , "구출 NPC가 약한 공격을 받았습니다. "));
#line 2808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 2809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_NORMAL : 
#line 2811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (679 , "구출 NPC가 일반 공격을 받았습니다."));
#line 2812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 2813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_STRONG : 
#line 2815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (680 , "구출 NPC가 강한 공격을 받았습니다."));
#line 2816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 2817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_HARD : 
#line 2819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (681 , "구출 NPC가 매우 강한 공격을 받았습니다."));
#line 2820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 2821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_CRITICAL : 
#line 2823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (682 , "구출 NPC가 크리티컬 공격을 받았습니다."));
#line 2824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 2825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_DEADLY : 
#line 2827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (683 , "구출 NPC가 데들리 공격을 받았습니다."));
#line 2828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 2829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 2830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (706 , "구출 NPC의 현재 HP : %d") , targetHP );
#line 2833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage );
#line 2834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> UpdateRescueNPC  (penTargetEntity  , targetHP  , targetMP );
#line 2835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penTargetEntity )) -> m_nPreHealth  = targetHP ;
#line 2836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_PC )
#line 2842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . index  == targetID )
#line 2844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , en_ulID  , TRUE );
#line 2848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowDamageResult  (penEntity  , targetDamage  , targetFlag  , skillIndex );
#line 2851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bProduction )
#line 2852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelProduct  ();
#line 2854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AppearWearingWeapon  ();
#line 2855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . hp  = targetHP ;
#line 2859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPlayerInfo  () -> UpdateHPInfo  ();
#line 2861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _WildPetInfo  . pet_pEntity  != NULL )
#line 2862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) _pNetwork  -> _WildPetInfo  . pet_pEntity ) -> SetEnemyEntity  (penEntity  , 0);
#line 2864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0 && ! m_bDying )
#line 2867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeathYou  ();
#line 2869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 2872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (this );
#line 2875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((skillIndex  == - 1) && (damageType  != MSG_DAMAGE_COMBO ))
#line 2876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> AttackNow  ();
#line 2878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(damageType  == MSG_DAMAGE_COMBO )
#line 2880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ShowDamage  (en_ulID );
#line 2882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 2890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 2891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bShowDamage  = FALSE ;
#line 2896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 2897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , FALSE );
#line 2900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bShowDamage  = TRUE ;
#line 2902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 2903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("소환수의 스킬 공격 [%d]타겟에게 : %ld의 데미지를 줌\n" , targetID  , targetDamage );
#line 2905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("소환수가 [%d]타겟에게 : %ld의 데미지를 줌\n" , targetID  , targetDamage );
#line 2909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 2914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bShowDamage  = TRUE ;
#line 2916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , TRUE );
#line 2917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ))
#line 2920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , FALSE );
#line 2923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowAttackResult  (penTargetEntity  , (SLONG ) targetDamage  , targetFlag  , skillIndex );
#line 2924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ShowDamage  (penTargetEntity  -> en_ulID );
#line 2926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ))
#line 2929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _WildPetInfo  . pet_pEntity  != NULL )
#line 2931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) _pNetwork  -> _WildPetInfo  . pet_pEntity ) -> SetEnemyEntity  (penEntity  , 1);
#line 2933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , TRUE );
#line 2936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowAttackResult  (penTargetEntity  , (SLONG ) targetDamage  , targetFlag  , skillIndex );
#line 2937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ShowDamage  (penTargetEntity  -> en_ulID );
#line 2938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ((CUnit  *) penEntity ) -> m_bSkilling  && skillIndex  == - 1 && (damageType  != MSG_DAMAGE_COMBO ))
#line 2941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (penTargetEntity );
#line 2943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetAttackSpeed  (attackSpeed );
#line 2944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> AttackNow  ();
#line 2945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 2948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> m_nCurrentHealth  = targetHP ;
#line 2955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bShowDamage )
#line 2956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ShowDamage  (penTargetEntity  -> en_ulID );
#line 2958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_PET ))
#line 2963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CNetworkLibrary  :: sPetInfo  TempPet ;
#line 2965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TempPet  . lIndex  = targetID ;
#line 2966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
std  :: vector  < CNetworkLibrary  :: sPetInfo  > :: iterator  iter  = 
#line 2967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
std  :: find_if  (_pNetwork  -> m_vectorPetList  . begin  () , _pNetwork  -> m_vectorPetList  . end  () , CNetworkLibrary  :: FindPet  (TempPet ));
#line 2968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iter  != _pNetwork  -> m_vectorPetList  . end  ())
#line 2969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* iter ) . lHP  = targetHP ;
#line 2971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPetInfo  () -> GetPetDesc  ();
#line 2972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> m_nPreHealth  = targetHP ;
#line 2977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 2978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_bKillEnemy  = TRUE ;
#line 2980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetKillTargetEntity  (penTargetEntity );
#line 2981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> DeathNow  ();
#line 2982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateUnitInfo  (penTargetEntity  , targetID  , targetHP );
#line 2986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_PC )
#line 2993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetID  == _pNetwork  -> MyCharacterInfo  . index )
#line 2996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 2997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 2998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 2999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 3003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 3004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 3007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , TRUE );
#line 3010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ))
#line 3012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , TRUE );
#line 3015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> m_nCurrentHealth  = targetHP ;
#line 3019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 3020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> DeathNow  ();
#line 3022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateUnitInfo  (penTargetEntity  , targetID  , targetHP );
#line 3025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 3026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
#ifdef SORCERER_SUMMON_VILLAGE_VISIBLE_NA_20081008
#line 3170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
#endif
  void CPlayer::Read_net_Summon(int index,CNetworkMessage * istr) 
#line 3030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDesiredPosition ;
#line 3032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 3033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 3035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(index )
#line 3036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHAR_STATUS : 
#line 3039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  index  , clientid  , state  , state2 ;
#line 3041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  hp  , maxhp  , mp  , maxmp ;
#line 3042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  pkPenalty ;
#line 3043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  pktitle ;
#line 3045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> index  
#line 3046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> hp  
#line 3047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> maxhp  
#line 3048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> mp  
#line 3049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> maxmp  
#line 3050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> pkPenalty  
#line 3051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> pktitle  
#line 3052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> state  
#line 3053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> state2 ;
#line 3055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
clientid  = - 1;
#line 3056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSlaveTarget  * pMT  = NULL ;
#line 3057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actSlave  . Count  ();++ ipl )
#line 3058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSlaveTarget  & st  = _pNetwork  -> ga_srvServer  . srv_actSlave  [ ipl  ];
#line 3060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(st  . slave_Index  == index )
#line 3061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
clientid  = st  . slave_iClientIndex ;
#line 3063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMT  = & st ;
#line 3064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(clientid  != - 1)
#line 3068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (clientid  , penEntity ))
#line 3070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penEntity )) -> m_nMaxiHealth  = maxhp ;
#line 3072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penEntity )) -> m_nCurrentHealth  = hp ;
#line 3073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 3074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> UpdateTargetInfo  (maxhp  , hp );
#line 3076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> en_pmiModelInstance  && pMT  != NULL )
#line 3081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMT  -> ChangeStatus  (& penEntity  -> en_pmiModelInstance  -> m_tmSkaTagManager  , state );
#line 3084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMT  -> slave_statusEffect  . IsSturn  () 
#line 3085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| pMT  -> slave_statusEffect  . IsState  (EST_ASSIST_STONE ) 
#line 3086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| pMT  -> slave_statusEffect  . IsState  (EST_ASSIST_SLEEP ) 
#line 3087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| pMT  -> slave_statusEffect  . IsState  (EST_ASSIST_BLIND ))
#line 3088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_bStuned  = TRUE ;
#line 3090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {((CUnit  *) penEntity ) -> m_bStuned  = FALSE ;}
#line 3092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMT  -> slave_statusEffect  . IsHold  ())
#line 3093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_bHold  = TRUE ;
#line 3095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {((CUnit  *) penEntity ) -> m_bHold  = FALSE ;}
#line 3097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMT  -> slave_statusEffect  . IsState  (EST_ASSIST_SILENT )){((CUnit  *) penEntity ) -> m_bCannotUseSkill  = TRUE ;}
#line 3098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {((CUnit  *) penEntity ) -> m_bCannotUseSkill  = FALSE ;}
#line 3099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERTALWAYS  ("Mob must have ska model and tag manager.");
#line 3103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_MOVE : 
#line 3112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  movetype ;
#line 3114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  index ;
#line 3115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT speed ;
#line 3116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT x ;
#line 3117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT z ;
#line 3118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT h ;
#line 3119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT r ;
#line 3120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  yLayer ;
#line 3121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  sbAttributePos ;
#line 3122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> movetype ;
#line 3123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> index ;
#line 3124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> speed ;
#line 3125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> x ;
#line 3126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> z ;
#line 3127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> h ;
#line 3128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> r ;
#line 3129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> yLayer ;
#line 3130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> sbAttributePos ;
#line 3132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (1) = x ;
#line 3133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (2) = h  + 1;
#line 3134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (3) = z ;
#line 3136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actSlave  . Count  ();ipl  ++)
#line 3137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSlaveTarget  & st  = _pNetwork  -> ga_srvServer  . srv_actSlave  [ ipl  ];
#line 3140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(st  . slave_Index  == index )
#line 3141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (st  . slave_iClientIndex  , penEntity ))
#line 3143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
st  . SetyLayer  (yLayer );
#line 3145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  != ATTC_UNWALKABLE )
#line 3146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
st  . slave_sbAttributePos  = sbAttributePos ;
#line 3148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_iCountry  == GERMANY  || g_iCountry  == SPAIN  || g_iCountry  == FRANCE  || g_iCountry  == POLAND )
#line 3151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_PEACE )
#line 3154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 3156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 3158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 3160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 3162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlagOn  (ENF_HIDDEN );
#line 3164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlagOff  (ENF_HIDDEN );
#line 3168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_vDesiredPosition  = vDesiredPosition ;
#line 3172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(movetype  == MSG_MOVE_RUN  || movetype  == MSG_MOVE_WALK )
#line 3173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(speed  < 0)
#line 3177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
speed  = 0.1f;
#line 3179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fWalkSpeed  = speed ;
#line 3182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = speed ;
#line 3183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fCloseRunSpeed  = speed ;
#line 3184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fAttackRunSpeed  = speed ;
#line 3185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! penEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 3186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> MoveNow  ();
#line 3188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(movetype  == MSG_MOVE_STOP )
#line 3191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = 5.0f;
#line 3193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! penEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 3194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> StopandTeleport  ();
#line 3196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::OpenGate(int iGateNumber,BOOL bOpenGate) 
#line 3208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == 7 || g_slZone  == 4)
#line 3211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pDoor  = NULL ;
#line 3216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == 7)
#line 3217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(iGateNumber )
#line 3219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 0: 
#line 3221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pDoor  = _pNetwork  -> ga_World  . EntityFromID  (19182);
#line 3222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 1: 
#line 3224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pDoor  = _pNetwork  -> ga_World  . EntityFromID  (19183);
#line 3225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 2: 
#line 3227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pDoor  = _pNetwork  -> ga_World  . EntityFromID  (19184);
#line 3228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  :
#line 3230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{return ;}
#line 3231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(g_slZone  == 4)
#line 3234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(iGateNumber )
#line 3237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 3: 
#line 3240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pDoor  = _pNetwork  -> ga_World  . EntityFromID  (15510);
#line 3241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 4: 
#line 3244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pDoor  = _pNetwork  -> ga_World  . EntityFromID  (15517);
#line 3245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 5: 
#line 3248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pDoor  = _pNetwork  -> ga_World  . EntityFromID  (15516);
#line 3249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  :
#line 3251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{return ;}
#line 3252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pDoor )
#line 3258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iGateNumber  < 3)
#line 3260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CDoorController  *) pDoor ) -> m_bOpened  = bOpenGate ;
#line 3263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (pDoor  , EET_TRIGGER  , this );
#line 3264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iGateNumber  < 6)
#line 3267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX tIdx ;
#line 3269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iGateNumber  == 3){tIdx  = 11003;}
#line 3270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iGateNumber  == 4){tIdx  = 15497;}
#line 3271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iGateNumber  == 5){tIdx  = 15496;}
#line 3273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bOpenGate )
#line 3274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CWorldBase  *) pDoor ) -> SetCollisionFlags  (ECF_MODEL_NO_COLLISION );
#line 3277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pDoor  = _pNetwork  -> ga_World  . EntityFromID  (tIdx ))
#line 3278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CModelHolder3  *) pDoor ) -> SendEvent  (EStop  ());
#line 3280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
};
#line 3281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  != WCJF_OWNER  && 
#line 3286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  != WCJF_DEFENSE_GUILD  && 
#line 3287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  != WCJF_DEFENSE_CHAR )
#line 3288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CWorldBase  *) pDoor ) -> SetCollisionFlags  (ECF_BRUSH );
#line 3290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pDoor  = _pNetwork  -> ga_World  . EntityFromID  (tIdx ))
#line 3294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CModelHolder3  *) pDoor ) -> SendEvent  (EStart  ());
#line 3296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
};
#line 3297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::StandDown(BOOL bStand) 
#line 3306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nActionSit  == 0)
#line 3308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 1;
#line 3310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_nActionSit  == 2)
#line 3312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 3;
#line 3314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 3318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = TRUE ;
#line 3321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = ACTION_NUM_SELL ;
#line 3322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bPersonalShop  = TRUE ;
#line 3323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetChaData(int index,int type,ULONG hp,ULONG maxHp,SBYTE hairStyle,SBYTE faceStyle,CTString & strName,SBYTE state,SBYTE pkTitle,SLONG pkstate) 
#line 3326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 3328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (index  , penEntity ))
#line 3329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penEntity  != NULL  && "Invalid Entity Pointer");
#line 3332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_ChaList  = type ;
#line 3333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetSkaModel  (JobInfo  () . GetFileName  (type ));
#line 3335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = penEntity  -> GetModelInstance  ();
#line 3336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMI )
#line 3337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> SetCharacterAppearance  (pMI  , type  , hairStyle  , faceStyle );
#line 3339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> SetAnimation  (type );
#line 3343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacterBase  *) penEntity ) -> m_strName  = strName ;
#line 3344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMaxiHealth  = maxHp ;
#line 3345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentHealth  = hp ;
#line 3346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nHairStyle  = hairStyle ;
#line 3347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nFaceStyle  = faceStyle ;
#line 3349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkTitle  = pkTitle ;
#line 3350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkState  = pkstate ;
#line 3352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(state  & PLAYER_STATE_SITDOWN )
#line 3353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nSitDown  = 2;
#line 3355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nPlayActionNum  = 3;
#line 3356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((state  & PLAYER_STATE_PKMODE ) && (state  & PLAYER_STATE_PKMODEDELAY ))
#line 3359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkMode  = 2;
#line 3361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(state  & PLAYER_STATE_PKMODE )
#line 3363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkMode  = 1;
#line 3365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkMode  = 0;
#line 3369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(hp  <= 0)
#line 3372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> DeathNow  ();
#line 3375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> AnimForDeath  ();
#line 3376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacterBase  *) penEntity ) -> m_bDeath  = FALSE ;
#line 3380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> GetModelInstance  ())
#line 3384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaTag  tag ;
#line 3386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__ROOT");
#line 3387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 3388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 3389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__TOP");
#line 3390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 3391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 3392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> GetAllFramesBBox  (aabb );
#line 3393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetPos  (0 , aabb  . Size  () (2) * GetModelInstance  () -> mi_vStretch  (2) , 0);
#line 3394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 3395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetShopData(INDEX index,SBYTE sbShopType) 
#line 3401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 3403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (index  , penEntity ))
#line 3404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penEntity  != NULL  && "Invalid Entity Pointer");
#line 3406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbShopType  != PST_NOSHOP )
#line 3407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nSitDown  = 2;
#line 3409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nPlayActionNum  = ACTION_NUM_SELL ;
#line 3410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nSitDown  = 0;
#line 3414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nPlayActionNum  = ACTION_NUM_SELL ;
#line 3415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> ActionNow  ();
#line 3417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::CheckNormalAttack(CEntity * pEntity,FLOAT fDist) 
#line 3422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  -> IsCharacter  ())
#line 3425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackCharacter  (pEntity );
#line 3427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pEntity  -> IsEnemy  ())
#line 3429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackEnemy  (pEntity  , fDist );
#line 3431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pEntity  -> IsPet  ())
#line 3433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackPet  (pEntity );
#line 3435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pEntity  -> IsSlave  ())
#line 3437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackSlave  (pEntity );
#line 3439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pEntity  -> IsWildPet  ())
#line 3441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackWildPet  (pEntity );
#line 3443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::CheckAttackTarget(INDEX iSkillIndex,CEntity * pEntity,FLOAT fDist) 
#line 3449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! pEntity )
#line 3451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> IsCSFlagOn  (CSF_CANNOT_ATTACK_MASK ))
#line 3457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  -> GetFirstExFlags  () & (ENF_EX1_PEACEFUL  | ENF_EX1_PRODUCTION  | ENF_EX1_NPC  | ENF_EX1_CURRENT_PET  | ENF_EX1_CURRENT_WILDPET ))
#line 3463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iSkillIndex  == - 1 && ! (pEntity  -> GetFlags  () & ENF_ALIVE ))
#line 3469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iSkillIndex  == - 1 && _pNetwork  -> MyCharacterInfo  . bPetRide )
#line 3475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iSkillIndex  == - 1)
#line 3480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckNormalAttack  (pEntity  , fDist );
#line 3483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return _pNetwork  -> CheckSkillAttack  (iSkillIndex  , pEntity );
#line 3488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::CheckEntityOfTarget(CEntity * pEntity,CEntity * pTarget) 
#line 3493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  == NULL )
#line 3495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ((CUnit  *) pEntity ) -> CheckTarget  (pTarget );
#line 3500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 3504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckAttackCharacter(CEntity * penEnt) 
#line 3505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bIsPartyMember  = FALSE ;
#line 3507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bIsPartyMember  = penEnt  -> IsSecondExtraFlagOn  (ENF_EX2_MYPARTY );
#line 3510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bIsPartyMember )
#line 3511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl2  = 0;ipl2  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl2 )
#line 3516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ] . cha_iClientIndex  == penEnt  -> en_ulID )
#line 3518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const UBYTE  sbAttributePos  = _pNetwork  -> MyCharacterInfo  . sbAttributePos ;
#line 3524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const UBYTE  sbCharAttributePos  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ] . cha_sbAttributePos ;
#line 3526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbJoinFlagMerac  = _pNetwork  -> MyCharacterInfo  . sbJoinFlagMerac ;
#line 3527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbCharacterJoinFlagMerac  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ] . cha_sbJoinFlagMerac ;
#line 3530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbJoinFlagDratan  = _pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan ;
#line 3531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbCharacterJoinFlagDratan  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ] . cha_sbJoinFlagDratan ;
#line 3534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const LONG  lGuildIndex  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ] . cha_lGuildIndex ;
#line 3537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . lGuildIndex  != - 1 
#line 3538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& lGuildIndex  == _pNetwork  -> MyCharacterInfo  . lGuildIndex  
#line 3539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& _pNetwork  -> MyCharacterInfo  . EntranceType  != CURRENT_ENTER_PARTYCUBE )
#line 3540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  == ATTC_WAR  && sbCharAttributePos  == ATTC_WAR )
#line 3549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> GetSiegeWarfareNew  () -> GetWarState  ())
#line 3556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbJoinFlagDratan  == WCJF_NONE )
#line 3559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlagDratan  == WCJF_OWNER  || 
#line 3565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlagDratan  == WCJF_DEFENSE_GUILD )
#line 3566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbCharacterJoinFlagDratan  == WCJF_OWNER  || 
#line 3569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagDratan  == WCJF_DEFENSE_GUILD )
#line 3570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlagDratan  == WCJF_ATTACK_GUILD )
#line 3580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbCharacterJoinFlagDratan  == WCJF_ATTACK_GUILD )
#line 3583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_pUISWDoc  -> IsWar  () && ! _pUISWDoc  -> IsSelectBattle  ())
#line 3597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbJoinFlagMerac  == WCJF_NONE )
#line 3600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlagMerac  == WCJF_DEFENSE_CHAR  || sbJoinFlagMerac  == WCJF_OWNER  || sbJoinFlagMerac  == WCJF_DEFENSE_GUILD )
#line 3605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbCharacterJoinFlagMerac  == WCJF_OWNER  || 
#line 3608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagMerac  == WCJF_DEFENSE_CHAR  || 
#line 3609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagMerac  == WCJF_DEFENSE_GUILD )
#line 3610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlagMerac  == WCJF_ATTACK_GUILD  || 
#line 3620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlagMerac  == WCJF_ATTACK_CHAR )
#line 3621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbCharacterJoinFlagMerac  == WCJF_ATTACK_GUILD  || 
#line 3624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagMerac  == WCJF_ATTACK_CHAR )
#line 3625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  () || g_iCountry  == THAILAND )
#line 3627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_pUISWDoc  -> IsSelectBattle  ())
#line 3641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbJoinFlagMerac  == WCJF_NONE )
#line 3644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlagMerac  == WCJF_DEFENSE_CHAR  || sbJoinFlagMerac  == WCJF_OWNER  || sbJoinFlagMerac  == WCJF_DEFENSE_GUILD )
#line 3649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbCharacterJoinFlagMerac  == WCJF_OWNER  || 
#line 3652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagMerac  == WCJF_DEFENSE_CHAR  || 
#line 3653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagMerac  == WCJF_DEFENSE_GUILD )
#line 3654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlagMerac  == WCJF_OWNER  || 
#line 3664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlagMerac  == WCJF_DEFENSE_GUILD )
#line 3665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbCharacterJoinFlagMerac  == WCJF_OWNER  || 
#line 3668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagMerac  == WCJF_DEFENSE_CHAR  || 
#line 3669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbCharacterJoinFlagMerac  == WCJF_DEFENSE_GUILD )
#line 3670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlagMerac  == WCJF_ATTACK_GUILD  || 
#line 3680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlagMerac  == WCJF_ATTACK_CHAR )
#line 3681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  () || IsLegitTarget  (penEnt ) || _pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penEnt  -> en_ulID ))
#line 3689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  () || IsLegitTarget  (penEnt ) || _pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penEnt  -> en_ulID ))
#line 3702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 3715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckAttackPet(CEntity * pEntity) 
#line 3716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_PET ))
#line 3718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actPet  . Count  ();ipl  ++)
#line 3723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPetTarget  & pt  = _pNetwork  -> ga_srvServer  . srv_actPet  [ ipl  ];
#line 3725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pt  . pet_iClientIndex  == pEntity  -> en_ulID )
#line 3726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl2  = 0;ipl2  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl2 )
#line 3728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ];
#line 3730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == pt  . pet_OwnerIndex )
#line 3731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackCharacter  (ct  . cha_pEntity );
#line 3734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 3741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckAttackWildPet(CEntity * pEntity) 
#line 3742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ))
#line 3744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actWildPet  . Count  ();ipl  ++)
#line 3749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CWildPetInfo  & pt  = _pNetwork  -> ga_srvServer  . srv_actWildPet  [ ipl  ];
#line 3751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pt  . m_nNetIndex  == pEntity  -> en_ulID )
#line 3752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl2  = 0;ipl2  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl2 )
#line 3754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ];
#line 3756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == pt  . m_nOwnerIndex )
#line 3757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackCharacter  (ct  . cha_pEntity );
#line 3760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 3771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckAttackSlave(CEntity * pEntity) 
#line 3772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE )){return FALSE ;}
#line 3775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actSlave  . Count  ();ipl  ++)
#line 3776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSlaveTarget  & pt  = _pNetwork  -> ga_srvServer  . srv_actSlave  [ ipl  ];
#line 3778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pt  . slave_iClientIndex  == pEntity  -> en_ulID )
#line 3779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl2  = 0;ipl2  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl2 )
#line 3781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ];
#line 3783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == pt  . slave_OwnerIndex )
#line 3784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CheckAttackCharacter  (ct  . cha_pEntity );
#line 3787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
#ifdef DRATAN_SIEGEWARFARE		
#line 3812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
#endif
  
#line 3797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckAttackEnemy(CEntity * pEntity,float fLength) 
#line 3798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX iMobIndex  = ((CEnemy  *) ((CEntity  *) pEntity )) -> m_nMobDBIndex ;
#line 3801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbJoinFlagMerac  = _pNetwork  -> MyCharacterInfo  . sbJoinFlagMerac ;
#line 3802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbJoinFlag  = sbJoinFlagMerac ;
#line 3808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbJoinFlagDratan  = _pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan ;
#line 3811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  = (_pNetwork  -> MyCharacterInfo  . zoneNo  == 7) ? sbJoinFlagMerac  : sbJoinFlagDratan ;
#line 3817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == DRATAN_LORD_SYMBOL_INDEX )
#line 3818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{return FALSE ;}
#line 3821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == LORD_SYMBOL_INDEX )
#line 3822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . lGuildPosition  == GUILD_MEMBER_BOSS  && 
#line 3824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  == WCJF_ATTACK_GUILD  && fLength  <= 3.0f)
#line 3825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CUnit  *) pEntity ) -> m_nCurrentHealth  <= 0)
#line 3836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (iMobIndex );
#line 3840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . IsCastleTower  ())
#line 3841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . IsCastleGuard  () || MD  . IsLordSymbol  ())
#line 3847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbJoinFlag  == WCJF_OWNER  || 
#line 3850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  == WCJF_DEFENSE_CHAR  || 
#line 3851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  == WCJF_DEFENSE_GUILD  || 
#line 3852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  == WCJF_NONE )
#line 3853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbJoinFlag  == WCJF_ATTACK_GUILD  && _pUISWDoc  -> IsWar  ())
#line 3858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (iMobIndex );
#line 3872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  tQtr  = MD  . IsMyQuarter  ();
#line 3873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tQtr  != QUARTER_NONE )
#line 3874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(tQtr )
#line 3876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case QUARTER_MINE : 
#line 3878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case QUARTER_INSTALL : 
#line 3879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case QUARTER_ATTACK : 
#line 3882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 3884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsCastleGuard  () || MD  . IsCastleTower  () || MD  . IsLordSymbol  ())
#line 3887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbJoinFlag  == WCJF_OWNER  || 
#line 3890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  == WCJF_DEFENSE_CHAR  || 
#line 3891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  == WCJF_DEFENSE_GUILD  || 
#line 3892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbJoinFlag  == WCJF_NONE )
#line 3894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 3896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 3904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 3910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::StartCamera(CEntity * pTarget,BOOL bRestart) 
#line 3919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = pTarget ;
#line 3930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCamera  *) pTarget ) -> m_penTarget  = ((CCamera  *) pTarget ) -> m_penTargetOld ;
#line 3933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (pTarget  , EET_TRIGGER  , this );
#line 3934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::GetProjection(CAnyProjection3D & apr) 
#line 3942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  = m_apr ;
#line 3944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetProduct(SLONG slChaIndex,SBYTE slProductType) 
#line 3948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 3950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  chaID  = _pNetwork  -> SearchClientChaIndex  (slChaIndex );
#line 3951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chaID  != - 1)
#line 3952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (chaID  , penEntity ))
#line 3954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPlayProduceNum  = (SLONG ) slProductType  + 1;
#line 3956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacterBase  *) penEntity ) -> ProduceNow  ();
#line 3957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetConsensus(SLONG slChaIndex) 
#line 3963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 3965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  chaID  = _pNetwork  -> SearchClientChaIndex  (slChaIndex );
#line 3966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chaID  != - 1)
#line 3967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (chaID  , penEntity ))
#line 3969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacterBase  *) penEntity ) -> ConsensusNow  ();
#line 3976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetSummonCommand(CEntity * pEntity,INDEX iCommand) 
#line 3982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! pEntity )
#line 3984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 3986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 3988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CSlave  *) pEntity ) -> SetCurrentCommand  (iCommand );
#line 3989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::WarpTeleport(FLOAT fX,FLOAT fZ,FLOAT fH,FLOAT fR,SBYTE sbLayer) 
#line 3992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 3993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 3994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 3996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . x  = fX ;
#line 3997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . z  = fZ ;
#line 3998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . h  = fH ;
#line 3999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . r  = fR ;
#line 4000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . yLayer  = sbLayer ;
#line 4005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fCameraAngle  = 0.0f;
#line 4007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 4008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 4009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 4012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDying  = FALSE ;
#line 4013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRcvAtMsg  = TRUE ;
#line 4014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 4015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 4016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 4017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 4019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = NULL ;
#line 4020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 4028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 4032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GoTo  (_pNetwork  -> MyCharacterInfo  . x  , _pNetwork  -> MyCharacterInfo  . h  + 0.5f , _pNetwork  -> MyCharacterInfo  . z  , 
#line 4033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . r );
#line 4034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 4036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName CPlayer::GetHairMeshName(int iJob,SBYTE sbHairType) 
#line 4037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName ctName  = CTFileName ("");
#line 4040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbHairType  >= HAIR_GREEN_CAP )
#line 4041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ctName  = _afnHelmetMeshName  [ iJob  ] [ 1 ];
#line 4043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbHairType  >= HAIR_RED_CAP )
#line 4045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ctName  = _afnHelmetMeshName  [ iJob  ] [ 0 ];
#line 4047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ctName  = _afnHairMeshName  [ iJob  ] [ sbHairType  ];
#line 4051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ctName ;
#line 4054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 4056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName CPlayer::GetHairTextureName(int iJob,SBYTE sbHairType,SBYTE sbSubType) 
#line 4057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName ctName  = CTFileName ("");
#line 4060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbHairType  >= HAIR_GREEN_CAP  && sbSubType  == 0)
#line 4061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ctName  = _afnHelmetTextureName  [ iJob  ] [ 1 ];
#line 4063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(sbHairType  >= HAIR_RED_CAP  && sbSubType  == 0)
#line 4065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ctName  = _afnHelmetTextureName  [ iJob  ] [ 0 ];
#line 4067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  nType  = sbHairType ;
#line 4072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(nType  >= HAIR_GREEN_CAP ){nType  -= HAIR_GREEN_CAP ;}
#line 4073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(nType  >= HAIR_RED_CAP ){nType  -= HAIR_RED_CAP ;}
#line 4075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ctName  = _afnHairTextureName  [ iJob  ] [ nType  + sbSubType  ];
#line 4076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ctName ;
#line 4079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 4081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetCharacterHairChange(CEntity * penEntity,SBYTE sbType,INDEX Cnt,BOOL IsMe) 
#line 4082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  nJob ;
#line 4085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = ((CCharacter  *) penEntity ) -> GetCurrentPlayerModelInstance  ();
#line 4087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsMe )
#line 4088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nJob  = _pNetwork  -> MyCharacterInfo  . job ;
#line 4090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nJob  = _pNetwork  -> ga_srvServer  . srv_actCha  [ Cnt  ] . cha_iType ;
#line 4094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeHairMesh  (pMI  , nJob  , sbType  - 1);
#line 4098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsMe )
#line 4099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);}
#line 4100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{_pNetwork  -> ga_srvServer  . srv_actCha  [ Cnt  ] . cha_itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);}
#line 4102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 4104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetCharacterAppearance(CModelInstance * pMI,int iJob,SBYTE sbHairType,SBYTE sbFaceType) 
#line 4105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeFaceMesh  (pMI  , iJob  , sbFaceType  - 1);
#line 4107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeHairMesh  (pMI  , iJob  , sbHairType  - 1);
#line 4108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 4110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ChangeFaceMesh(CModelInstance * pMI,int iJob,SBYTE sbType) 
#line 4111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (pMI  != NULL  && "Invalid ModelInstance Pointer");
#line 4114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iOldMeshID  = pMI  -> mi_iFaceMesh ;
#line 4115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iNewMeshID  = ska_GetIDFromStringTable  (_afnFaceMeshName  [ iJob  ] [ sbType  ]);
#line 4123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iOldMeshID  == - 1)
#line 4124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iOldMeshID  = ska_GetIDFromStringTable  ((CTString) _afnFaceMeshName  [ iJob  ] [ 0 ]);
#line 4127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MeshInstance  * pMESH  = pMI  -> FindMeshInstance  (iOldMeshID );
#line 4130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMESH )
#line 4131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> DeleteMesh  (pMESH  -> mi_pMesh  -> GetName  ());
#line 4133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddMesh_t  (_afnFaceMeshName  [ iJob  ] [ sbType  ]);
#line 4134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MeshInstance  * pMESHNew  = pMI  -> FindMeshInstance  (iNewMeshID );
#line 4135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> mi_iFaceMesh  = iNewMeshID ;
#line 4138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (_afnFaceTextureName  [ iJob  ] [ sbType  ] , _afnFaceTextureName  [ iJob  ] [ sbType  ] . FileName  () , pMESHNew );
#line 4140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_afnFaceTextureName  [ iJob  ] [ sbType  + 3 ] . Length  () > 0)
#line 4141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (_afnFaceTextureName  [ iJob  ] [ sbType  + 3 ] , _afnFaceTextureName  [ iJob  ] [ sbType  + 3 ] . FileName  () , pMESHNew );
#line 4144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ChangeHairMesh(CModelInstance * pMI,int iJob,SBYTE sbType) 
#line 4149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (pMI  != NULL  && "Invalid ModelInstance Pointer");
#line 4152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName ctHairMeshName  = GetHairMeshName  (iJob  , sbType );
#line 4153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName ctHairTexture0  = GetHairTextureName  (iJob  , sbType  , 0);
#line 4154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName ctHairTexture1  = GetHairTextureName  (iJob  , sbType  , 3);
#line 4155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName ctHairTexture2  = GetHairTextureName  (iJob  , sbType  , 6);
#line 4157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iOldMeshID  = pMI  -> mi_iHairMesh ;
#line 4158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iNewMeshID  = ska_GetIDFromStringTable  (ctHairMeshName );
#line 4166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iOldMeshID  == - 1)
#line 4167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iOldMeshID  = ska_GetIDFromStringTable  ((CTString) _afnHairMeshName  [ iJob  ] [ 0 ]);
#line 4170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MeshInstance  * pMESH  = pMI  -> FindMeshInstance  (iOldMeshID );
#line 4173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMESH )
#line 4174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> DeleteMesh  (pMESH  -> mi_pMesh  -> GetName  ());
#line 4176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iNewMeshID  != - 1)
#line 4178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddMesh_t  (ctHairMeshName );
#line 4180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MeshInstance  * pMESHNew  = pMI  -> FindMeshInstance  (iNewMeshID );
#line 4181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> mi_iHairMesh  = iNewMeshID ;
#line 4186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (ctHairTexture0  , ctHairTexture0  . FileName  () , pMESHNew );
#line 4188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ctHairTexture1  . Length  () > 0)
#line 4189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (ctHairTexture1  , ctHairTexture1  . FileName  () , pMESHNew );
#line 4192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ctHairTexture2  . Length  () > 0)
#line 4194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (ctHairTexture2  , ctHairTexture2  . FileName  () , pMESHNew );
#line 4197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetChaWearing(CCharacterTarget & ct,CEntity * penEntity,CNetworkMessage * istr) 
#line 4203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  wear_index ;
#line 4205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  item_plus ;
#line 4207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = 0;i  < WEAR_COUNT ;++ i )
#line 4208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> wear_index ;
#line 4210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> item_plus ;
#line 4211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(wear_index  != - 1)
#line 4212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> WearingArmor  (wear_index );
#line 4214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = ((CCharacter  *) penEntity ) -> GetCurrentPlayerModelInstance  ();
#line 4215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMI )
#line 4216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_itemEffect  . Change  (
#line 4218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_iType  
#line 4219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & _pNetwork  -> GetItemData  (wear_index ) 
#line 4220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pNetwork  -> GetItemData  (wear_index ) . GetWearingPosition  () 
#line 4221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, item_plus  
#line 4222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & pMI  -> m_tmSkaTagManager  
#line 4223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, ct  . cha_sbItemEffectOption  
#line 4224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pNetwork  -> GetItemData  (wear_index ) . GetSubType  ()
#line 4225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
);
#line 4226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 4256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ShowDamageResult(CEntity * pEntity,ULONG targetDamage,SBYTE targetFlag,SLONG skillIndex) 
#line 4257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 4259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strHp ;
#line 4260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strName ;
#line 4261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strName  = pEntity  -> GetName  ();
#line 4263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> IsSitting  () && targetFlag  != HITTYPE_MISS )
#line 4264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetCharacterInfo  () -> UseAction  (3);
#line 4266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(targetFlag )
#line 4269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_MISS : 
#line 4271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (413 , "%s의 공격을 피했습니다.") , strName );
#line 4272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 4273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_WEAK : 
#line 4275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 4276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1390 , "스킬 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (685 , "약한 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 4284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_NORMAL : 
#line 4286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 4287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1390 , "스킬 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (414 , "일반공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 4295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_STRONG : 
#line 4297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 4298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1390 , "스킬 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (686 , "강한 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 4306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_HARD : 
#line 4308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 4309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1390 , "스킬 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (687 , "매우 강한 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 4317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_CRITICAL : 
#line 4319 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 4320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1390 , "스킬 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (411 , "크리티컬 히트! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 4328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamageMe  = TRUE ;
#line 4329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_DEADLY : 
#line 4331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 4332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1390 , "스킬 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (688 , "데들리 공격! %s에게 %d의 데미지를 받았습니다.") , strName  , targetDamage );
#line 4338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACKED );
#line 4340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamageMe  = TRUE ;
#line 4341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 4345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ShowAttackResult(CEntity * penTargetEntity,ULONG targetDamage,SBYTE targetFlag,SLONG skillIndex) 
#line 4346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 4348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strHp ;
#line 4349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strMobName ;
#line 4350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMobName  = penTargetEntity  -> GetName  ();
#line 4352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  slCurrentWeight  = _pNetwork  -> MyCharacterInfo  . weight ;
#line 4353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  slMaxWeight  = _pNetwork  -> MyCharacterInfo  . maxweight ;
#line 4355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strPenalty  = _S  (1377 , "[무게 패널티] ");
#line 4357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , FALSE );
#line 4360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(targetFlag )
#line 4361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_MISS : 
#line 4363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S2  (409 , strMobName  , "%s<가> 당신의 공격을 피했습니다.") , strMobName );
#line 4364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slCurrentWeight  > slMaxWeight )
#line 4365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  = strPenalty  + strSysMessage ;
#line 4367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACK );
#line 4369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_WEAK : 
#line 4371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (689 , "약한 공격! %s에게 %d의 데미지를 주었습니다.") , strMobName  , targetDamage );
#line 4372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slCurrentWeight  > slMaxWeight )
#line 4373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  = strPenalty  + strSysMessage ;
#line 4375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACK );
#line 4377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_NORMAL : 
#line 4379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  == - 1)
#line 4380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (410 , "일반공격! %s에게 %d의 데미지를 주었습니다.") , strMobName  , targetDamage );
#line 4382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (787 , "스킬 공격! %s에게 %d의 데미지를 주었습니다.") , strMobName  , targetDamage );
#line 4386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slCurrentWeight  > slMaxWeight )
#line 4388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  = strPenalty  + strSysMessage ;
#line 4390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACK );
#line 4392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_STRONG : 
#line 4394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (690 , "강한 공격! %s에게 %d의 데미지를 주었습니다.") , strMobName  , targetDamage );
#line 4395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slCurrentWeight  > slMaxWeight )
#line 4396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  = strPenalty  + strSysMessage ;
#line 4398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACK );
#line 4400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_HARD : 
#line 4402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (691 , "매우 강한 공격! %s에게 %d의 데미지를 주었습니다.") , strMobName  , targetDamage );
#line 4403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slCurrentWeight  > slMaxWeight )
#line 4404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  = strPenalty  + strSysMessage ;
#line 4406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACK );
#line 4408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_CRITICAL : 
#line 4410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (407 , "크리티컬 히트! %s에게 %d의 데미지를 주었습니다.") , strMobName  , targetDamage );
#line 4411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slCurrentWeight  > slMaxWeight )
#line 4412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  = strPenalty  + strSysMessage ;
#line 4414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACK );
#line 4416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = TRUE ;
#line 4417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HITTYPE_DEADLY : 
#line 4419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (692 , "데들리 공격! %s에게 %d의 데미지를 주었습니다.") , strMobName  , targetDamage );
#line 4420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slCurrentWeight  > slMaxWeight )
#line 4421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  = strPenalty  + strSysMessage ;
#line 4423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ATTACK );
#line 4425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = TRUE ;
#line 4426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
#define IS_FLAG_ON(flagAll, flagVal) ( (flagAll) & ((1L)<<(flagVal)) )
  void CPlayer::CancelProduct() 
#line 4432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 4434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 4438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . IdleAnim  ();
#line 4439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::Read_net_Character(int index,CNetworkMessage * istr) 
#line 4445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDesiredPosition ;
#line 4447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aDesiredAngle ;
#line 4448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity ;
#line 4449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity ;
#line 4450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 4451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ipl ;
#line 4453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  cha_index ;
#line 4454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  wear_pos ;
#line 4455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  item_index ;
#line 4457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(istr  == NULL )
#line 4458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 4460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 4461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 4462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 4463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(index )
#line 4466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE : 
#line 4468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  type ;
#line 4470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  cha_index ;
#line 4471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  mobnum ;
#line 4473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> type ;
#line 4475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(type  == MSG_CHANGE_START )
#line 4476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> cha_index ;
#line 4478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> mobnum ;
#line 4480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nChangeMonsterId  = mobnum ;
#line 4482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cha_index  == _pNetwork  -> MyCharacterInfo  . index )
#line 4483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bChanging  = TRUE ;
#line 4485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMobChange  = FALSE ;
#line 4487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iStopChangeItem  = 521;
#line 4490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> AddToNoticeList  (iStopChangeItem  , NOTICE_POLYMOPH );
#line 4491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> RefreshNoticeList  ();
#line 4493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  chaID  = _pNetwork  -> SearchClientChaIndex  (cha_index );
#line 4497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chaID  != - 1)
#line 4498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (chaID  , penEntity ))
#line 4500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_bMobChange  = FALSE ;
#line 4502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> SetPolymophMobIndex  (mobnum );
#line 4503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> PolymophNow  ();
#line 4504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(type  == MSG_CHANGE_STOP )
#line 4508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> cha_index ;
#line 4511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cha_index  == _pNetwork  -> MyCharacterInfo  . index )
#line 4512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nChangeMonsterId  = 0;
#line 4514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bChanging  = TRUE ;
#line 4515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iStopChangeItem  = 521;
#line 4516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> DelFromNoticeList  (iStopChangeItem  , NOTICE_POLYMOPH );
#line 4517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> RefreshNoticeList  ();
#line 4518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  chaID  = _pNetwork  -> SearchClientChaIndex  (cha_index );
#line 4522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chaID  != - 1)
#line 4523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (chaID  , penEntity ))
#line 4525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> SetPolymophMobIndex  (- 1);
#line 4527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> PolymophNow  ();
#line 4528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(type  == MSG_CHANGE_ERR )
#line 4532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  err ;
#line 4535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> err ;
#line 4536 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (err );
#line 4537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_PC_REBIRTH : 
#line 4543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  type ;
#line 4545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  cha_index ;
#line 4546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  hp  , maxHp  , mp  , maxMp ;
#line 4548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> type ;
#line 4549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> cha_index ;
#line 4550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> hp ;
#line 4551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> maxHp ;
#line 4552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> mp ;
#line 4553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> maxMp ;
#line 4555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cha_index  == _pNetwork  -> MyCharacterInfo  . index )
#line 4556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . hp  = hp ;
#line 4558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . maxHP  = maxHp ;
#line 4559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . mp  = mp ;
#line 4560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . maxMP  = maxMp ;
#line 4562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> GetSiegeWarfareNew  () -> GetWarState  () && 
#line 4563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbAttributePos  == ATTC_WAR  && 
#line 4564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  != WCJF_NONE )
#line 4565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> GetSiegeWarfareNew  () -> GetWaitTime  () > 0)
#line 4568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> RearrangeOrder  (UI_SIEGE_WARFARE_NEW  , FALSE );
#line 4570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> Rebirth  ();
#line 4574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  chaID  = _pNetwork  -> SearchClientChaIndex  (cha_index );
#line 4578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chaID  != - 1)
#line 4579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (chaID  , penEntity ))
#line 4581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMaxiHealth  = maxHp ;
#line 4583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentHealth  = hp ;
#line 4584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacterBase  *) penEntity ) -> Rebirth  ();
#line 4585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_ITEM_TAKE : 
#line 4592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbType ;
#line 4594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> sbType ;
#line 4595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> cha_index ;
#line 4596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> item_index ;
#line 4598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbType  == MSG_CHAR_PC  && cha_index  == _pNetwork  -> MyCharacterInfo  . index )
#line 4599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 4604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (cha_index  , sbType  , penEntity ))
#line 4605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nPlayActionNum  = (SLONG ) ACTION_NUM_PICKITEM ;
#line 4607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> ActionNow  ();
#line 4608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_aitItem  . Count  ();ipl  ++)
#line 4612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItemTarget  & it  = _pNetwork  -> ga_srvServer  . srv_aitItem  [ ipl  ];
#line 4614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(it  . item_Index  == item_index )
#line 4615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  . Init  ();
#line 4617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ga_srvServer  . srv_aitItem  . SwapAndPop  (ipl );
#line 4618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_ITEM_GET : 
#line 4624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strName ;
#line 4626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SQUAD  slCount ;
#line 4627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> strName ;
#line 4628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> item_index ;
#line 4629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> slCount ;
#line 4631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strMessage ;
#line 4632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const char  * szItemName  = _pNetwork  -> GetItemName  (item_index );
#line 4633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMessage  . PrintF  (_S2  (707 , CTString (szItemName ) , "[파티원] %s님이 %s<를> %ld개 획득하였습니다.") , strName  , szItemName  , slCount );
#line 4634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strMessage );
#line 4635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHAR_STATUS : 
#line 4640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  cha_index  , state  , state2 ;
#line 4642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  hp  , maxhp  , mp  , maxmp ;
#line 4643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  pktitle ;
#line 4644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  pkstate ;
#line 4646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> cha_index  
#line 4647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> hp  
#line 4648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> maxhp  
#line 4649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> mp  
#line 4650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> maxmp  
#line 4651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> pkstate  
#line 4652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> pktitle  
#line 4653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> state  
#line 4654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
>> state2 ;
#line 4656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cha_index  == _pNetwork  -> MyCharacterInfo  . index )
#line 4657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . hp  = hp ;
#line 4659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . maxHP  = maxhp ;
#line 4660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . mp  = mp ;
#line 4661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . maxMP  = maxmp ;
#line 4662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . pktitle  = pktitle ;
#line 4663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . pkpenalty  = pkstate ;
#line 4668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance )
#line 4669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IS_FLAG_ON  (state  , EST_ASSIST_FAKEDEATH ))
#line 4671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . m_bDisableAnimating  = TRUE ;
#line 4673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . m_bDisableAnimating  = FALSE ;
#line 4677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetModelInstance  ();
#line 4682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . statusEffect  . ChangeStatus  (& pMI  -> m_tmSkaTagManager  , state  , CStatusEffect  :: R_PARTY );
#line 4683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERTALWAYS  ("Player must have ska model and tag manager.");
#line 4687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . statusEffect  . IsState  (EST_ASSIST_BLIND ))
#line 4691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
LostTarget  ();
#line 4693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . statusEffect  . IsSturn  () 
#line 4696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pNetwork  -> MyCharacterInfo  . statusEffect  . IsState  (EST_ASSIST_STONE ) 
#line 4697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pNetwork  -> MyCharacterInfo  . statusEffect  . IsState  (EST_ASSIST_SLEEP )
#line 4698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 4699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMoveNoSendStopMsg  ();
#line 4701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStuned  = TRUE ;
#line 4702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {m_bStuned  = FALSE ;}
#line 4704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . statusEffect  . IsHold  ())
#line 4705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMoveNoSendStopMsg  ();
#line 4707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bHold  = TRUE ;
#line 4708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {m_bHold  = FALSE ;}
#line 4710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . statusEffect  . IsState  (EST_ASSIST_SILENT )){m_bCannotUseSkill  = TRUE ;}
#line 4711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {m_bCannotUseSkill  = FALSE ;}
#line 4713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();ipl  ++)
#line 4716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl  ];
#line 4719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == cha_index )
#line 4720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . SetChaPkState  (pkstate );
#line 4723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (ct  . cha_iClientIndex  , penEntity ))
#line 4724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penEntity )) -> m_nCurrentHealth  = hp ;
#line 4726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 4727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> UpdateTargetInfo  (maxhp  , hp  , 
#line 4729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkMode  , 
#line 4730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkState  , 
#line 4731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nLegit );
#line 4732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 4735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetTargetInfoReal  (maxhp  , hp  , 
#line 4737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
0 , 
#line 4738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkMode  , 
#line 4739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkState  , 
#line 4740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
0 , 
#line 4741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nLegit  , 
#line 4742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
& ct 
#line 4743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
);
#line 4744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetParty  () -> UpdateMemberStatus  (cha_index  , hp  , maxhp  , mp  , maxmp );
#line 4748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ct  . cha_statusEffect  . IsState  (EST_ASSIST_INVISIBLE ) 
#line 4749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& IS_FLAG_ON  (state  , EST_ASSIST_INVISIBLE ) 
#line 4750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& _pNetwork  -> m_ubGMLevel  < 2)
#line 4751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlags  (penEntity  -> GetFlags  () | ENF_HIDDEN );
#line 4753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penPlr  = (CPlayer  *) CEntity  :: GetPlayerEntity  (0);
#line 4754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penPlr  -> IsSameTarget  (penEntity ))
#line 4755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penPlr  -> IsSkilling  ()){penPlr  -> CancelSkill  (TRUE  , g_iAutoAttack  , FALSE );penEntity  -> InflictDirectDamage  (penEntity  , penPlr  , DMT_NONE  , 0 , FLOAT3D (0 , 0 , 0) , ANGLE3D (0 , 0 , 0));}
#line 4757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penPlr  -> IsAttacking  ()){penPlr  -> StopAttack  ();}
#line 4758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penPlr  -> SetTargetNull  ();
#line 4759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penPlr  -> m_bLockMove  = FALSE ;
#line 4760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(ct  . cha_statusEffect  . IsState  (EST_ASSIST_INVISIBLE ) && ! IS_FLAG_ON  (state  , EST_ASSIST_INVISIBLE ))
#line 4763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetFlags  (penEntity  -> GetFlags  () & ~ ENF_HIDDEN );
#line 4765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> SetDesiredRotation  (ANGLE3D (0 , 0 , 0));
#line 4766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CCharacter  *) penEntity ) -> m_bIdleAnim )
#line 4767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> IdleAnim  ();
#line 4769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ct  . cha_statusEffect  . IsState  (EST_ASSIST_FAKEDEATH ) && IS_FLAG_ON  (state  , EST_ASSIST_FAKEDEATH ))
#line 4772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penPlr  = (CPlayer  *) CEntity  :: GetPlayerEntity  (0);
#line 4774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penPlr  -> IsSameTarget  (penEntity ))
#line 4775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penPlr  -> IsSkilling  ()){penPlr  -> CancelSkill  (TRUE  , g_iAutoAttack  , FALSE );penEntity  -> InflictDirectDamage  (penEntity  , penPlr  , DMT_NONE  , 0 , FLOAT3D (0 , 0 , 0) , ANGLE3D (0 , 0 , 0));}
#line 4777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penPlr  -> IsAttacking  ()){penPlr  -> StopAttack  ();}
#line 4778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penPlr  -> SetTargetNull  ();
#line 4779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penPlr  -> m_bLockMove  = FALSE ;
#line 4780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> en_pmiModelInstance )
#line 4786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CStatusEffect  :: eRelation  rel  = CStatusEffect  :: R_NONE ;
#line 4791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_pEntity  -> IsSecondExtraFlagOn  (ENF_EX2_MYPARTY )){rel  = CStatusEffect  :: R_PARTY ;}
#line 4792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . ChangeStatus  (& penEntity  -> en_pmiModelInstance  -> m_tmSkaTagManager  , state  , rel );
#line 4793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERTALWAYS  ("Character must have ska model and tag manager.");
#line 4797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_ACTION : 
#line 4806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  action_type ;
#line 4808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  action_id ;
#line 4809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  state ;
#line 4811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> cha_index ;
#line 4812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> action_type ;
#line 4813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> action_id ;
#line 4814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> state ;
#line 4816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cha_index  == _pNetwork  -> MyCharacterInfo  . index )
#line 4817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 4820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(action_id )
#line 4821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_PK : 
#line 4823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((state  & PLAYER_STATE_PKMODE ) && (state  & PLAYER_STATE_PKMODEDELAY ))
#line 4824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (693 , "10초 후에 PK모드가 해제됩니다."));
#line 4827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . pk_mode  = 2;
#line 4829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(state  & PLAYER_STATE_PKMODE )
#line 4831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  && 
#line 4833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  -> IsCharacter  ())
#line 4834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 4836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 4837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bIsPvp ){_pNetwork  -> SetPvpMode  ();}
#line 4840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (694 , "PK 모드를 선언하였습니다!\n"));
#line 4841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . pk_mode  = 1;
#line 4843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_bIsPvp ){_pNetwork  -> SetPvpMode  ();}
#line 4847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (695 , "PK 모드가 해제되었습니다!\n"));
#line 4848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . pk_mode  = 0;
#line 4849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage );
#line 4851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  : 
#line 4853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();ipl  ++)
#line 4860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl  ];
#line 4863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == cha_index )
#line 4864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . SetChaState  (state );
#line 4866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (ct  . cha_iClientIndex  , penEntity ))
#line 4867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nPlayActionNum  = (SLONG ) action_id ;
#line 4870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(action_id )
#line 4871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_GREET : 
#line 4873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_SMILE : 
#line 4874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_CRY : 
#line 4875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_NUMBER_ONE : 
#line 4876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_HANDCLAP : 
#line 4877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_REFUSE : 
#line 4878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_GOOD_LOOKS : 
#line 4879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_GOOD_LOOKS2 : 
#line 4880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_BANTER : 
#line 4881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_CHEER : 
#line 4882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_COMBAT : 
#line 4883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_SUBMISSION : 
#line 4884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_WATER_SPREAD : 
#line 4885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> ActionNow  ();
#line 4886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_SITDOWN : 
#line 4890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(state  & PLAYER_STATE_SITDOWN )
#line 4891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nSitDown  = 2;
#line 4893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nSitDown  = 0;
#line 4897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> ActionNow  ();
#line 4899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_PK : 
#line 4902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((state  & PLAYER_STATE_PKMODE ) && (state  & PLAYER_STATE_PKMODEDELAY ))
#line 4903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkMode  = 2;
#line 4905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(state  & PLAYER_STATE_PKMODE )
#line 4907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkMode  = 1;
#line 4909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 4911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> m_nPkMode  = 0;
#line 4913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity )
#line 4916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> UpdateTargetInfo  (0 , 0 , 
#line 4918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkMode  , 
#line 4919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkState  , 
#line 4920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nLegit );
#line 4921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfoReal  . pen_pEntity  == penEntity )
#line 4923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetTargetInfoReal  (0 , 0 , 
#line 4925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
0 , 
#line 4926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkMode  , 
#line 4927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nPkState  , 
#line 4928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
0 , 
#line 4929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) ((CEntity  *) penEntity )) -> m_nLegit  , 
#line 4930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
& ct 
#line 4931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
);
#line 4932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_SKILL_FIRE : 
#line 4944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  skillIndex ;
#line 4946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  attackID ;
#line 4947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  targetType ;
#line 4948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetID ;
#line 4949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  count ;
#line 4950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  targetType2  [ MAX_TARGETS  ];
#line 4951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetID2  [ MAX_TARGETS  ];
#line 4952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  attackType ;
#line 4953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  skillSpeed ;
#line 4955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackType ;
#line 4956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackID ;
#line 4957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> skillIndex ;
#line 4958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetType ;
#line 4959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetID ;
#line 4961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> count ;
#line 4963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = 0;i  < count ;i  ++)
#line 4964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetType2  [ i  ];
#line 4966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetID2  [ i  ];
#line 4967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> skillSpeed ;
#line 4970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  == 3 || skillIndex  == 32 || skillIndex  == 33 || skillIndex  == 44 
#line 4971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| skillIndex  == 64 || skillIndex  == 123 || skillIndex  == 125 || skillIndex  == 129)
#line 4972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillSpeed  = 0;
#line 4974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackType  == MSG_CHAR_NPC )
#line 4977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_ubGMLevel  > 1)
#line 4979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 4981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (skillIndex );
#line 4983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendChatMessage  (CHATMSG_NORMAL  , CTString ("") , strSysMessage );
#line 4984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackID  == _pNetwork  -> MyCharacterInfo  . index )
#line 4989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 4991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 4993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  == HE_SHINING_ARROW  || 
#line 4994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillIndex  == HE_STORM_ARROW  || 
#line 4995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillIndex  == HE_DOUBLE_STING  || 
#line 4996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillIndex  == 128
#line 4997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 4998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 4999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (attackID  , attackType  , penEntity ))
#line 5003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_dcEnemies  . Add  (penTargetEntity );
#line 5007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (penTargetEntity );
#line 5008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  t  = 0;t  < count ;++ t )
#line 5011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbTargetType  = targetType2  [ t  ];
#line 5013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
LONG  lTargetIndex  = targetID2  [ t  ];
#line 5015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 5016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (lTargetIndex  , sbTargetType  , penTargetEntity ))
#line 5017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_dcEnemies  . Add  (penTargetEntity );
#line 5019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentSkillNum  = skillIndex ;
#line 5022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fSkillSpeed  = (100 - skillSpeed ) / 100.0f;
#line 5023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SkillNow  ();
#line 5024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_SKILL_READY : 
#line 5030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  skillIndex ;
#line 5034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  attackID ;
#line 5035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  targetType ;
#line 5036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetID ;
#line 5037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  attackType ;
#line 5038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  attackIndex  , targetIndex ;
#line 5039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  skillSpeed ;
#line 5041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
attackIndex  = targetIndex  = - 1;
#line 5043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackType ;
#line 5044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackID ;
#line 5045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> skillIndex ;
#line 5046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetType ;
#line 5047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetID ;
#line 5048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> skillSpeed ;
#line 5050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  == 3 || skillIndex  == 32 || skillIndex  == 33 || skillIndex  == 44 
#line 5051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| skillIndex  == 64 || skillIndex  == 123 || skillIndex  == 125 || skillIndex  == 129)
#line 5052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillSpeed  = 0;
#line 5054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackType  == MSG_CHAR_NPC )
#line 5057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
attackIndex  = _pNetwork  -> SearchClientMobIndex  (attackID );
#line 5060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackIndex  != - 1 && _pNetwork  -> ga_World  . EntityExists  (attackIndex  , penEntity ))
#line 5061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_NPC )
#line 5064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> GetSkillData  (skillIndex ) . GetTargetType  () == CSkill  :: STT_SELF_ONE  || 
#line 5066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> GetSkillData  (skillIndex ) . GetTargetType  () == CSkill  :: STT_SELF_RANGE )
#line 5067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (penEntity );
#line 5069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentSkillNum  = skillIndex ;
#line 5070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SkillNow  ();
#line 5071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_pNetwork  -> GetSkillData  (skillIndex ) . GetTargetType  () == CSkill  :: STT_TARGET_ONE )
#line 5075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
targetIndex  = _pNetwork  -> SearchClientMobIndex  (targetID );
#line 5077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetIndex  != - 1 && _pNetwork  -> ga_World  . EntityExists  (targetIndex  , penTargetEntity ))
#line 5078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (penTargetEntity );
#line 5080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentSkillNum  = skillIndex ;
#line 5081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SkillNow  ();
#line 5082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (penTargetEntity );
#line 5093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentSkillNum  = skillIndex ;
#line 5094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SkillNow  ();
#line 5095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackID  == _pNetwork  -> MyCharacterInfo  . index )
#line 5102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  != - 1)
#line 5104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SpellSkill  (skillIndex );
#line 5106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 5107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = TRUE ;
#line 5108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (attackID  , attackType  , penEntity ))
#line 5113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (penTargetEntity );
#line 5117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentSkillNum  = skillIndex ;
#line 5118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fSkillSpeed  = (100 - skillSpeed ) / 100.0f;
#line 5120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  == HE_SHINING_ARROW  || 
#line 5121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillIndex  == HE_STORM_ARROW  || 
#line 5122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillIndex  == HE_DOUBLE_STING  || 
#line 5123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillIndex  == 128
#line 5124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 5125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SkillNow  ();
#line 5127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> PreSkillNow  ();
#line 5131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_SKILL_CANCEL : 
#line 5140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  slChaIndex ;
#line 5142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  attackType ;
#line 5144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  attackIndex ;
#line 5145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
attackIndex  = - 1;
#line 5147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackType ;
#line 5148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> slChaIndex ;
#line 5150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackType  == MSG_CHAR_PC )
#line 5151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(slChaIndex  == _pNetwork  -> MyCharacterInfo  . index )
#line 5153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 5155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (slChaIndex  , attackType  , penEntity ))
#line 5160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackType  == MSG_CHAR_NPC  || attackType  == MSG_CHAR_PET  || attackType  == MSG_CHAR_WILDPET )
#line 5162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 5164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> StopNow  ();
#line 5166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> StopNow  ();
#line 5171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_WEARING : 
#line 5178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> cha_index ;
#line 5180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> wear_pos ;
#line 5181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> item_index ;
#line 5182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  item_plus ;
#line 5183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> item_plus ;
#line 5187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl )
#line 5188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl  ];
#line 5191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == cha_index )
#line 5192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (ct  . cha_iClientIndex  , penEntity ))
#line 5194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(item_index  != - 1)
#line 5196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> WearingArmor  (item_index );
#line 5199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bHead_change )
#line 5205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> TakeOffWearing  (wear_pos  , ipl );
#line 5207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else 
#line 5208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penEntity ) -> TakeOffWearing  (wear_pos );
#line 5210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = ((CCharacter  *) penEntity ) -> GetCurrentPlayerModelInstance  ();
#line 5214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMI )
#line 5215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_itemEffect  . Change  (
#line 5217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_iType  
#line 5218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & _pNetwork  -> GetItemData  (item_index ) 
#line 5219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, wear_pos  
#line 5220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, item_plus  
#line 5221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & pMI  -> m_tmSkaTagManager  
#line 5222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, ct  . cha_sbItemEffectOption  
#line 5223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pNetwork  -> GetItemData  (item_index ) . GetSubType  ()
#line 5224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
);
#line 5226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_state  & PLAYER_STATE_SUPPORTER )
#line 5227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strEffectName  = CTString ("Item_support");
#line 5229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_itemEffect  . AddAccessoryEffect  (strEffectName  , & pMI  -> m_tmSkaTagManager );
#line 5230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_statusEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , CStatusEffect  :: R_NONE );
#line 5233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_GOTO : 
#line 5243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT goto_x ;
#line 5245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT goto_z ;
#line 5246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT goto_h ;
#line 5247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT goto_r ;
#line 5248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  goto_yLayer ;
#line 5250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> goto_x ;
#line 5251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> goto_z ;
#line 5252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> goto_h ;
#line 5253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> goto_r ;
#line 5254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> goto_yLayer ;
#line 5257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> m_checkLock ;
#line 5258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_checkLock  == 1){
#line 5259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = TRUE ;
#line 5260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_timeCnt  = _pTimer  -> GetHighPrecisionTimer  () . GetSeconds  ();
#line 5261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {
#line 5263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 5266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 5267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 5268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 5270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = - 1;
#line 5271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = 0.0f;
#line 5272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSkilling  = FALSE ;
#line 5273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 5274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 5276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 5278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 5280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 5282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . x  = goto_x ;
#line 5286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . z  = goto_z ;
#line 5287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . h  = goto_h ;
#line 5288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . r  = goto_r ;
#line 5289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . yLayer  = goto_yLayer ;
#line 5292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> DeleteAllMob  ();
#line 5296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fCameraAngle  = 0.0f;
#line 5299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 5300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 5301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 5304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDying  = FALSE ;
#line 5305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRcvAtMsg  = TRUE ;
#line 5307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 5308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 5309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 5311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsFlagOn  (ENF_ALIVE ))
#line 5312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GoTo  (_pNetwork  -> MyCharacterInfo  . x  , _pNetwork  -> MyCharacterInfo  . h  + 0.5f , _pNetwork  -> MyCharacterInfo  . z  , 
#line 5314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . r );
#line 5315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_DAMAGE : 
#line 5322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  attackID ;
#line 5324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  damageType ;
#line 5325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  skillIndex ;
#line 5326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  targetType ;
#line 5327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  targetID ;
#line 5328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetHP ;
#line 5329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetMP ;
#line 5330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  targetDamage ;
#line 5331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  targetFlag ;
#line 5332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  attackSpeed ;
#line 5334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackID ;
#line 5335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> damageType ;
#line 5336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> skillIndex ;
#line 5337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetType ;
#line 5338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetID ;
#line 5339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetHP ;
#line 5340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetMP ;
#line 5341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetDamage ;
#line 5342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> attackSpeed ;
#line 5343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> targetFlag ;
#line 5346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(attackID  == _pNetwork  -> MyCharacterInfo  . index )
#line 5347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_NPC )
#line 5350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 5352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowAttackResult  (penTargetEntity  , (SLONG ) targetDamage  , targetFlag  , skillIndex );
#line 5357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penTargetEntity )) -> m_nPreHealth  = targetHP ;
#line 5358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("------%f--Damage Message\n" , _pTimer  -> GetLerpedCurrentTick  ());
#line 5360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 5361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_UIAutoHelp  -> SetInfo  (AU_MOB_KILL );
#line 5363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_UIAutoHelp  -> SetKillMonIndex  (targetID );
#line 5364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 5373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_PC )
#line 5377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_ubGMLevel  > 1)
#line 5379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowAttackResult  (penTargetEntity  , (SLONG ) targetDamage  , targetFlag  , skillIndex );
#line 5382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowAttackResult  (penTargetEntity  , (SLONG ) targetDamage  , targetFlag  , skillIndex );
#line 5388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penTargetEntity )) -> m_nPreHealth  = targetHP ;
#line 5393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 5394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> DeathNow  ();
#line 5396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateUnitInfo  (penTargetEntity  , targetID  , targetHP );
#line 5400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(damageType  != MSG_DAMAGE_REFLEX  && damageType  != MSG_DAMAGE_LINK )
#line 5409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEntity  = NULL ;
#line 5411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (attackID  , MSG_CHAR_PC  , penEntity ))
#line 5412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_PC )
#line 5415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetID  == _pNetwork  -> MyCharacterInfo  . index )
#line 5418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , en_ulID  , TRUE );
#line 5420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ((CUnit  *) penEntity ) -> m_bSkilling )
#line 5421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (this );
#line 5423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> AttackNow  ();
#line 5424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 5427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeathYou  ();
#line 5429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> IsSitting  () && targetFlag  != HITTYPE_MISS )
#line 5433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetCharacterInfo  () -> UseAction  (3);
#line 5435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 5443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 5447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , TRUE );
#line 5449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ))
#line 5453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> AddDamageData  (targetDamage  , targetFlag  , penTargetEntity  -> en_ulID  , TRUE );
#line 5455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 5459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ((CUnit  *) penEntity ) -> m_bSkilling  && skillIndex  == - 1)
#line 5461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetTargetEntity  (penTargetEntity );
#line 5463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetAttackSpeed  (attackSpeed );
#line 5464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> AttackNow  ();
#line 5467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> GetParty  () -> IsPartyMember  (attackID ))
#line 5468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetParty  () -> SetPartyTarget  (attackID  , targetID  , targetType );
#line 5470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_PET ))
#line 5476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CNetworkLibrary  :: sPetInfo  TempPet ;
#line 5478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TempPet  . lIndex  = targetID ;
#line 5479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
std  :: vector  < CNetworkLibrary  :: sPetInfo  > :: iterator  iter  = 
#line 5480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
std  :: find_if  (_pNetwork  -> m_vectorPetList  . begin  () , _pNetwork  -> m_vectorPetList  . end  () , CNetworkLibrary  :: FindPet  (TempPet ));
#line 5481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iter  != _pNetwork  -> m_vectorPetList  . end  ())
#line 5482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* iter ) . lHP  = targetHP ;
#line 5484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPetInfo  () -> GetPetDesc  ();
#line 5485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> m_nPreHealth  = targetHP ;
#line 5490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 5491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_bKillEnemy  = TRUE ;
#line 5493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> SetKillTargetEntity  (penTargetEntity );
#line 5494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> DeathNow  ();
#line 5495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateUnitInfo  (penTargetEntity  , targetID  , targetHP );
#line 5499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_PC )
#line 5508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetID  == _pNetwork  -> MyCharacterInfo  . index )
#line 5511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> IsSitting  () && targetFlag  != HITTYPE_MISS )
#line 5513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetCharacterInfo  () -> UseAction  (3);
#line 5515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 5522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 5526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> m_nPreHealth  = targetHP ;
#line 5531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 5532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> DeathNow  ();
#line 5534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateUnitInfo  (penTargetEntity  , targetID  , targetHP );
#line 5536 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_PC  && 
#line 5543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
targetID  == _pNetwork  -> MyCharacterInfo  . index )
#line 5544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> IsSitting  () && targetFlag  != HITTYPE_MISS )
#line 5546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetCharacterInfo  () -> UseAction  (3);
#line 5548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity  = NULL ;
#line 5555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 5556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> m_nCurrentHealth  = targetHP ;
#line 5560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetType  == MSG_CHAR_PC )
#line 5561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Normal Hit" , _pTimer  -> GetLerpedCurrentTick  () 
#line 5563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, penTargetEntity  -> GetPlacement  () . pl_PositionVector  + FLOAT3D (0 , 1 , 0.5f) 
#line 5564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, ANGLE3D (90 , 0 , 90));
#line 5565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 5568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D posOffset  (0 , 1 , 0.5f);
#line 5570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> GetModelInstance  ())
#line 5571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 5573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTargetEntity  -> GetModelInstance  () -> GetCurrentColisionBox  (aabb );
#line 5574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D size  = aabb  . Size  () * 0.5f;
#line 5575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
posOffset  (2) += size  (2);
#line 5576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
posOffset  (3) += size  (3);
#line 5577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Normal Hit" , _pTimer  -> GetLerpedCurrentTick  () 
#line 5579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, penTargetEntity  -> GetPlacement  () . pl_PositionVector  + posOffset  
#line 5580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, ANGLE3D (90 , 0 , 90));
#line 5581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(targetHP  <= 0)
#line 5584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penTargetEntity ) -> DeathNow  ();
#line 5586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateUnitInfo  (penTargetEntity  , targetID  , targetHP );
#line 5589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 5590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_AT : 
#line 5595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bIsTransform )
#line 5597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJobType  = en_pcCharacter  . pc_iPlayerType ;
#line 5599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSkaModel  (JobInfo  () . GetFileName  (iJobType ));
#line 5600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetModelInstance  ();
#line 5601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMI )
#line 5602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbFaceStyle  = _pNetwork  -> MyCharacterInfo  . faceStyle ;
#line 5604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbHairStyle  = _pNetwork  -> MyCharacterInfo  . hairStyle ;
#line 5605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> SetCharacterAppearance  (pMI  , iJobType  , sbHairStyle  , sbFaceStyle );
#line 5606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  = FALSE ;
#line 5608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bChanging  = FALSE ;
#line 5612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMobChange )
#line 5613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ReturnChange  (TRUE );
#line 5615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iStopChangeItem  = 521;
#line 5616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> DelFromNoticeList  (iStopChangeItem  , NOTICE_POLYMOPH );
#line 5617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> RefreshNoticeList  ();
#line 5618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GoTo  (_pNetwork  -> MyCharacterInfo  . x  , _pNetwork  -> MyCharacterInfo  . h  + 0.5f , _pNetwork  -> MyCharacterInfo  . z  , 
#line 5632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . r );
#line 5633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_OrientationAngle  (1) = _pNetwork  -> MyCharacterInfo  . r ;
#line 5634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDying  = FALSE ;
#line 5635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRcvAtMsg  = TRUE ;
#line 5636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 5637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = 0;
#line 5638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSendStopMessage  = TRUE ;
#line 5639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nLegit  = 0;
#line 5640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStuned  = FALSE ;
#line 5642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AppearWearingWeapon  ();
#line 5644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  ())
#line 5645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetPvpMode  ();
#line 5647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (1) = 0.0f;
#line 5649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlags  (GetFlags  () | ENF_ALIVE );
#line 5652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (EPF_MODEL_WALKING );
#line 5653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetCollisionFlags  (ECF_MODEL );
#line 5656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetModelInstance  ())
#line 5657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaTag  tag ;
#line 5659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__ROOT");
#line 5660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 5661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 5662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__TOP");
#line 5663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 5664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 5665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> GetAllFramesBBox  (aabb );
#line 5666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetPos  (0 , aabb  . Size  () (2) * GetModelInstance  () -> mi_vStretch  (2) , 0);
#line 5667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 5668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == 4)
#line 5674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_UIAutoHelp  -> SetInfo  (AU_MOVE_DRATAN );
#line 5676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowSignBoard  (_pNetwork  -> MyCharacterInfo  . LocalNo );
#line 5682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . LocalNo  = 0;
#line 5686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bConsensus )
#line 5687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . bConsensus  = FALSE ;
#line 5689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_MOVE : 
#line 5697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  movetype ;
#line 5699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  index ;
#line 5700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT speed ;
#line 5701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT x ;
#line 5702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT z ;
#line 5703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT h ;
#line 5704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT r ;
#line 5705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  yLayer ;
#line 5706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  sbAttributePos ;
#line 5707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> movetype ;
#line 5708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> index ;
#line 5709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> speed ;
#line 5710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> x ;
#line 5711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> z ;
#line 5712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> h ;
#line 5713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> r ;
#line 5714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> yLayer ;
#line 5715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(* istr ) >> sbAttributePos ;
#line 5717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (1) = x ;
#line 5718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (2) = h  + 1;
#line 5719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesiredPosition  (3) = z ;
#line 5721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();ipl  ++)
#line 5722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl  ];
#line 5725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == index )
#line 5726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (ct  . cha_iClientIndex  , penEntity ))
#line 5728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . SetyLayer  (yLayer );
#line 5730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbAttributePos  != ATTC_UNWALKABLE )
#line 5731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_sbAttributePos  = sbAttributePos ;
#line 5733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_vDesiredPosition  = vDesiredPosition ;
#line 5736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(movetype  == MSG_MOVE_RUN  || movetype  == MSG_MOVE_WALK )
#line 5737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(speed  < 0)
#line 5741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
speed  = 0.1f;
#line 5743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = speed ;
#line 5746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> MoveNow  ();
#line 5748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bProduction )
#line 5749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AppearWearingWeapon  ();
#line 5751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(movetype  == MSG_MOVE_STOP )
#line 5755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 5756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fMoveSpeed  = 5.0f;
#line 5757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> StopandTeleport  ();
#line 5758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  : 
#line 5767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 5768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 5769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX CPlayer::GenderSound(INDEX iSound) 
#line 6065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return iSound  + m_iGender  * GENDEROFFSET ;
#line 6067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::AddBouble(FLOAT3D vPos,FLOAT3D vSpeedRelative) 
#line 6070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShellLaunchData  & sld  = m_asldData  [ m_iFirstEmptySLD  ];
#line 6072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sld  . sld_vPos  = vPos ;
#line 6073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOATmatrix3D & m  = GetRotationMatrix  ();
#line 6074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vUp  (m  (1 , 2) , m  (2 , 2) , m  (3 , 2));
#line 6075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sld  . sld_vUp  = vUp ;
#line 6076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sld  . sld_vSpeed  = vSpeedRelative  * m ;
#line 6077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sld  . sld_tmLaunch  = _pTimer  -> CurrentTick  ();
#line 6078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sld  . sld_estType  = ESL_BUBBLE ;
#line 6080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iFirstEmptySLD  = (m_iFirstEmptySLD  + 1) % MAX_FLYING_SHELLS ;
#line 6081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ClearShellLaunchData(void) 
#line 6084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iFirstEmptySLD  = 0;
#line 6087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iShell  = 0;iShell  < MAX_FLYING_SHELLS ;iShell  ++){
#line 6088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_asldData  [ iShell  ] . sld_estType  = ESL_NONE ;
#line 6089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_asldData  [ iShell  ] . sld_tmLaunch  = - 100.0f;
#line 6090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::AddBulletSpray(FLOAT3D vPos,EffectParticlesType eptType,FLOAT3D vStretch) 
#line 6094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BulletSprayLaunchData  & bsld  = m_absldData  [ m_iFirstEmptyBSLD  ];
#line 6096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bsld  . bsld_vPos  = vPos ;
#line 6097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bsld  . bsld_vG  = en_vGravityDir ;
#line 6098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bsld  . bsld_eptType  = eptType ;
#line 6099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bsld  . bsld_iRndBase  = FRnd  () * 123456;
#line 6100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bsld  . bsld_tmLaunch  = _pTimer  -> CurrentTick  ();
#line 6101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bsld  . bsld_vStretch  = vStretch ;
#line 6103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iFirstEmptyBSLD  = (m_iFirstEmptyBSLD  + 1) % MAX_BULLET_SPRAYS ;
#line 6104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ClearBulletSprayLaunchData(void) 
#line 6107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iFirstEmptyBSLD  = 0;
#line 6109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iBulletSpray  = 0;iBulletSpray  < MAX_BULLET_SPRAYS ;iBulletSpray  ++)
#line 6110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_absldData  [ iBulletSpray  ] . bsld_tmLaunch  = - 100.0f;
#line 6112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::AddGoreSpray(FLOAT3D vPos,FLOAT3D v3rdPos,SprayParticlesType sptType,FLOAT3D vSpilDirection,
#line 6116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D boxHitted,FLOAT fDamagePower,COLOR colParticles) 
#line 6117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GoreSprayLaunchData  & gsld  = m_agsldData  [ m_iFirstEmptyGSLD  ];
#line 6119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_vPos  = vPos ;
#line 6120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_v3rdPos  = v3rdPos ;
#line 6121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_vG  = en_vGravityDir ;
#line 6122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_fGA  = en_fGravityA ;
#line 6123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_sptType  = sptType ;
#line 6124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_boxHitted  = boxHitted ;
#line 6125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_vSpilDirection  = vSpilDirection ;
#line 6126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_fDamagePower  = fDamagePower ;
#line 6127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_tmLaunch  = _pTimer  -> CurrentTick  ();
#line 6128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_colParticles  = colParticles ;
#line 6130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iFirstEmptyGSLD  = (m_iFirstEmptyGSLD  + 1) % MAX_GORE_SPRAYS ;
#line 6131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ClearGoreSprayLaunchData(void) 
#line 6134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iFirstEmptyGSLD  = 0;
#line 6136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iGoreSpray  = 0;iGoreSpray  < MAX_GORE_SPRAYS ;iGoreSpray  ++)
#line 6137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_agsldData  [ iGoreSpray  ] . gsld_tmLaunch  = - 100.0f;
#line 6139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
   CPlayer::CPlayer(void) 
#line 6143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ClearShellLaunchData  ();
#line 6146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ClearBulletSprayLaunchData  ();
#line 6147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ClearGoreSprayLaunchData  ();
#line 6153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
class CPlayerWeapons * CPlayer::GetPlayerWeapons(void) 
#line 6156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (m_penWeapons  != NULL );
#line 6158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return (CPlayerWeapons  *) & * m_penWeapons ;
#line 6159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
class CPlayerAnimator * CPlayer::GetPlayerAnimator(void) 
#line 6161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (m_penAnimator  != NULL );
#line 6163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return (CPlayerAnimator  *) & * m_penAnimator ;
#line 6164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerSettings * CPlayer::GetSettings(void) 
#line 6167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return (CPlayerSettings  *) en_pcCharacter  . pc_aubAppearance ;
#line 6169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::Copy(CEntity & enOther,ULONG ulFlags) 
#line 6172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: Copy  (enOther  , ulFlags );
#line 6174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penOther  = (CPlayer  *) (& enOther );
#line 6176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl ){
#line 6177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_moRender  . Copy  (penOther  -> m_moRender );
#line 6178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_miRender  . Copy  (penOther  -> m_miRender );
#line 6180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psLevelStats  = penOther  -> m_psLevelStats ;
#line 6183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psLevelTotal  = penOther  -> m_psLevelTotal ;
#line 6184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psGameStats  = penOther  -> m_psGameStats ;
#line 6185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psGameTotal  = penOther  -> m_psGameTotal ;
#line 6186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::UpdateLatency(FLOAT tmLatencyNow) 
#line 6190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tmNow  = _pTimer  -> GetHighPrecisionTimer  () . GetSeconds  ();
#line 6194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmNow  < m_tmLatencyLastAvg  + hud_tmLatencySnapshot ){
#line 6196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLatencyAvgSum  += tmLatencyNow ;
#line 6197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ctLatencyAvg  ++;
#line 6200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ctLatencyAvg  > 0.0f || m_ctLatencyAvg  < 0.0f)
#line 6203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLatency  = m_tmLatencyAvgSum  / m_ctLatencyAvg ;
#line 6205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 6207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLatency  = 0.0f;
#line 6209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLatencyAvgSum  = 0.0f;
#line 6212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ctLatencyAvg  = 0;
#line 6213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLatencyLastAvg  = tmNow ;
#line 6214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this )){
#line 6217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_tmPing  = m_tmLatency ;
#line 6218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
net_tmLatencyAvg  = en_tmPing ;
#line 6219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ValidateCharacter(void) 
#line 6224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bSinglePlayer ){
#line 6228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerSettings  * pps  = (CPlayerSettings  *) en_pcCharacter  . pc_aubAppearance ;
#line 6229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
memset  (pps  -> ps_achModelFile  , 0 , sizeof  (pps  -> ps_achModelFile ));
#line 6230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ParseGender(CTString & strName) 
#line 6234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(strName  . RemovePrefix  ("#male#")){
#line 6236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iGender  = GENDER_MALE ;
#line 6237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(strName  . RemovePrefix  ("#female#")){
#line 6238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iGender  = GENDER_FEMALE ;
#line 6239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iGender  = GENDER_MALE ;
#line 6241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::Write_t(CTStream * ostr,BOOL bNetwork) 
#line 6246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: Write_t  (ostr  , bNetwork );
#line 6249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ostr  -> Write_t  (& m_psLevelStats  , sizeof  (m_psLevelStats ));
#line 6250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ostr  -> Write_t  (& m_psLevelTotal  , sizeof  (m_psLevelTotal ));
#line 6251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ostr  -> Write_t  (& m_psGameStats  , sizeof  (m_psGameStats ));
#line 6252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ostr  -> Write_t  (& m_psGameTotal  , sizeof  (m_psGameTotal ));
#line 6253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::Read_t(CTStream * istr,BOOL bNetwork) 
#line 6256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: Read_t  (istr  , bNetwork );
#line 6259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ClearShellLaunchData  ();
#line 6260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ClearBulletSprayLaunchData  ();
#line 6261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ClearGoreSprayLaunchData  ();
#line 6263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
istr  -> Read_t  (& m_psLevelStats  , sizeof  (m_psLevelStats ));
#line 6264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
istr  -> Read_t  (& m_psLevelTotal  , sizeof  (m_psLevelTotal ));
#line 6265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
istr  -> Read_t  (& m_psGameStats  , sizeof  (m_psGameStats ));
#line 6266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
istr  -> Read_t  (& m_psGameTotal  , sizeof  (m_psGameTotal ));
#line 6269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ValidateCharacter  ();
#line 6270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strDummy ;
#line 6272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl ){
#line 6273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlayerAppearance  (& m_moRender  , & en_pcCharacter  , strDummy  , FALSE );
#line 6274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CreateAnimAndBoneIDs  ();
#line 6276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> StretchModel  (FLOAT3D (0.4f , 0.4f , 0.4f));
#line 6277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlayerAppearanceSka  (& m_miRender  , & en_pcCharacter  , strDummy  , FALSE );
#line 6278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ParseGender  (strDummy );
#line 6287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLastPicked  = - 99.0f;
#line 6288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME CPlayer::GetStatsInGameTimeLevel(void) 
#line 6302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bEndOfLevel ){
#line 6304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_psLevelStats  . ps_tmTime ;
#line 6305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return _pNetwork  -> GetGameTime  () - m_tmLevelStarted ;
#line 6307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME CPlayer::GetStatsInGameTimeGame(void) 
#line 6310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bEndOfLevel ){
#line 6312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_psGameStats  . ps_tmTime ;
#line 6313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_psGameStats  . ps_tmTime  + (_pNetwork  -> GetGameTime  () - m_tmLevelStarted );
#line 6315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CPlayer::GetStatsRealWorldTime(void) 
#line 6319 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
time_t  timeNow ;
#line 6321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bEndOfLevel ){
#line 6322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
timeNow  = m_iEndTime ;
#line 6323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
time  (& timeNow );
#line 6325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return (FLOAT) difftime  (timeNow  , m_iStartTime );
#line 6327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString CPlayer::GetStatsRealWorldStarted(void) 
#line 6330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
struct  tm  * newtime ;
#line 6332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
newtime  = localtime  (& m_iStartTime );
#line 6334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
setlocale  (LC_ALL  , "");
#line 6335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strTimeline ;
#line 6336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
char  achTimeLine  [ 256 ];
#line 6337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strftime  (achTimeLine  , sizeof  (achTimeLine ) - 1 , "%a %x %H:%M" , newtime );
#line 6338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strTimeline  = achTimeLine ;
#line 6339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
setlocale  (LC_ALL  , "C");
#line 6340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return strTimeline ;
#line 6341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::GetStats(CTString & strStats,const CompStatType csType,INDEX ctCharsPerRow) 
#line 6345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::GetShortStats(CTString & strStats) 
#line 6370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  . PrintF  (TRANS  ("%s Kills: %d/%d") , 
#line 6372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TimeToString  (GetStatsInGameTimeLevel  ()) , m_psLevelStats  . ps_iKills  , m_psLevelTotal  . ps_iKills );
#line 6373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::GetDetailStatsDM(CTString & strStats) 
#line 6377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  INDEX SetAllPlayersStats  (INDEX iSortKey );
#line 6379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  CPlayer  * _apenPlayers  [ NET_MAXGAMEPLAYERS  ];
#line 6381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const BOOL bFragMatch  = GetSP  () -> sp_bUseFrags ;
#line 6384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX ctPlayers  = SetAllPlayersStats  (bFragMatch  ? 5 : 3);
#line 6387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "^cFFFFFF%s:^r\n%s" , TRANS  ("TIME") , TimeToString  (_pNetwork  -> GetGameTime  ())));
#line 6388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iMaxFrags  = LowerLimit  (INDEX (0));
#line 6392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iMaxScore  = LowerLimit  (INDEX (0));
#line 6393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{for(INDEX iPlayer  = 0;iPlayer  < ctPlayers ;iPlayer  ++){
#line 6394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penPlayer  = _apenPlayers  [ iPlayer  ];
#line 6395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iMaxFrags  = Max  (iMaxFrags  , penPlayer  -> m_psLevelStats  . ps_iKills );
#line 6397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}}
#line 6400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const CSessionProperties  & sp  = * GetSP  ();
#line 6401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sp  . sp_iTimeLimit  > 0){
#line 6402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fTimeLeft  = ClampDn  (sp  . sp_iTimeLimit  * 60.0f - _pNetwork  -> GetGameTime  () , 0.0f);
#line 6403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "^cFFFFFF%s:^r\n%s" , TRANS  ("TIME LEFT") , TimeToString  (fTimeLeft )));
#line 6404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bFragMatch  && sp  . sp_iFragLimit  > 0){
#line 6407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iFragsLeft  = ClampDn  (sp  . sp_iFragLimit  - iMaxFrags  , INDEX (0));
#line 6408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "^cFFFFFF%s:^r\n%d" , TRANS  ("FRAGS LEFT") , iFragsLeft ));
#line 6409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strRank  = TRANS  ("NO.");
#line 6419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strFrag  = bFragMatch  ? TRANS  ("FRAGS") : TRANS  ("SCORE");
#line 6420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strPing  = TRANS  ("PING");
#line 6421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strName  = TRANS  ("PLAYER");
#line 6422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ctRankChars  = Max  (strRank  . Length  () , INDEX (3));
#line 6423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ctFragChars  = Max  (strFrag  . Length  () , INDEX (7));
#line 6424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ctPingChars  = Max  (strPing  . Length  () , INDEX (5));
#line 6425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ctNameChars  = Max  (strName  . Length  () , INDEX (20));
#line 6428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "^cFFFFFF";
#line 6429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += PadStringRight  (strRank  , ctRankChars ) + " ";
#line 6430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += PadStringLeft  (strFrag  , ctFragChars ) + " ";
#line 6431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += PadStringLeft  (strPing  , ctPingChars ) + " ";
#line 6432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += PadStringRight  (strName  , ctNameChars ) + " ";
#line 6433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "^r";
#line 6434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n\n";
#line 6435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{for(INDEX iPlayer  = 0;iPlayer  < ctPlayers ;iPlayer  ++){
#line 6436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strLine ;
#line 6437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penPlayer  = _apenPlayers  [ iPlayer  ];
#line 6438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iPing  = ceil  (penPlayer  -> en_tmPing  * 1000.0f);
#line 6440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strName  = penPlayer  -> GetPlayerName  ();
#line 6442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += PadStringRight  (CTString (0 , "%d" , iPlayer  + 1) , ctRankChars ) + " ";
#line 6444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += PadStringLeft  (CTString (0 , "%d" , iPing ) , ctPingChars ) + " ";
#line 6445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += PadStringRight  (strName  , ctNameChars ) + " ";
#line 6446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}}
#line 6448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::GetDetailStatsCoop(CTString & strStats) 
#line 6452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "^b" + CenterString  (TRANS  ("YOUR STATS")) + "^r\n";
#line 6455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetDetailStatsSP  (strStats  , 1);
#line 6459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  INDEX SetAllPlayersStats  (INDEX iSortKey );
#line 6460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  CPlayer  * _apenPlayers  [ NET_MAXGAMEPLAYERS  ];
#line 6461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX ctPlayers  = SetAllPlayersStats  (3);
#line 6464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayerStats  psSquadLevel  = PlayerStats  ();
#line 6465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayerStats  psSquadGame  = PlayerStats  ();
#line 6466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{for(INDEX iPlayer  = 0;iPlayer  < ctPlayers ;iPlayer  ++){
#line 6467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penPlayer  = _apenPlayers  [ iPlayer  ];
#line 6469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penPlayer  != NULL );
#line 6470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayerStats  psLevel  = penPlayer  -> m_psLevelStats ;
#line 6471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayerStats  psGame  = penPlayer  -> m_psGameStats ;
#line 6473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
psSquadLevel  . ps_iKills  += psLevel  . ps_iKills ;
#line 6474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
psSquadLevel  . ps_iDeaths  += psLevel  . ps_iDeaths ;
#line 6477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
psSquadGame  . ps_iKills  += psGame  . ps_iKills ;
#line 6478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
psSquadGame  . ps_iDeaths  += psGame  . ps_iDeaths ;
#line 6480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}}
#line 6483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "^b" + CenterString  (TRANS  ("SQUAD TOTAL")) + "^r\n";
#line 6485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += CTString (0 , "^cFFFFFF%s^r" , TranslateConst  (en_pwoWorld  -> GetName  () , 0));
#line 6487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d" , TRANS  ("DEATHS") , psSquadLevel  . ps_iDeaths ));
#line 6491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d/%d" , TRANS  ("KILLS") , psSquadLevel  . ps_iKills  , m_psLevelTotal  . ps_iKills ));
#line 6493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += CTString ("^cFFFFFF") + TRANS  ("TOTAL") + "^r\n";
#line 6500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d" , TRANS  ("DEATHS") , psSquadGame  . ps_iDeaths ));
#line 6501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d/%d" , TRANS  ("KILLS") , psSquadGame  . ps_iKills  , m_psGameTotal  . ps_iKills ));
#line 6503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "^b" + CenterString  (TRANS  ("OTHER PLAYERS")) + "^r\n";
#line 6511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{for(INDEX iPlayer  = 0;iPlayer  < ctPlayers ;iPlayer  ++){
#line 6515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penPlayer  = _apenPlayers  [ iPlayer  ];
#line 6517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penPlayer  == this ){
#line 6519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
continue ;
#line 6520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "^cFFFFFF" + CenterString  (penPlayer  -> GetPlayerName  ()) + "^r\n\n";
#line 6523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penPlayer  -> GetDetailStatsSP  (strStats  , 2);
#line 6524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}}
#line 6526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::GetDetailStatsSP(CTString & strStats,INDEX iCoopType) 
#line 6530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  <= 1)
#line 6532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bEndOfGame )
#line 6534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  <= 1){
#line 6553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "^cFFFFFF%s:^r\n%s" , TRANS  ("STARTED") , GetStatsRealWorldStarted  ()));
#line 6554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "^cFFFFFF%s:^r\n%s" , TRANS  ("PLAYING TIME") , TimeToString  (GetStatsRealWorldTime  ())));
#line 6556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n\n";
#line 6563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += CTString (0 , "^cFFFFFF%s^r" , TranslateConst  (en_pwoWorld  -> GetName  () , 0));
#line 6567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  <= 1){
#line 6569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bEndOfLevel ){
#line 6570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%s" , TRANS  ("ESTIMATED TIME") , TimeToString  (m_tmEstTime )));
#line 6571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d" , TRANS  ("TIME BONUS") , m_iTimeScore ));
#line 6573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d/%d" , TRANS  ("KILLS") , m_psLevelStats  . ps_iKills  , m_psLevelTotal  . ps_iKills ));
#line 6582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  >= 1){
#line 6584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d" , TRANS  ("DEATHS") , m_psLevelStats  . ps_iDeaths  , m_psLevelTotal  . ps_iDeaths ));
#line 6585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  <= 1){
#line 6590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%s" , TRANS  ("TIME") , TimeToString  (GetStatsInGameTimeLevel  ())));
#line 6591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += CTString ("^cFFFFFF") + TRANS  ("TOTAL") + "^r";
#line 6597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d/%d" , TRANS  ("KILLS") , m_psGameStats  . ps_iKills  , m_psGameTotal  . ps_iKills ));
#line 6601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  >= 1){
#line 6603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%d" , TRANS  ("DEATHS") , m_psGameStats  . ps_iDeaths  , m_psGameTotal  . ps_iDeaths ));
#line 6604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  <= 1){
#line 6609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += AlignString  (CTString (0 , "  %s:\n%s" , TRANS  ("GAME TIME") , TimeToString  (GetStatsInGameTimeGame  ())));
#line 6610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += "\n";
#line 6615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCoopType  < 1){
#line 6616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_strLevelStats  != ""){
#line 6617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strStats  += CTString ("^cFFFFFF") + TRANS  ("Per level statistics") + "^r\n\n" + m_strLevelStats ;
#line 6618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SayVoiceMessage(const CTFileName & fnmMessage) 
#line 6623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSettings  () -> ps_ulFlags  & PSF_NOQUOTES ){
#line 6625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 6626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PlayLightAnim(INDEX iAnim,ULONG ulFlags) {
#line 6653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_aoLightAnimation  . GetData  () != NULL ){
#line 6654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_aoLightAnimation  . PlayAnim  (iAnim  , ulFlags );
#line 6655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::AdjustShadingParameters(FLOAT3D & vLightDirection,COLOR & colLight,COLOR & colAmbient) 
#line 6660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_iPCMinBrightness  = Clamp  (g_iPCMinBrightness  , (INDEX) 0 , (INDEX) 255);
#line 6663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bRecalcAmbient  = FALSE ;
#line 6664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bRecalcDiffuse  = FALSE ;
#line 6666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  ubAH  , ubAS  , ubAV ;
#line 6667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ColorToHSV  (colAmbient  , ubAH  , ubAS  , ubAV );
#line 6668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  ubDH  , ubDS  , ubDV ;
#line 6669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ColorToHSV  (colLight  , ubDH  , ubDS  , ubDV );
#line 6671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ubAV  < g_iPCMinBrightness )
#line 6672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  ubAR  , ubAG  , ubAB ;
#line 6674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ColorToRGB  (colAmbient  , ubAR  , ubAG  , ubAB );
#line 6675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ubAR  = g_iPCMinBrightness ;
#line 6676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ubAG  = g_iPCMinBrightness ;
#line 6677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ubAB  = g_iPCMinBrightness ;
#line 6678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ColorToHSV  (RGBToColor  (ubAR  , ubAG  , ubAB ) , ubAH  , ubAS  , ubAV );
#line 6679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bRecalcAmbient  = TRUE ;
#line 6680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ubAV  < ubDV  && g_iChaLightModifyValue  < ubDV  - ubAV )
#line 6682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX value  = (ubDV  - ubAV  - g_iChaLightModifyValue ) >> 1;
#line 6684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ubDV  = Clamp  (INDEX (ubDV ) - value  , INDEX (0) , INDEX (255));
#line 6685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ubAV  = Clamp  (INDEX (ubAV ) + value  , INDEX (0) , INDEX (255));
#line 6686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bRecalcAmbient  = bRecalcDiffuse  = TRUE ;
#line 6687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bRecalcDiffuse ){colLight  = HSVToColor  (ubDH  , ubDS  , ubDV );}
#line 6690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bRecalcAmbient ){colAmbient  = HSVToColor  (ubAH  , ubAS  , ubAV );}
#line 6720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return CPlayerEntity  :: AdjustShadingParameters  (vLightDirection  , colLight  , colAmbient );
#line 6721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelObject * CPlayer::GetModelForRendering(void) 
#line 6725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_INITIALIZED )){
#line 6729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return GetModelObject  ();
#line 6730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plView ;
#line 6734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . Lerp  (en_plLastViewpoint  , en_plViewpoint  , _pTimer  -> GetLerpFactor  ());
#line 6738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . OnPreRender  ();
#line 6740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_moRender  . Synchronize  (* GetModelObject  ());
#line 6749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmNow  = en_tmEntityTime ;
#line 6751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFading  = 1.0f;
#line 6752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_tmFadeStart  != 0){
#line 6753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFactor  = (tmNow  - m_tmFadeStart ) / 5.0f;
#line 6754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFactor  = Clamp  (fFactor  , 0.0f , 1.0f);
#line 6755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFading  *= fFactor ;
#line 6756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmSpawnInvulnerability  = GetSP  () -> sp_tmSpawnInvulnerability ;
#line 6760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmSpawnInvulnerability  > 0 && tmNow  - m_tmSpawned  < tmSpawnInvulnerability ){
#line 6762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDelta  = tmNow  - m_tmSpawned ;
#line 6763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFading  *= 0.75f + 0.25f * Sin  (fDelta  / 0.5f * 360);
#line 6764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colAlpha  = m_moRender  . mo_colBlendColor ;
#line 6767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) + (COLOR (fFading  * 0xff) & 0xff);
#line 6768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_moRender  . mo_colBlendColor  = colAlpha ;
#line 6771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ulFlags  & PLF_NOTCONNECTED ){
#line 6773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFading  *= 0.25f + 0.25f * Sin  (tmNow  / 2.0f * 360);
#line 6775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(m_tmInvisibility  > tmNow ){
#line 6776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fIntensity  = 0.0f;
#line 6777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((m_tmInvisibility  - tmNow ) < 3.0f)
#line 6778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  = 0.5f - 0.5f * cos  ((m_tmInvisibility  - tmNow ) * (6.0f * 3.1415927f / 3.0f));
#line 6780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_ulPlayerRenderingMask  == 1 << GetMyPlayerIndex  ()){
#line 6782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) | (INDEX) (INVISIBILITY_ALPHA_LOCAL  + (FLOAT) (254 - INVISIBILITY_ALPHA_LOCAL ) * fIntensity );
#line 6783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(TRUE ){
#line 6784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((m_tmInvisibility  - tmNow ) < 1.28f){
#line 6785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) | (INDEX) (INVISIBILITY_ALPHA_REMOTE  + (FLOAT) (254 - INVISIBILITY_ALPHA_REMOTE ) * fIntensity );
#line 6786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(TRUE ){
#line 6787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) | INVISIBILITY_ALPHA_REMOTE ;
#line 6788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_moRender  . mo_colBlendColor  = colAlpha ;
#line 6791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return & m_moRender ;
#line 6795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * CPlayer::GetModelInstanceForRendering(void) 
#line 6799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return GetModelInstance  ();
#line 6808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plView ;
#line 6810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . Lerp  (en_plLastViewpoint  , en_plViewpoint  , _pTimer  -> GetLerpFactor  ());
#line 6813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . OnPreRender  ();
#line 6815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_miRender  . Synchronize  (* GetModelInstance  ());
#line 6817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmNow  = en_tmEntityTime ;
#line 6819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFading  = 1.0f;
#line 6820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_tmFadeStart  != 0){
#line 6821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFactor  = (tmNow  - m_tmFadeStart ) / 5.0f;
#line 6822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFactor  = Clamp  (fFactor  , 0.0f , 1.0f);
#line 6823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFading  *= fFactor ;
#line 6824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmSpawnInvulnerability  = GetSP  () -> sp_tmSpawnInvulnerability ;
#line 6828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmSpawnInvulnerability  > 0 && tmNow  - m_tmSpawnedForInv  < tmSpawnInvulnerability ){
#line 6830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDelta  = tmNow  - m_tmSpawnedForInv ;
#line 6831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFading  *= 0.75f + 0.25f * Sin  (fDelta  / 0.5f * 360);
#line 6832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colAlpha  = m_miRender  . mi_colModelColor ;
#line 6835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) + (COLOR (fFading  * 0xff) & 0xff);
#line 6836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_miRender  . mi_colModelColor  = colAlpha ;
#line 6839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ulFlags  & PLF_NOTCONNECTED ){
#line 6841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFading  *= 0.25f + 0.25f * Sin  (tmNow  / 2.0f * 360);
#line 6843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(m_tmInvisibility  > tmNow ){
#line 6844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fIntensity  = 0.0f;
#line 6845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((m_tmInvisibility  - tmNow ) < 3.0f)
#line 6846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  = 0.5f - 0.5f * cos  ((m_tmInvisibility  - tmNow ) * (6.0f * 3.1415927f / 3.0f));
#line 6848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_ulPlayerRenderingMask  == 1 << GetMyPlayerIndex  ()){
#line 6850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) | (INDEX) (INVISIBILITY_ALPHA_LOCAL  + (FLOAT) (254 - INVISIBILITY_ALPHA_LOCAL ) * fIntensity );
#line 6851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(TRUE ){
#line 6852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((m_tmInvisibility  - tmNow ) < 1.28f){
#line 6853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) | (INDEX) (INVISIBILITY_ALPHA_REMOTE  + (FLOAT) (254 - INVISIBILITY_ALPHA_REMOTE ) * fIntensity );
#line 6854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(TRUE ){
#line 6855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colAlpha  = (colAlpha  & 0xffffff00) | INVISIBILITY_ALPHA_REMOTE ;
#line 6856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_miRender  . mi_colModelColor  = colAlpha ;
#line 6859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return & m_miRender ;
#line 6863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
class CPlayerActionMarker * CPlayer::GetActionMarker(void) {
#line 6868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return (CPlayerActionMarker  *) & * m_penActionMarker ;
#line 6869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::FindMusicHolder(void) 
#line 6873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penMainMusicHolder  == NULL ){
#line 6875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penMainMusicHolder  = _pNetwork  -> GetEntityWithName  ("MusicHolder" , 0);
#line 6876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::UpdateLevelStats(void) 
#line 6881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psLevelStats  = PlayerStats  ();
#line 6886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penMainMusicHolder  == NULL ){
#line 6887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 6888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMusicHolder  & mh  = (CMusicHolder  &) * m_penMainMusicHolder ;
#line 6892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mh  . m_ctEnemiesInWorld  == 0){
#line 6893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mh  . CountEnemies  ();
#line 6894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psLevelTotal  . ps_iKills  = mh  . m_ctEnemiesInWorld ;
#line 6897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psGameTotal  . ps_iKills  += mh  . m_ctEnemiesInWorld ;
#line 6900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsFuss(void) 
#line 6904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penMainMusicHolder  == NULL ){
#line 6908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 6909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ((CMusicHolder  *) & * m_penMainMusicHolder ) -> m_cenFussMakers  . Count  () > 0;
#line 6912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetDefaultMouthPitch(void) 
#line 6915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soMouth  . Set3DParameters  (50.0f , 10.0f , 1.0f , 1.0f);
#line 6917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetRandomMouthPitch(FLOAT fMin,FLOAT fMax) 
#line 6919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soMouth  . Set3DParameters  (50.0f , 10.0f , 1.0f , Lerp  (fMin  , fMax  , FRnd  ()));
#line 6921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ApplyShaking(CPlacement3D & plViewer) 
#line 6925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fT  = _pTimer  -> GetLerpedCurrentTick  ();
#line 6928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fT  < m_tmChainShakeEnd )
#line 6929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fChainsawShakeDX  = 0.03f * m_fChainShakeStrength  * SinFast  (fT  * m_fChainShakeFreqMod  * 3300.0f);
#line 6931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fChainsawShakeDY  = 0.03f * m_fChainShakeStrength  * SinFast  (fT  * m_fChainShakeFreqMod  * 2900.0f);
#line 6933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plViewer  . pl_PositionVector  (1) += m_fChainsawShakeDX ;
#line 6934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plViewer  . pl_PositionVector  (3) += m_fChainsawShakeDY ;
#line 6935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CWorldSettingsController  * pwsc  = GetWSC  (this );
#line 6938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pwsc  == NULL  || pwsc  -> m_tmShakeStarted  < 0){
#line 6939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 6940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tm  = _pTimer  -> GetLerpedCurrentTick  () - pwsc  -> m_tmShakeStarted ;
#line 6943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tm  < 0){
#line 6944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 6945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDistance  = (plViewer  . pl_PositionVector  - pwsc  -> m_vShakePos ) . Length  ();
#line 6947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fIntensity  = IntensityAtDistance  (pwsc  -> m_fShakeFalloff  , 0 , fDistance );
#line 6948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fShakeY  , fShakeB  , fShakeZ ;
#line 6949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! pwsc  -> m_bShakeFadeIn ){
#line 6950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fShakeY  = SinFast  (tm  * pwsc  -> m_tmShakeFrequencyY  * 360.0f) * 
#line 6951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
exp  (- tm  * (pwsc  -> m_fShakeFade )) * 
#line 6952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  * pwsc  -> m_fShakeIntensityY ;
#line 6953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fShakeB  = SinFast  (tm  * pwsc  -> m_tmShakeFrequencyB  * 360.0f) * 
#line 6954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
exp  (- tm  * (pwsc  -> m_fShakeFade )) * 
#line 6955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  * pwsc  -> m_fShakeIntensityB ;
#line 6956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fShakeZ  = SinFast  (tm  * pwsc  -> m_tmShakeFrequencyZ  * 360.0f) * 
#line 6957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
exp  (- tm  * (pwsc  -> m_fShakeFade )) * 
#line 6958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  * pwsc  -> m_fShakeIntensityZ ;
#line 6959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 6960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT ootm  = 1.0f / tm ;
#line 6961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fShakeY  = SinFast  (tm  * pwsc  -> m_tmShakeFrequencyY  * 360.0f) * 
#line 6962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
exp  ((tm  - 2) * ootm  * (pwsc  -> m_fShakeFade )) * 
#line 6963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  * pwsc  -> m_fShakeIntensityY ;
#line 6964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fShakeB  = SinFast  (tm  * pwsc  -> m_tmShakeFrequencyB  * 360.0f) * 
#line 6965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
exp  ((tm  - 2) * ootm  * (pwsc  -> m_fShakeFade )) * 
#line 6966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  * pwsc  -> m_fShakeIntensityB ;
#line 6967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fShakeZ  = SinFast  (tm  * pwsc  -> m_tmShakeFrequencyZ  * 360.0f) * 
#line 6968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
exp  ((tm  - 2) * ootm  * (pwsc  -> m_fShakeFade )) * 
#line 6969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fIntensity  * pwsc  -> m_fShakeIntensityZ ;
#line 6970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plViewer  . pl_PositionVector  (2) += fShakeY ;
#line 6972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plViewer  . pl_PositionVector  (3) += fShakeZ ;
#line 6973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plViewer  . pl_OrientationAngle  (3) += fShakeB ;
#line 6975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR CPlayer::GetWorldGlaring(void) 
#line 6978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CWorldSettingsController  * pwsc  = GetWSC  (this );
#line 6980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pwsc  == NULL  || pwsc  -> m_tmGlaringStarted  < 0){
#line 6981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return 0;
#line 6982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tm  = _pTimer  -> GetLerpedCurrentTick  ();
#line 6984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRatio  = CalculateRatio  (tm  , pwsc  -> m_tmGlaringStarted  , pwsc  -> m_tmGlaringEnded  , 
#line 6985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pwsc  -> m_fGlaringFadeInRatio  , pwsc  -> m_fGlaringFadeOutRatio );
#line 6986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colResult  = (pwsc  -> m_colGlade  & 0xFFFFFF00) | (UBYTE  (fRatio  * 255.0f));
#line 6987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return colResult ;
#line 6988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 6990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderHudPicFX(CDrawPort * pdp) 
#line 6991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CWorldSettingsController  * pwsc  = GetWSC  (this );
#line 6993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pwsc  != NULL  && pwsc  -> m_penHudPicFXHolder  != NULL )
#line 6994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 6995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CHudPicHolder  & hpfx  = (CHudPicHolder  &) * pwsc  -> m_penHudPicFXHolder ;
#line 6996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
hpfx  . HudPic_Render  (& hpfx  , pdp );
#line 6997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 6998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetupView(CDrawPort * pdp,CAnyProjection3D & apr,CEntity * & penViewer,
#line 7006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D & plViewer,COLOR & colBlend,BOOL bCamera) 
#line 7007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetLerpedAbsoluteViewPlacement  (plViewer );
#line 7014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iViewState  = m_iViewState ;
#line 7015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CFixedCameraField  * pField  = FindPlayerInCameraField  (this );
#line 7016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pField  && pField  -> m_penMarker )
#line 7017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iViewState  = PVT_SCENECAMERA ;
#line 7019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plViewer  = (pField  -> m_penMarker ) -> GetPlacement  ();
#line 7020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penViewer  = pField  -> m_penMarker ;
#line 7021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = penViewer ;
#line 7022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bInFixedCamera  = TRUE ;
#line 7023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penViewer  = GetViewEntity  (FALSE );
#line 7031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bInFixedCamera )
#line 7032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bInFixedCamera  = FALSE ;
#line 7034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = NULL ;
#line 7035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  != NULL  && bCamera )
#line 7038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iViewState  = PVT_SCENECAMERA ;
#line 7040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plViewer  = m_penCamera  -> GetLerpedPlacement  ();
#line 7041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penViewer  = m_penCamera ;
#line 7042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPerspectiveProjection3D  prPerspectiveProjection ;
#line 7047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fMinFOV  = 1.0f;
#line 7048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fStdFOV  = 90.0f;
#line 7049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fMaxFOV  = _bSeparatedTripleHead  ? 120.0f : 160.0f;
#line 7050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gfx_fTripleHeadFOVBias  = Clamp  (gfx_fTripleHeadFOVBias  , 1.0f , 1.75f);
#line 7051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFOVBias  = 1.0f;
#line 7052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bTripleHead )
#line 7053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bSeparatedTripleHead )
#line 7055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFOVBias  = 1.0f / gfx_fTripleHeadFOVBias ;
#line 7057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFOVBias  = gfx_fTripleHeadFOVBias ;
#line 7061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fFOV  = Clamp  (plr_fFOV  , fMinFOV  , fMaxFOV );
#line 7064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE aFOV  = plr_fFOV ;
#line 7087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CameraEffect  (GetPlacement  () , plViewer );
#line 7088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aFOV  *= fFOVBias ;
#line 7091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fMinFCD  = 0.06f;
#line 7092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fMaxFCD  = 0.25f;
#line 7093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fFrontClipDistance  = Clamp  (plr_fFrontClipDistance  , 0.05f , 0.50f);
#line 7094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! GetSP  () -> sp_bSinglePlayer  && ! GetSP  () -> sp_bCooperative )
#line 7095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fFrontClipDistance  = 0.25;
#line 7097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFCD  = plr_fFrontClipDistance ;
#line 7100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fAllowFCD  = fMaxFCD  - (aFOV  - fStdFOV ) / (fMaxFOV  - fStdFOV ) * (fMaxFCD  - fMinFCD );
#line 7101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFCD  = Min  (fFCD  , fAllowFCD );
#line 7102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pstState  == PST_SWIM  && iViewState  == PVT_PLAYEREYES ){fFCD  *= 0.666f;}
#line 7104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fFarClipDistance  = Clamp  (plr_fFarClipDistance  , plr_fFrontClipDistance  + 1.0f , 32768.0f);
#line 7105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFarCD  = plr_fFarClipDistance ;
#line 7107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colBlend  = 0;
#line 7108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iViewState  == PVT_SCENECAMERA )
#line 7109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCamera  * pcm  = (CCamera  *) & * m_penCamera ;
#line 7111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prPerspectiveProjection  . FOVL  () = 
#line 7112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Lerp  (pcm  -> m_fLastFOV  , pcm  -> m_fFOV  , _pTimer  -> GetLerpFactor  ());
#line 7113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pcm  -> m_tmDelta  > 0.001f)
#line 7114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFactor  = (_pTimer  -> GetLerpedCurrentTick  () - pcm  -> m_tmAtMarker ) / pcm  -> m_tmDelta ;
#line 7116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fFactor  = Clamp  (fFactor  , 0.0f , 1.0f);
#line 7117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colBlend  = LerpColor  (pcm  -> m_colFade0  , pcm  -> m_colFade1  , fFactor );
#line 7118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
colBlend  = pcm  -> m_colFade0 ;
#line 7122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prPerspectiveProjection  . FOVL  () = aFOV ;
#line 7127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prPerspectiveProjection  . ScreenBBoxL  () = FLOATaabbox2D  (FLOAT2D  (0.0f , 0.0f) , 
#line 7129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT2D  ((FLOAT) pdp  -> GetWidth  () , (FLOAT) pdp  -> GetHeight  ()));
#line 7130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prPerspectiveProjection  . FrontClipDistanceL  () = fFCD ;
#line 7131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prPerspectiveProjection  . FarClipDistanceL  () = fFarCD ;
#line 7132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prPerspectiveProjection  . AspectRatioL  () = 1.0f;
#line 7134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  = prPerspectiveProjection ;
#line 7135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  -> ViewerPlacementL  () = plViewer ;
#line 7136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  -> ObjectPlacementL  () = CPlacement3D (FLOAT3D (0 , 0 , 0) , ANGLE3D (0 , 0 , 0));
#line 7137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  -> Prepare  ();
#line 7138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prPlayerProjection  = apr ;
#line 7140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ListenFromEntity(CEntity * penListener,const CPlacement3D & plSound) 
#line 7144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATmatrix3D mRotation ;
#line 7146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MakeRotationMatrixFast  (mRotation  , plSound  . pl_OrientationAngle );
#line 7147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_penEntity  = penListener ;
#line 7148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_vPosition  = plSound  . pl_PositionVector ;
#line 7149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_mRotation  = mRotation ;
#line 7150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_vSpeed  = en_vCurrentTranslationAbsolute ;
#line 7151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_fVolume  = 1.0f;
#line 7154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pstState  == PST_DIVE ){
#line 7156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_eEnvType  = SEFX_UNDERWATER ;
#line 7157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_fFilter  = 10.0f;
#line 7158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 7160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iEnv  = 0;
#line 7161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CBrushSector  * pbsc  = penListener  -> GetSectorFromPoint  (plSound  . pl_PositionVector );
#line 7162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pbsc  != NULL ){iEnv  = pbsc  -> GetEnvironmentType  ();}
#line 7163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEnvironmentType  & et  = GetWorld  () -> wo_aetEnvironmentTypes  [ iEnv  ];
#line 7164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_eEnvType  = (SndEnvFX ) et  . et_iType ;
#line 7165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sliSound  . sli_fFilter  = 0.0f;
#line 7166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pSound  -> Listen  (sliSound );
#line 7170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderDummyView(CDrawPort * pdp) 
#line 7174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> Fill  (C_BLACK  | CT_OPAQUE );
#line 7179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! GetSP  () -> sp_bSinglePlayer ){
#line 7181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PIX  pixDPWidth  = pdp  -> GetWidth  ();
#line 7182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PIX  pixDPHeight  = pdp  -> GetHeight  ();
#line 7183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fScale  = (FLOAT) pixDPHeight  / 480.0f;
#line 7184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetFont  (_pfdDisplayFont );
#line 7185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetTextScaling  (fScale  / 2);
#line 7186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetTextAspect  (1.0f);
#line 7187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetTextShadow  (+ 2);
#line 7188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strMsg ;
#line 7189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMsg  . PrintF  (TRANS  ("%s connected") , GetPlayerName  ());
#line 7190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> PutTextCXY  (strMsg  , pixDPWidth  * 0.5f , pixDPHeight  * 0.5f , SE_COL_BLUE_NEUTRAL_LT  | CT_OPAQUE );
#line 7191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderPlayerView(CDrawPort * pdp,BOOL bShowExtras) 
#line 7201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CAnyProjection3D  apr ;
#line 7203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penViewer ;
#line 7204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plViewer ;
#line 7205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colBlend ;
#line 7208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iEye  = STEREO_LEFT ;iEye  <= (Stereo_IsEnabled  () ? STEREO_RIGHT  : STEREO_LEFT );iEye  ++)
#line 7209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_SetBuffer  (iEye );
#line 7212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_ulPlayerRenderingMask  = 1 << GetMyPlayerIndex  ();
#line 7213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bTripleHead  = pdp  -> IsTripleHead  ();
#line 7214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bSeparatedTripleHead  = pdp  -> IsTripleHead  () && _pShell  -> GetINDEX  ("gfx_bSeparateTripleHead") != 0;
#line 7217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bSeparatedTripleHead )
#line 7218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpL  (pdp  , - 1);
#line 7221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetupView  (& dpL  , apr  , penViewer  , plViewer  , colBlend  , FALSE );
#line 7222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fFOV  = ((CPerspectiveProjection3D  &) * apr ) . FOVR  ();
#line 7223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  -> ViewerPlacementL  () . Rotate_Airplane  (ANGLE3D (+ fFOV  , 0 , 0));
#line 7224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , iEye  , 1);
#line 7225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpL  . SetAsCurrent  ();
#line 7226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderView  (* en_pwoWorld  , * penViewer  , apr  , dpL );
#line 7228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpR  (pdp  , + 1);
#line 7229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetupView  (& dpR  , apr  , penViewer  , plViewer  , colBlend  , FALSE );
#line 7230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  -> ViewerPlacementL  () . Rotate_Airplane  (ANGLE3D (- fFOV  , 0 , 0));
#line 7231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , iEye  , 1);
#line 7232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpR  . SetAsCurrent  ();
#line 7233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderView  (* en_pwoWorld  , * penViewer  , apr  , dpR );
#line 7235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpC  (pdp  , 0);
#line 7236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetupView  (& dpC  , apr  , penViewer  , plViewer  , colBlend  , FALSE );
#line 7237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , iEye  , 1);
#line 7238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpC  . SetAsCurrent  ();
#line 7239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderView  (* en_pwoWorld  , * penViewer  , apr  , dpC );
#line 7240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetupView  (pdp  , apr  , penViewer  , plViewer  , colBlend  , FALSE );
#line 7246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , iEye  , 1);
#line 7247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderView  (* en_pwoWorld  , * penViewer  , apr  , * pdp );
#line 7248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_ulPlayerRenderingMask  = 0;
#line 7251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iEye  == STEREO_LEFT ){
#line 7253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ListenFromEntity  (this  , plViewer );
#line 7254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpCenter  (pdp  , 0);
#line 7258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpCenter  . SetAsCurrent  ();
#line 7259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetupView  (& dpCenter  , apr  , penViewer  , plViewer  , colBlend  , FALSE );
#line 7260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , iEye  , 1);
#line 7265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderHudPicFX  (& dpCenter );
#line 7267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(hud_bShowAll  && bShowExtras )
#line 7268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plLight  (_vViewerLightDirection  , ANGLE3D (0 , 0 , 0));
#line 7271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plLight  . AbsoluteToRelative  (plViewer );
#line 7272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderHUD  (* (CPerspectiveProjection3D  *) (CProjection3D  *) apr  , & dpCenter  , 
#line 7273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plLight  . pl_PositionVector  , _colViewerLight  , _colViewerAmbient  , 
#line 7274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penViewer  == this  && (GetFlags  () & ENF_ALIVE ) , iEye );
#line 7275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetAsCurrent  ();
#line 7280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_apr  = apr ;
#line 7282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_SetBuffer  (STEREO_BOTH );
#line 7288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PIX  pixDPWidth  = pdp  -> GetWidth  ();
#line 7289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PIX  pixDPHeight  = pdp  -> GetHeight  ();
#line 7290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fScale  = (FLOAT) pixDPHeight  / 480.0f;
#line 7321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () < m_tmAnalyseEnd ){
#line 7322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetFont  (_pfdDisplayFont );
#line 7323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetTextScaling  (fScale  / 2);
#line 7324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetTextAspect  (1.0f);
#line 7325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetTextShadow  (+ 2);
#line 7326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  ubA  = int  (sin  (_pTimer  -> CurrentTick  () * 10.0f) * 127 + 128);
#line 7327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> PutTextCXY  (TRANS  ("Analyzing...") , pixDPWidth  * 0.5f , pixDPHeight  * 0.2f , SE_COL_BLUE_NEUTRAL_LT  | ubA );
#line 7328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderCameraView(CDrawPort * pdp,BOOL bListen) 
#line 7333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpCamera ;
#line 7335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  * pdpCamera  = pdp ;
#line 7336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  != NULL  && ((CCamera  &) * m_penCamera ) . m_bWideScreen )
#line 7337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> MakeWideScreen  (& dpCamera );
#line 7339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  = & dpCamera ;
#line 7340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  -> SetAsCurrent  ();
#line 7344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CAnyProjection3D  apr ;
#line 7345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penViewer ;
#line 7347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plViewer ;
#line 7348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colBlend ;
#line 7351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iEye  = STEREO_LEFT ;iEye  <= (Stereo_IsEnabled  () ? STEREO_RIGHT  : STEREO_LEFT );iEye  ++)
#line 7352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetupView  (pdpCamera  , apr  , penViewer  , plViewer  , colBlend  , TRUE );
#line 7357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_SetBuffer  (iEye );
#line 7358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , iEye  , 1);
#line 7361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  BOOL _bWorldEditorApp ;
#line 7362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bLoginProcess  && ! _bWorldEditorApp )
#line 7363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_apr  = apr ;
#line 7365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (IsValidFloat  (plViewer  . pl_OrientationAngle  (1)) && IsValidFloat  (plViewer  . pl_OrientationAngle  (2)) && IsValidFloat  (plViewer  . pl_OrientationAngle  (3)));
#line 7370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_ulPlayerRenderingMask  = 1 << GetMyPlayerIndex  ();
#line 7371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderView  (* en_pwoWorld  , * penViewer  , apr  , * pdpCamera );
#line 7372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_ulPlayerRenderingMask  = 0;
#line 7375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bListen  && iEye  == STEREO_LEFT ){
#line 7376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ListenFromEntity  (penViewer  , plViewer );
#line 7377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_SetBuffer  (STEREO_BOTH );
#line 7381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpCenter  (pdp  , 0);
#line 7382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpCenter  . SetAsCurrent  ();
#line 7387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderHudPicFX  (& dpCenter );
#line 7390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  -> SetAsCurrent  ();
#line 7392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colGlare  = GetWorldGlaring  ();
#line 7393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  ubR  , ubG  , ubB  , ubA ;
#line 7394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ColorToRGBA  (colGlare  , ubR  , ubG  , ubB  , ubA );
#line 7395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ubA  != 0){
#line 7396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  -> dp_ulBlendingRA  += ULONG  (ubR ) * ULONG  (ubA );
#line 7397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  -> dp_ulBlendingGA  += ULONG  (ubG ) * ULONG  (ubA );
#line 7398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  -> dp_ulBlendingBA  += ULONG  (ubB ) * ULONG  (ubA );
#line 7399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  -> dp_ulBlendingA  += ULONG  (ubA );
#line 7400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdpCamera  -> BlendScreen  ();
#line 7403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetAsCurrent  ();
#line 7408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((colBlend  & CT_AMASK ) != 0){
#line 7409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> Fill  (colBlend );
#line 7410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderGameView(CDrawPort * pdp,void * pvUserData) 
#line 7421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bShowExtras  = (ULONG  (pvUserData ) & GRV_SHOWEXTRAS );
#line 7425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_INITIALIZED ) || (m_ulFlags  & PLF_DONTRENDER ))
#line 7426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetAsCurrent  ();
#line 7429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderDummyView  (pdp );
#line 7430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 7431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pvUserData  != 0)
#line 7435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTimerValue  tvNow  = _pTimer  -> GetHighPrecisionTimer  ();
#line 7438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((tvNow  - _tvProbingLast ) . GetSeconds  () < 0.1)
#line 7439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGfx  -> gl_bAllowProbing  = TRUE ;
#line 7442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_tvProbingLast  = tvNow ;
#line 7444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const BOOL bAllowMultiHead  = (GetSP  () -> sp_gmGameMode  != CSessionProperties  :: GM_FLYOVER ) 
#line 7448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (m_penActionMarker  == NULL );
#line 7449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const BOOL bDualHead  = pdp  -> IsDualHead  () && bAllowMultiHead ;
#line 7450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const BOOL bTripleHead  = pdp  -> IsTripleHead  () && bAllowMultiHead ;
#line 7451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const BOOL bMultiHead  = bDualHead  || bTripleHead ;
#line 7454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bMultiHead  || m_penCamera  == NULL )
#line 7455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bDualHead )
#line 7457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpView  (pdp  , 0);
#line 7460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpView  . SetAsCurrent  ();
#line 7461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderPlayerView  (& dpView  , bShowExtras );
#line 7462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderPlayerView  (pdp  , bShowExtras );
#line 7466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  != NULL )
#line 7471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX iMonitor  = (m_penActionMarker  != NULL ) ? 3 : + 1;
#line 7474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpView  (pdp  , iMonitor );
#line 7475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpView  . SetAsCurrent  ();
#line 7477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderCameraView  (& dpView  , ! bDualHead );
#line 7479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bDualHead )
#line 7484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmp_ppenDHPlayer  = this ;
#line 7487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetAsCurrent  ();
#line 7491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PreMoving(void) 
#line 7502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == 0 && GetPlacement  () . pl_PositionVector  (2) < 150.0f)
#line 7510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () >= m_tmNextAmbientOnce )
#line 7512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SpawnBubbles  (10 + INDEX (FRnd  () * 5));
#line 7514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmNextAmbientOnce  = _pTimer  -> CurrentTick  () + 5.0f + FRnd  ();
#line 7515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAnimator  != NULL )
#line 7519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . StoreLast  ();
#line 7521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetFlags  () & ENF_ALIVE  && m_iViewState  == PVT_PLAYERAUTOVIEW )
#line 7525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iViewState  = PVT_PLAYEREYES ;
#line 7527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_vDesiredDirection  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 7532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_vDesiredDirection  . Length  () != 0)
#line 7533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_vDesiredDirection  . Normalize  ();
#line 7535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: PreMoving  ();
#line 7538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::DoMoving(void) 
#line 7542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: DoMoving  ();
#line 7546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsReapplyingActions  ())
#line 7547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAnimator  != NULL )
#line 7549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . AnimateBanking  ();
#line 7551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penView  != NULL )
#line 7554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_penView ) . DoMoving  ();
#line 7556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pen3rdPersonView  != NULL )
#line 7558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_pen3rdPersonView ) . DoMoving  ();
#line 7560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PostMoving(void) 
#line 7566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: PostMoving  ();
#line 7570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_ulFlags  &= ~ ENF_INRENDERING ;
#line 7572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAnimator  != NULL )
#line 7573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . AnimateSoftEyes  ();
#line 7575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetFlags  () & ENF_ALIVE )
#line 7581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plRay ;
#line 7600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_apr  && ! _pInput  -> IsRMouseButtonPressed  ())
#line 7601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plRay  = GetPlayerWeapons  () -> GetMouseHitInformation  (_pInput  -> inp_ptMousePos  , m_apr  , FALSE );
#line 7603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 7604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penCurrent  = GetPlayerWeapons  () -> m_penRayHitNow ;
#line 7607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penCurrent  != NULL  && (penCurrent  -> GetFlags  () & ENF_ALIVE  || penCurrent  -> GetFlags  () & ENF_ITEM ))
#line 7608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT MaxHealth ;
#line 7610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CurrentHealth ;
#line 7611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  Level ;
#line 7612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkMode  = - 1;
#line 7613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkState  , PkLegit ;
#line 7614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SQUAD  llItemSum  = 0;
#line 7615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  * tCT  = NULL ;
#line 7617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MaxHealth  = ((CUnit  *) ((CEntity  *) penCurrent )) -> m_nMaxiHealth ;
#line 7618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CurrentHealth  = ((CUnit  *) ((CEntity  *) penCurrent )) -> m_nCurrentHealth ;
#line 7619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level  = ((CUnit  *) ((CEntity  *) penCurrent )) -> m_nMobLevel ;
#line 7621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penCurrent  -> IsCharacter  ())
#line 7622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level  = 0;
#line 7624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkMode  = ((CCharacter  *) ((CEntity  *) penCurrent )) -> m_nPkMode ;
#line 7625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkState  = ((CCharacter  *) ((CEntity  *) penCurrent )) -> m_nPkState ;
#line 7626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkLegit  = ((CCharacter  *) ((CEntity  *) penCurrent )) -> m_nLegit ;
#line 7628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl )
#line 7629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl  ];
#line 7631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_pEntity  == penCurrent )
#line 7632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tCT  = & ct ;
#line 7634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 7635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penCurrent  -> GetFlags  () & ENF_ITEM )
#line 7639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_aitItem  . Count  ();++ ipl )
#line 7641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItemTarget  & it  = _pNetwork  -> ga_srvServer  . srv_aitItem  [ ipl  ];
#line 7643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(it  . item_pEntity  == penCurrent )
#line 7644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
llItemSum  = it  . item_llCount ;
#line 7646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 7647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penCurrent  -> GetFlags  () & ENF_ITEM )
#line 7652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penCurrent  -> SetTargetInfoReal  (MaxHealth  , CurrentHealth  , 
#line 7654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level  , 
#line 7655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
0 , 
#line 7656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
0 , 
#line 7657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
llItemSum );
#line 7658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(PkMode  != - 1)
#line 7660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tCT  != NULL )
#line 7662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penCurrent  -> SetTargetInfoReal  (MaxHealth  , CurrentHealth  , 
#line 7664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level  , 
#line 7665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkMode  , 
#line 7666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkState  , 
#line 7667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
0 , 
#line 7668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkLegit  , 
#line 7669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tCT 
#line 7670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
);
#line 7671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penCurrent  -> SetTargetInfoReal  (MaxHealth  , CurrentHealth  , 
#line 7678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level );
#line 7679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 7685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsReapplyingActions  ())
#line 7689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pen3rdPersonView  != NULL )
#line 7691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_pen3rdPersonView ) . PostMoving  ();
#line 7693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penView  != NULL )
#line 7695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_penView ) . PostMoving  ();
#line 7697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_APPLIEDACTION ;
#line 7705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_penReference  != NULL  && en_penReference  -> GetRenderType  () == CEntity  :: RT_BRUSH  && (en_penReference  -> GetPhysicsFlags  () & EPF_MOVABLE ))
#line 7706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetParent  (en_penReference );
#line 7710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMovableEntity  * penRef  = ((CMovableEntity  *) (CEntity  *) en_penReference );
#line 7713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penRef  -> m_iPlayerRefCounter  == 0)
#line 7714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penRef  -> ForceFullStop  ();
#line 7717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityMessage  emEntityMessage ;
#line 7719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ())
#line 7720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
emEntityMessage  . WritePlacementNotify  (penRef  -> en_ulID  , TRUE );
#line 7722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ga_srvServer  . SendMessage  (emEntityMessage );
#line 7724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{FOREACHINLIST  (CEntity  , en_lnInParent  , penRef  -> en_lhChildren  , itenChild )
#line 7725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(itenChild  -> en_ulPhysicsFlags  & EPF_MOVABLE )
#line 7727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMovableEntity  * penChild  = ((CMovableEntity  *) (CEntity  *) itenChild );
#line 7730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penChild  -> ForceFullStop  ();
#line 7731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
emEntityMessage  . WritePlacementNotify  (penChild  -> en_ulID  , TRUE );
#line 7732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ga_srvServer  . SendMessage  (emEntityMessage );
#line 7733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}}
#line 7735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penRef  -> m_iPlayerRefCounter  = 5;
#line 7740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iPlayerRefCounter  = 5;
#line 7741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetParent  (NULL );
#line 7746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iPlayerRefCounter  --;
#line 7747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetUnconnected(void) 
#line 7765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ulFlags  & PLF_NOTCONNECTED )
#line 7767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 7769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_NOTCONNECTED ;
#line 7773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ForceFullStop  ();
#line 7774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (GetPhysicsFlags  () & ~ (EPF_TRANSLATEDBYGRAVITY  | EPF_ORIENTEDBYGRAVITY ));
#line 7775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetCollisionFlags  (GetCollisionFlags  () & ~ ((ECBI_BRUSH  | ECBI_MODEL ) << ECB_TEST ));
#line 7776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plLastViewpoint  . pl_OrientationAngle  = en_plViewpoint  . pl_OrientationAngle  = ANGLE3D (0 , 0 , 0);
#line 7778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_STAND  , 0);
#line 7784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetConnected(void) 
#line 7788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_NOTCONNECTED ))
#line 7790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 7792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_NOTCONNECTED ;
#line 7795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (GetPhysicsFlags  () | (EPF_TRANSLATEDBYGRAVITY  | EPF_ORIENTEDBYGRAVITY ));
#line 7796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetCollisionFlags  (GetCollisionFlags  () | ((ECBI_BRUSH  | ECBI_MODEL ) << ECB_TEST ));
#line 7797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsConnected(void)const 
#line 7801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ! (m_ulFlags  & PLF_NOTCONNECTED );
#line 7803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::LeaveStain(BOOL bGrow) 
#line 7812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESpawnEffect  ese ;
#line 7814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vPoint ;
#line 7815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATplane3D vPlaneNormal ;
#line 7816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDistanceToEdge ;
#line 7818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D box ;
#line 7819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetBoundingBox  (box );
#line 7822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetNearestPolygon  (vPoint  , vPlaneNormal  , fDistanceToEdge )){
#line 7824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((vPoint  - GetPlacement  () . pl_PositionVector ) . Length  () < 0.5f 
#line 7825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (m_vLastStain  - vPoint ) . Length  () > 1.0f){
#line 7826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vLastStain  = vPoint ;
#line 7827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fStretch  = box  . Size  () . Length  ();
#line 7828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 7830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bGrow ){
#line 7831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . betType  = BET_BLOODSTAINGROW ;
#line 7832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . vStretch  = FLOAT3D (fStretch  * 1.5f , fStretch  * 1.5f , 1.0f);
#line 7833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 7834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . betType  = BET_BLOODSTAIN ;
#line 7835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . vStretch  = FLOAT3D (fStretch  * 0.75f , fStretch  * 0.75f , 1.0f);
#line 7836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . vNormal  = FLOAT3D (vPlaneNormal );
#line 7838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . vDirection  = FLOAT3D (0 , 0 , 0);
#line 7839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vPos  = vPoint  + ese  . vNormal  / 50.0f * (FRnd  () + 0.5f);
#line 7840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityPointer penEffect  = CreateEntity  (CPlacement3D (vPos  , ANGLE3D (0 , 0 , 0)) , CLASS_BASIC_EFFECT );
#line 7841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEffect  -> Initialize  (ese );
#line 7842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::DamageImpact(enum DamageType dmtType,
#line 7847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDamageAmmount,const FLOAT3D & vHitPoint,const FLOAT3D & vDirection) 
#line 7848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetRenderType  () != RT_MODEL ){
#line 7852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 7853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_ABYSS  || dmtType  == DMT_SPIKESTAB ){
#line 7856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 7857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  = Clamp  (fDamageAmmount  , 0.0f , 5000.0f);
#line 7861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fKickDamage  = fDamageAmmount ;
#line 7862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((dmtType  == DMT_EXPLOSION ) || (dmtType  == DMT_IMPACT ))
#line 7863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fKickDamage  *= 1.5;
#line 7865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_DROWNING  || dmtType  == DMT_CLOSERANGE ){
#line 7867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fKickDamage  /= 10;
#line 7868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_CHAINSAW )
#line 7870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fKickDamage  /= 10;
#line 7872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tmNow  = _pTimer  -> CurrentTick  ();
#line 7876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tmDelta  = tmNow  - m_tmLastDamage ;
#line 7877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLastDamage  = tmNow ;
#line 7880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmDelta  >= _pTimer  -> TickQuantum  * 3){
#line 7881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDamage  = FLOAT3D (0 , 0 , 0);
#line 7882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDirectionFixed ;
#line 7885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDirection  . ManhattanNorm  () > 0.5f){
#line 7886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirectionFixed  = vDirection ;
#line 7887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 7888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirectionFixed  = - en_vGravityDir ;
#line 7889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDamageOld  = m_vDamage ;
#line 7891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDamage  += (vDirectionFixed ) * fKickDamage ;
#line 7893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fOldLen  = vDamageOld  . Length  ();
#line 7894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fNewLen  = m_vDamage  . Length  ();
#line 7895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fOldRootLen  = Sqrt  (fOldLen );
#line 7896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fNewRootLen  = Sqrt  (fNewLen );
#line 7898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fMassFactor  = 200.0f / ((EntityInfo  *) GetEntityInfo  ()) -> fMass ;
#line 7900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (en_ulFlags  & ENF_ALIVE ))
#line 7901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fMassFactor  /= 3;
#line 7903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(dmtType )
#line 7906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case DMT_CLOSERANGE : 
#line 7908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case DMT_CHAINSAW : 
#line 7909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case DMT_DROWNING : 
#line 7910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case DMT_IMPACT : 
#line 7911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case DMT_BRUSH : 
#line 7912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case DMT_BURNING : 
#line 7914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 7915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  :
#line 7916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fOldLen  != 0.0f)
#line 7918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GiveImpulseTranslationAbsolute  (- vDamageOld  / fOldRootLen  * fMassFactor );
#line 7921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GiveImpulseTranslationAbsolute  (m_vDamage  / fNewRootLen  * fMassFactor );
#line 7931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fMaxDamageAmmount  < fDamageAmmount )
#line 7935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fMaxDamageAmmount  = fDamageAmmount ;
#line 7937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((m_tmSpraySpawned  <= _pTimer  -> CurrentTick  () - _pTimer  -> TickQuantum  * 8 || 
#line 7940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSprayDamage  + fDamageAmmount  > 50.0f))
#line 7941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plSpray  = CPlacement3D (vHitPoint  , ANGLE3D (0 , 0 , 0));
#line 7944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penSpray  = CreateEntity  (plSpray  , CLASS_BLOOD_SPRAY );
#line 7945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penSpray  -> SetParent  (this );
#line 7946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESpawnSpray  eSpawnSpray ;
#line 7947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . colBurnColor  = C_WHITE  | CT_OPAQUE ;
#line 7949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fMaxDamageAmmount  > 10.0f)
#line 7950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . fDamagePower  = 3.0f;
#line 7952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_fSprayDamage  + fDamageAmmount  > 50.0f)
#line 7954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . fDamagePower  = 2.0f;
#line 7956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 7958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . fDamagePower  = 1.0f;
#line 7960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . sptType  = SPT_BLOOD ;
#line 7963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . fSizeMultiplier  = 1.0f;
#line 7966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitPointRelative  = vHitPoint  - GetPlacement  () . pl_PositionVector ;
#line 7967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vReflectingNormal ;
#line 7968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetNormalComponent  (vHitPointRelative  , en_vGravityDir  , vReflectingNormal );
#line 7969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vReflectingNormal  . Normalize  ();
#line 7971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vReflectingNormal  (1) /= 5.0f;
#line 7973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vProjectedComponent  = vReflectingNormal  * (vDirection  % vReflectingNormal );
#line 7974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vSpilDirection  = vDirection  - vProjectedComponent  * 2.0f - en_vGravityDir  * 0.5f;
#line 7976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . vDirection  = vSpilDirection ;
#line 7977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSpawnSpray  . eidOwner  = this ;
#line 7980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penSpray  -> Initialize  (eSpawnSpray );
#line 7981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSpraySpawned  = _pTimer  -> CurrentTick  ();
#line 7982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSprayDamage  = 0.0f;
#line 7983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fMaxDamageAmmount  = 0.0f;
#line 7984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 7985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSprayDamage  += fDamageAmmount ;
#line 7986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 7989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ReceiveDamage(CEntity * penInflictor,enum DamageType dmtType,
#line 7990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDamageAmmount,const FLOAT3D & vHitPoint,const FLOAT3D & vDirection) 
#line 7991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 7992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_NONE ){return ;}
#line 7995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penInflictor  == this  && (dmtType  == DMT_CLOSERANGE  || dmtType  == DMT_CHAINSAW  || 
#line 7996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((dmtType  == DMT_EXPLOSION  || dmtType  == DMT_PROJECTILE ) && 
#line 7997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetSP  () -> sp_gdGameDifficulty  <= CSessionProperties  :: GD_EASY ))){
#line 7998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 7999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ulFlags  & PLF_NOTCONNECTED ){
#line 8004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cht_bGod  && CheatsEnabled  ()){return ;}
#line 8011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const TIME  tmDelta  = m_tmInvulnerability  - en_tmEntityTime ;
#line 8012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmDelta  > 0 && dmtType  != DMT_ABYSS  && dmtType  != DMT_TELEPORT ){return ;}
#line 8015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmSpawnInvulnerability  = GetSP  () -> sp_tmSpawnInvulnerability ;
#line 8016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmSpawnInvulnerability  > 0 && en_tmEntityTime  - m_tmSpawned  < tmSpawnInvulnerability ){
#line 8018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_HEAT  && ! (GetFlags  () & ENF_ALIVE )){
#line 8032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDifficultyDamage  = GetSP  () -> sp_fDamageStrength ;
#line 8037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDifficultyDamage  <= 1.0f || penInflictor  != this ){
#line 8038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  *= fDifficultyDamage ;
#line 8039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDamageAmmount  <= 0){
#line 8043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fSubHealth  , fSubArmor ;
#line 8047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_DROWNING ){
#line 8049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fSubHealth  = fDamageAmmount ;
#line 8050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {
#line 8053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fSubArmor  = fDamageAmmount  * 2.0f / 3.0f;
#line 8054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fSubHealth  = fDamageAmmount  - fSubArmor ;
#line 8055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fArmor  -= fSubArmor ;
#line 8056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fArmor  < 0){
#line 8057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fSubHealth  -= m_fArmor ;
#line 8058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fArmor  = 0.0f;
#line 8059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fSubHealth  > 0){
#line 8065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  != NULL ){
#line 8067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penOnBreak  = ((CCamera  &) * m_penCamera ) . m_penOnBreak ;
#line 8068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penOnBreak  != NULL ){
#line 8070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (penOnBreak  , EET_TRIGGER  , this );
#line 8072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 8074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = NULL ;
#line 8075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penActionMarker  != NULL ){
#line 8082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  != DMT_NONE  && fDamageAmmount  > 0)
#line 8113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vAxisY  (0 , 1 , 0);
#line 8115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT angle  = acos  (vDirection  % vAxisY );
#line 8116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D axis  = vAxisY  * vDirection ;
#line 8117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
axis  . Normalize  ();
#line 8118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATquat3D quat ;
#line 8119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
quat  . FromAxisAngle  (axis  , angle );
#line 8120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Normal Hit2" 
#line 8121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> CurrentTick  () , vHitPoint  , quat );
#line 8122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DamageImpact  (dmtType  , fSubHealth  , vHitPoint  , vDirection );
#line 8127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  :: ReceiveDamage  (penInflictor  , dmtType  , fSubHealth  , vHitPoint  , vDirection );
#line 8129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 8131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bCriticalDamageMe )
#line 8132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iJob  == HEALER )
#line 8134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_HEALER_DAMAGE ) , SOF_3D  | SOF_VOLUMETRIC );
#line 8136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == MAGE )
#line 8138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_MAGE_DAMAGE ) , SOF_3D  | SOF_VOLUMETRIC );
#line 8140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == TITAN )
#line 8142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_TITAN_DAMAGE ) , SOF_3D  | SOF_VOLUMETRIC );
#line 8144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == KNIGHT )
#line 8146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_KNIGHT_DAMAGE ) , SOF_3D  | SOF_VOLUMETRIC );
#line 8148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == ROGUE )
#line 8150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_ROGUE_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 8152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == SORCERER )
#line 8154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_SORCERER_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 8156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamageMe  = FALSE ;
#line 8158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDamageAmmount  > 1.0f){
#line 8163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_EXPLOSION  || dmtType  == DMT_PROJECTILE  || dmtType  == DMT_BULLET  
#line 8164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| dmtType  == DMT_IMPACT )
#line 8165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetFlags  () & ENF_ALIVE ){
#line 8170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fDamageAmmount  += fDamageAmmount ;
#line 8171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmWoundedTime  = en_tmEntityTime ;
#line 8172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESound  eSound ;
#line 8177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSound  . EsndtSound  = SNDT_PLAYER ;
#line 8178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSound  . penTarget  = this ;
#line 8179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEventInRange  (eSound  , FLOATaabbox3D (GetPlacement  () . pl_PositionVector  , 10.0f));
#line 8182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_DROWNING ){
#line 8183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRandomMouthPitch  (0.9f , 1.1f);
#line 8185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this )){IFeel_PlayEffect  ("WoundWater");}
#line 8186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmMouthSoundLast  = _pTimer  -> CurrentTick  ();
#line 8187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soLocalAmbientOnce  . Set3DParameters  (25.0f , 5.0f , 0.8f , Lerp  (0.5f , 1.5f , FRnd  ()));
#line 8189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SpawnBubbles  (10 + INDEX (FRnd  () * 10));
#line 8190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_fDamageAmmount  > 1.0f){
#line 8193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetFlags  () & ENF_ALIVE ){
#line 8195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iSound ;
#line 8196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
char  * strIFeel  = NULL ;
#line 8197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fDamageAmmount  < 5.0f){
#line 8199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSound  = GenderSound  (SOUND_DEFAULT );
#line 8201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strIFeel  = "WoundWeak";
#line 8202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_fDamageAmmount  < 25.0f){
#line 8204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSound  = GenderSound  (SOUND_DEFAULT );
#line 8205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strIFeel  = "WoundMedium";
#line 8206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {
#line 8208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSound  = GenderSound  (SOUND_DEFAULT );
#line 8209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strIFeel  = "WoundStrong";
#line 8210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pstState  == PST_DIVE ){
#line 8212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSound  = GenderSound  (SOUND_DEFAULT );
#line 8213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strIFeel  = "WoundWater";
#line 8214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRandomMouthPitch  (0.9f , 1.1f);
#line 8217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tmNow  = _pTimer  -> CurrentTick  ();
#line 8225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::ShouldBlowUp(void) 
#line 8231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return 
#line 8235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gam_bGibs  && 
#line 8237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(GetHealth  () <= 0) && 
#line 8239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(m_vDamage  . Length  () > _fBlowUpAmmount ) && 
#line 8241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetRenderType  () == RT_MODEL ;
#line 8242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CPlayer::GetPlaneFrustumAngle(const FLOAT3D & vDir) 
#line 8246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vPlaneDelta ;
#line 8249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetNormalComponent  (vDir  , en_vGravityDir  , vPlaneDelta );
#line 8251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vFront  = - GetRotationMatrix  () . GetColumn  (3);
#line 8252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vPlaneFront ;
#line 8253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetNormalComponent  (vFront  , en_vGravityDir  , vPlaneFront );
#line 8255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vPlaneDelta  . SafeNormalize  ();
#line 8256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vPlaneFront  . SafeNormalize  ();
#line 8257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return vPlaneDelta  % vPlaneFront ;
#line 8258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void * CPlayer::GetEntityInfo(void) 
#line 8265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
struct  EntityInfo 
#line 8268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EntityInfoBodyType  Eeibt ;
#line 8270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fMass ;
#line 8271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT vSourceCenter  [ 3 ];
#line 8272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT vTargetCenter  [ 3 ];
#line 8273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
};
#line 8274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static EntityInfo  ei ;
#line 8275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . Eeibt  = EIBT_FLESH ;
#line 8276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . fMass  = 100.0f;
#line 8277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vSourceCenter  [ 0 ] = 0;
#line 8278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vSourceCenter  [ 1 ] = 1;
#line 8279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vSourceCenter  [ 2 ] = 0;
#line 8280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 0 ] = 0;
#line 8281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 1 ] = 1;
#line 8282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 2 ] = 0;
#line 8283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(en_pcCharacter  . pc_iPlayerType ){
#line 8284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case TITAN : 
#line 8285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 1 ] = 1.00f;
#line 8286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 8287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MAGE : 
#line 8288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 1 ] = 0.95f;
#line 8289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 8290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HEALER : 
#line 8291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 1 ] = 1.00f;
#line 8292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 8293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case KNIGHT : 
#line 8294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 1 ] = 1.00f;
#line 8295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 8296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ROGUE : 
#line 8297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 1 ] = 1.00f;
#line 8298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 8299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case SORCERER : 
#line 8300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ei  . vTargetCenter  [ 1 ] = 1.00f;
#line 8301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 8302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return & ei ;
#line 8305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ChangePlayerView() 
#line 8318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES ){
#line 8322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (m_pen3rdPersonView  == NULL );
#line 8323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pen3rdPersonView  == NULL ){
#line 8324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  = CreateEntity  (GetPlacement  () , CLASS_PLAYER_VIEW  , WLD_AUTO_ENTITY_ID  , FALSE );
#line 8325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EViewInit  eInit ;
#line 8326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . eidOwner  = this ;
#line 8327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . eidCamera  = (CEntity  *) NULL ;
#line 8328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . vtView  = VT_3RDPERSONVIEW ;
#line 8329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . bDeathFixed  = FALSE ;
#line 8330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  -> Initialize  (eInit  , FALSE );
#line 8331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iViewState  = PVT_3RDPERSONVIEW ;
#line 8336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(m_iViewState  == PVT_3RDPERSONVIEW ){
#line 8337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iViewState  = PVT_PLAYEREYES ;
#line 8340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pen3rdPersonView  != NULL ){
#line 8341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_pen3rdPersonView ) . SendEvent  (EEnd  () , FALSE );
#line 8342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  = NULL ;
#line 8343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::UsePressed(BOOL bOrComputer) 
#line 8367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerWeapons  * penWeapons  = GetPlayerWeapons  ();
#line 8370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = penWeapons  -> m_penRayHit ;
#line 8371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bSomethingToUse  = FALSE ;
#line 8374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL ){
#line 8376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsOfClass  (pen  , "Moving Brush")){
#line 8377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CMovingBrush  &) * pen ) . m_penSwitch  != NULL ){
#line 8378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  = ((CMovingBrush  &) * pen ) . m_penSwitch ;
#line 8379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsOfClass  (pen  , "Switch") && penWeapons  -> m_fRayHitDistance  < 2.0f){
#line 8384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSwitch  & enSwitch  = (CSwitch  &) * pen ;
#line 8386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(enSwitch  . m_bUseable ){
#line 8388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (pen  , EET_TRIGGER  , this );
#line 8389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSomethingToUse  = TRUE ;
#line 8390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetGameEnd(void) 
#line 8431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iPlayer  = 0;iPlayer  < GetMaxPlayers  ();iPlayer  ++){
#line 8434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = GetPlayerEntity  (iPlayer );
#line 8435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL ){
#line 8436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  ENGINE_API  BOOL _bDedicatedServer ;
#line 8437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cmp_ppenPlayer  == NULL  && (_pNetwork  -> IsPlayerLocal  (pen ) || _bDedicatedServer )){
#line 8438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmp_ppenPlayer  = (CPlayer  *) pen ;
#line 8439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ()){
#line 8440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! GetSP  () -> sp_bCooperative ){
#line 8441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX i  = 0;i  < NET_MAXGAMEPLAYERS ;i  ++){
#line 8442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerTarget  & plt  = _pNetwork  -> ga_srvServer  . srv_apltPlayers  [ i  ];
#line 8443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(plt  . IsActive  () && plt  . plt_penPlayerEntity  != NULL ){
#line 8444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * ppl  = (CPlayer  *) plt  . plt_penPlayerEntity ;
#line 8445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerStats  epls ;
#line 8446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epls  . iIndex  = i ;
#line 8448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epls  . iKills  = ppl  -> m_psGameStats  . ps_iKills ;
#line 8449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epls  . iDeaths  = ppl  -> m_psGameStats  . ps_iDeaths ;
#line 8450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (epls  , TRUE );
#line 8451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (EShowConsole  () , TRUE );
#line 8455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 8457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetGameFinished  ();
#line 8461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CPlayer::CalculateViewRotationDamping(void) 
#line 8464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRotationDamping  = 1.0f;
#line 8476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return fRotationDamping ;
#line 8477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ApplyAction(const CPlayerAction & paOriginal,FLOAT tmLatency) 
#line 8481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_INITIALIZED )){return ;}
#line 8495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ulFlags  & PLF_NOTCONNECTED )
#line 8496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetConnected  ();
#line 8499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_APPLIEDACTION ;
#line 8504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAction  paAction  = paOriginal ;
#line 8508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRotationDamping  = CalculateViewRotationDamping  ();
#line 8511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aDeltaRotation ;
#line 8512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aDeltaViewRotation ;
#line 8514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaRotation  (1) = GetRotationDiff  (m_iLastRotationH  , paAction  . pa_aRotation  (1));
#line 8515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaRotation  (2) = GetRotationDiff  (m_iLastRotationP  , paAction  . pa_aRotation  (2));
#line 8516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaRotation  (3) = GetRotationDiff  (m_iLastRotationB  , paAction  . pa_aRotation  (3));
#line 8519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaViewRotation  (1) = GetRotationDiff  (m_iLastViewRotationH  , paAction  . pa_aViewRotation  (1));
#line 8520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaViewRotation  (2) = GetRotationDiff  (m_iLastViewRotationP  , paAction  . pa_aViewRotation  (2));
#line 8521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaViewRotation  (3) = GetRotationDiff  (m_iLastViewRotationB  , paAction  . pa_aViewRotation  (3));
#line 8523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaRotation  *= fRotationDamping ;
#line 8524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDeltaViewRotation  *= fRotationDamping ;
#line 8526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRotation  (m_iLastRotationH  , paAction  . pa_aRotation  (1));
#line 8527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRotation  (m_iLastRotationP  , paAction  . pa_aRotation  (2));
#line 8528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRotation  (m_iLastRotationB  , paAction  . pa_aRotation  (3));
#line 8529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRotation  (m_iLastViewRotationH  , paAction  . pa_aViewRotation  (1));
#line 8530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRotation  (m_iLastViewRotationP  , paAction  . pa_aViewRotation  (2));
#line 8531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRotation  (m_iLastViewRotationB  , paAction  . pa_aViewRotation  (3));
#line 8533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aRotation  = aDeltaRotation ;
#line 8534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aViewRotation  = aDeltaViewRotation ;
#line 8537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aRotation  /= _pTimer  -> TickQuantum ;
#line 8538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aViewRotation  /= _pTimer  -> TickQuantum ;
#line 8540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penMe  = this ;
#line 8544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_vTranslation  (1) = Clamp  (paAction  . pa_vTranslation  (1) , - plr_fSpeed  , plr_fSpeed );
#line 8545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_vTranslation  (2) = Clamp  (paAction  . pa_vTranslation  (2) , - plr_fSpeedUp  , plr_fSpeedUp );
#line 8546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_vTranslation  (3) = Clamp  (paAction  . pa_vTranslation  (3) , - plr_fSpeed  , plr_fSpeed );
#line 8549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(Abs  (paAction  . pa_vTranslation  (3)) < plr_fSpeed  / 1.99f 
#line 8550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& Abs  (paAction  . pa_vTranslation  (1)) < plr_fSpeed  / 1.99f){
#line 8552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_fStepDnHeight  = 1.5f;
#line 8554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 8556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_fStepDnHeight  = - 1;
#line 8557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D & v  = paAction  . pa_vTranslation ;
#line 8561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDiag  = Sqrt  (v  (1) * v  (1) + v  (3) * v  (3));
#line 8562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDiag  > 0.01f)
#line 8563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDiagLimited  = Min  (fDiag  , plr_fSpeed );
#line 8565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFactor  = fDiagLimited  / fDiag ;
#line 8566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
v  (1) *= fFactor ;
#line 8567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
v  (3) *= fFactor ;
#line 8568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulButtonsNow  = paAction  . pa_ulButtons ;
#line 8571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulButtonsBefore  = m_ulLastButtons ;
#line 8572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulNewButtons  = ulButtonsNow  & ~ ulButtonsBefore ;
#line 8573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulReleasedButtons  = (~ ulButtonsNow ) & (ulButtonsBefore );
#line 8575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulLastButtons  = ulButtonsNow ;
#line 8576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plLastViewpoint  = en_plViewpoint ;
#line 8579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((g_slZone  == 0 || g_slZone  == 4) && ! _bLoginProcess )
#line 8580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CheckField  ();
#line 8582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayMusic  ();
#line 8583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(g_slZone  == 7 && _pUISWDoc  -> IsWar  ())
#line 8585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> PlayBGM  (MUSIC_CASTLE_BATTLE );
#line 8587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetFlags  () & ENF_ALIVE )
#line 8591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AliveActions  (paAction );
#line 8595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 8598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeathActions  (paAction );
#line 8600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateLatency  (tmLatency );
#line 8604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::Disconnect(void) 
#line 8608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_strName  = GetPlayerName  ();
#line 8612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_pcCharacter  = CPlayerCharacter  ();
#line 8614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (EDisconnected  ());
#line 8615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
#define TRANSFORMATION_TIME		1.8f
  
#line 8621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::TransformSorcerer(int iType) 
#line 8622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static double  dTransTime  = TRANSFORMATION_TIME ;
#line 8625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 8628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static bool  s_bStart  = true ;
#line 8629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static DOUBLE  dStartTime  = 0.0f;
#line 8632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(s_bStart )
#line 8633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dStartTime  = _pTimer  -> GetHighPrecisionTimer  () . GetSeconds  ();
#line 8635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
s_bStart  = false ;
#line 8636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DOUBLE  dDealy  = _pTimer  -> GetHighPrecisionTimer  () . GetSeconds  () - dStartTime ;
#line 8640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dDealy  < dTransTime )
#line 8641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strNewLook ;
#line 8648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 8649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  = GetPlacement  ();
#line 8650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  (2) = plPlacement  . pl_PositionVector  (2) + 0.05f;
#line 8651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plPlacement );
#line 8653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  = FALSE ;
#line 8654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bIsTransform  = TRUE ;
#line 8658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCollisionInfo  pciCollisionInfo  = * (this  -> en_pciCollisionInfo );
#line 8660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSkaModel  (TransformInfo  () . GetFileName  (iType ));
#line 8662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
* (this  -> en_pciCollisionInfo ) = pciCollisionInfo ;
#line 8664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX t  = ANIM_BASIC_BEGIN ;t  < ANIM_BASIC_END ;++ t )
#line 8665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ t  ] = ska_GetIDFromStringTable  (TransformInfo  () . GetAnimationName  (iType  , t ));
#line 8667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (NULL  , 1);
#line 8671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iStopTransformItem  = 522;
#line 8674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> AddToNoticeList  (iStopTransformItem  , NOTICE_TRANSFORM );
#line 8675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetNotice  () -> RefreshNoticeList  ();
#line 8677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
s_bStart  = true ;
#line 8678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ReturnSorcerer() 
#line 8682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bIsTransform )
#line 8684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 8688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strNewLook ;
#line 8693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 8694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSkaModel  (JobInfo  () . GetFileName  (iJob ));
#line 8696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 8697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  = GetPlacement  ();
#line 8698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  (2) = plPlacement  . pl_PositionVector  (2) + 0.05f;
#line 8699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plPlacement );
#line 8701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetModelInstance  ();
#line 8702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMI )
#line 8703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> mi_iFaceMesh  = - 1;
#line 8705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> mi_iHairMesh  = - 1;
#line 8706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbFaceStyle  = _pNetwork  -> MyCharacterInfo  . faceStyle ;
#line 8707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbHairStyle  = _pNetwork  -> MyCharacterInfo  . hairStyle ;
#line 8708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> SetCharacterAppearance  (pMI  , iJob  , sbHairStyle  , sbFaceStyle );
#line 8709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX t  = ANIM_BASIC_BEGIN ;t  < ANIM_BASIC_END ;++ t )
#line 8712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ t  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , t ));
#line 8714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = 0;i  < WEAR_TOTAL ;++ i )
#line 8717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ i  ] != NULL )
#line 8719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItems  * tmpItem ;
#line 8721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bHead_change )
#line 8722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmpItem  = _pNetwork  -> pMyCurrentWearing  [ i  ];
#line 8724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else 
#line 8725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> DeleteDefaultArmor  (pMI  , i  , iJob );
#line 8727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  Tab  , Row  , Col ;
#line 8730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Tab  = _pNetwork  -> pMyCurrentWearing  [ i  ] -> Item_Tab ;
#line 8731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Row  = _pNetwork  -> pMyCurrentWearing  [ i  ] -> Item_Row ;
#line 8732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Col  = _pNetwork  -> pMyCurrentWearing  [ i  ] -> Item_Col ;
#line 8734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bHead_change )
#line 8735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(i  != WEAR_HELMET  || (i  == WEAR_HELMET  && (CTString) tmpItem  -> ItemData  . GetItemSmcFileName  () != MODEL_TREASURE ))
#line 8737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> DeleteDefaultArmor  (pMI  , i  , iJob );
#line 8739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> WearingArmor  (pMI  , _pNetwork  -> pMyCurrentWearing  [ i  ] -> ItemData );
#line 8740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else 
#line 8742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> WearingArmor  (pMI  , _pNetwork  -> pMyCurrentWearing  [ i  ] -> ItemData );
#line 8744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetMyCurrentWearing  (Tab  , Row  , Col );
#line 8748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bIsTransform  = FALSE ;
#line 8752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  = FALSE ;
#line 8755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::MonsterChange(int type) 
#line 8759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 8763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strNewLook ;
#line 8767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 8768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  = GetPlacement  ();
#line 8769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  (2) = plPlacement  . pl_PositionVector  (2) + 0.05f;
#line 8770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plPlacement );
#line 8772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMobChange  = TRUE ;
#line 8773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (type );
#line 8776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCollisionInfo  pciCollisionInfo  = * (this  -> en_pciCollisionInfo );
#line 8778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSkaModel  (MD  . GetMobSmcFileName  ());
#line 8780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
* (this  -> en_pciCollisionInfo ) = pciCollisionInfo ;
#line 8783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_ATTACK_IDLE  ] = idPlayerWhole_Animation  [ ANIM_IDLE  ] = ska_GetIDFromStringTable  (MD  . GetAnimDefaultName  ());
#line 8784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_RUN_2  ] = idPlayerWhole_Animation  [ ANIM_RUN_1  ] = ska_GetIDFromStringTable  (MD  . GetAnimRunName  ());
#line 8785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_WALK_2  ] = idPlayerWhole_Animation  [ ANIM_WALK_1  ] = ska_GetIDFromStringTable  (MD  . GetAnimWalkName  ());
#line 8786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_DIE  ] = ska_GetIDFromStringTable  (MD  . GetAnimDeathName  ());
#line 8787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_DAMAGE  ] = ska_GetIDFromStringTable  (MD  . GetAnimWoundName  ());
#line 8789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (NULL  , 1);
#line 8790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ReturnChange(BOOL bAppear) 
#line 8794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bMobChange )
#line 8797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 8801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strNewLook ;
#line 8806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 8807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSkaModel  (JobInfo  () . GetFileName  (iJob ));
#line 8809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 8810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  = GetPlacement  ();
#line 8811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  (2) = plPlacement  . pl_PositionVector  (2) + 0.05f;
#line 8812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plPlacement );
#line 8814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetModelInstance  ();
#line 8815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pMI )
#line 8816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> mi_iFaceMesh  = - 1;
#line 8818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> mi_iHairMesh  = - 1;
#line 8819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbFaceStyle  = _pNetwork  -> MyCharacterInfo  . faceStyle ;
#line 8820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const SBYTE  sbHairStyle  = _pNetwork  -> MyCharacterInfo  . hairStyle ;
#line 8821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> SetCharacterAppearance  (pMI  , iJob  , sbHairStyle  , sbFaceStyle );
#line 8822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAppear )
#line 8825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> StretchModel  (FLOAT3D (1.0f , 1.0f , 1.0f));
#line 8827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 8829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> StretchModel  (FLOAT3D (0.1f , 0.1f , 0.1f));
#line 8831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_IDLE  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_IDLE ));
#line 8835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_RUN_1  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_RUN_1 ));
#line 8836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_WALK_1  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_WALK_1 ));
#line 8837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_DIE  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_DIE ));
#line 8838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_ATTACK_IDLE  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_ATTACK_IDLE ));
#line 8839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_RUN_2  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_RUN_2 ));
#line 8840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_WALK_2  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_WALK_2 ));
#line 8841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ ANIM_DAMAGE  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , ANIM_DAMAGE ));
#line 8843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = 0;i  < WEAR_TOTAL ;++ i )
#line 8844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ i  ] != NULL )
#line 8846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItems  * tmpItem ;
#line 8848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bHead_change )
#line 8849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmpItem  = _pNetwork  -> pMyCurrentWearing  [ i  ];
#line 8851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else 
#line 8852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> DeleteDefaultArmor  (pMI  , i  , iJob );
#line 8854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  Tab  , Row  , Col ;
#line 8856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Tab  = _pNetwork  -> pMyCurrentWearing  [ i  ] -> Item_Tab ;
#line 8857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Row  = _pNetwork  -> pMyCurrentWearing  [ i  ] -> Item_Row ;
#line 8858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Col  = _pNetwork  -> pMyCurrentWearing  [ i  ] -> Item_Col ;
#line 8860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bHead_change )
#line 8861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(i  != WEAR_HELMET  || (i  == WEAR_HELMET  && (CTString) tmpItem  -> ItemData  . GetItemSmcFileName  () != MODEL_TREASURE ))
#line 8863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> DeleteDefaultArmor  (pMI  , i  , iJob );
#line 8865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> WearingArmor  (pMI  , _pNetwork  -> pMyCurrentWearing  [ i  ] -> ItemData );
#line 8866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else 
#line 8868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> WearingArmor  (pMI  , _pNetwork  -> pMyCurrentWearing  [ i  ] -> ItemData );
#line 8870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetMyCurrentWearing  (Tab  , Row  , Col );
#line 8873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMobChange  = FALSE ;
#line 8877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (GetPhysicsFlags  () | EPF_TRANSLATEDBYGRAVITY  | EPF_ORIENTEDBYGRAVITY );
#line 8878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::MinMaximize() 
#line 8881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static bMinimize  = TRUE ;
#line 8884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bChanging )
#line 8885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bMinimize )
#line 8887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static int  cnt  = 0;
#line 8890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static unsigned  int  tmStartTime  = unsigned  int  (_pTimer  -> GetLerpedCurrentTick  () * 1000);
#line 8892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  == 0)
#line 8893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = unsigned  int  (_pTimer  -> GetLerpedCurrentTick  () * 1000);
#line 8895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  ++;
#line 8896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  time  = ((unsigned  int  (_pTimer  -> GetLerpedCurrentTick  () * 1000) - tmStartTime ) % 1000) / 100;
#line 8899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(time  < 1)
#line 8900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = cnt  + time ;
#line 8906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  > 9)
#line 8907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = 9;
#line 8909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> StretchModel  (FLOAT3D (0.1f * (10 - cnt ) , 0.1f * (10 - cnt ) , 0.1f * (10 - cnt )));
#line 8913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  == 9)
#line 8914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bMobChange )
#line 8916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MonsterChange  (m_nChangeMonsterId );
#line 8918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 8920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ReturnChange  (FALSE );
#line 8922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bMinimize  = FALSE ;
#line 8925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = 0;
#line 8926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 8929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static int  cnt  = 10;
#line 8933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static unsigned  int  tmStartTime  = unsigned  int  (_pTimer  -> GetLerpedCurrentTick  () * 1000);
#line 8935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  == 10)
#line 8936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = unsigned  int  (_pTimer  -> GetLerpedCurrentTick  () * 1000);
#line 8938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  --;
#line 8940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nChangeMonsterId  == GM_CHANGE )
#line 8941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static INDEX animID  = ska_StringToID  ("cusedrich_skill");
#line 8943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT animTime  = GetModelInstance  () -> GetAnimLength  (animID );
#line 8945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (animID  , AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 8946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("cusedrich_disguise" , & GetModelInstance  () -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 8947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 8950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Polymorph" , & GetModelInstance  () -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 8952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , SOUND_POLYMOPH  , SOF_3D  | SOF_VOLUMETRIC );
#line 8954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  time  = ((unsigned  int  (_pTimer  -> GetLerpedCurrentTick  () * 1000) - tmStartTime ) % 1000) / 100;
#line 8959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(time  < 1)
#line 8960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 8962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = cnt  - time ;
#line 8966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  < 1)
#line 8967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = 1;
#line 8969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nChangeMonsterId  == GM_CHANGE )
#line 8972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> StretchModel  (FLOAT3D (GM_CHANGE_MUL  * (11 - cnt ) , GM_CHANGE_MUL  * (11 - cnt ) , GM_CHANGE_MUL  * (11 - cnt )));
#line 8974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 8976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> StretchModel  (FLOAT3D (0.1f * (11 - cnt ) , 0.1f * (11 - cnt ) , 0.1f * (11 - cnt )));
#line 8978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  == 1)
#line 8982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bChanging  = FALSE ;
#line 8984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bMinimize  = TRUE ;
#line 8985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = 10;
#line 8987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nPlayActionNum  == ACTION_NUM_SELL )
#line 8988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 8989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 1;
#line 8990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = TRUE ;
#line 8991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& en_pmiModelInstance  -> m_tmSkaTagManager  , 1);
#line 8993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 8996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 8999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::Transforming() 
#line 9000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bTransforming )
#line 9002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bIsTransform )
#line 9004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TransformSorcerer  (m_iTransformType );
#line 9006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ReturnSorcerer  ();
#line 9010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::CharacterChanged(const CPlayerCharacter & pcNew) 
#line 9019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerCharacter  pcOrg  = en_pcCharacter ;
#line 9024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_pcCharacter  = pcNew ;
#line 9025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ValidateCharacter  ();
#line 9028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pcOrg  . GetName  () != pcNew  . GetName  ()){
#line 9030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("%s is now known as %s\n") , 
#line 9031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pcOrg  . GetNameForPrinting  () , pcNew  . GetNameForPrinting  ());
#line 9032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerSettings  * ppsOrg  = (CPlayerSettings  *) pcOrg  . pc_aubAppearance ;
#line 9036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerSettings  * ppsNew  = (CPlayerSettings  *) pcNew  . pc_aubAppearance ;
#line 9042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strNewLook ;
#line 9044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bSuccess ;
#line 9045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl ){
#line 9046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSuccess  = SetPlayerAppearance  (& m_moRender  , & en_pcCharacter  , strNewLook  , FALSE );
#line 9047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 9048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSuccess  = SetPlayerAppearanceSka  (& m_miRender  , & en_pcCharacter  , strNewLook  , FALSE );
#line 9049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJobType  = en_pcCharacter  . pc_iPlayerType ;
#line 9053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSkaModel  (JobInfo  () . GetFileName  (iJobType ));
#line 9056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetModelInstance  ())
#line 9057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaTag  tag ;
#line 9059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__ROOT");
#line 9060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 9061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 9062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__TOP");
#line 9063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 9064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 9065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> GetAllFramesBBox  (aabb );
#line 9066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetPos  (0 , aabb  . Size  () (2) * GetModelInstance  () -> mi_vStretch  (2) , 0);
#line 9067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 9068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bSuccess ){
#line 9074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ParseGender  (strNewLook );
#line 9079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 9081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("Cannot change appearance for %s: setting '%s' is unavailable\n") , 
#line 9082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pcNew  . GetNameForPrinting  () , (const char  *) ppsNew  -> GetModelFilename  ());
#line 9083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FillAnimAndBoneIDs  ();
#line 9106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 9107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  = GetPlacement  ();
#line 9108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  (2) = plPlacement  . pl_PositionVector  (2) + 0.05f;
#line 9109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plPlacement );
#line 9112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaTag  tag ;
#line 9113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__ROOT");
#line 9114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 9115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_pmiModelInstance  -> m_tmSkaTagManager  . Register  (& tag );
#line 9116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__TOP");
#line 9117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 9118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 9119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> GetAllFramesBBox  (aabb );
#line 9120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetPos  (0 , aabb  . Size  () (2) * GetModelInstance  () -> mi_vStretch  (2) , 0);
#line 9121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 9123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckEscKey(void) 
#line 9127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling  || m_bForward  || m_bStartAttack )
#line 9129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 9131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 9134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penReservedTarget  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 9136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 9137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> IsEnemy  () || 
#line 9139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penTarget  -> IsCharacter  ()) || 
#line 9140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penTarget  -> IsPet  ()) || 
#line 9141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penTarget  -> IsSlave  ()) || 
#line 9142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penTarget  -> GetFlags  () & ENF_ITEM ) || penTarget  == this )
#line 9143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 9145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penReservedTarget  != NULL )
#line 9149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penReservedTarget  -> IsEnemy  () || 
#line 9151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penReservedTarget  -> IsCharacter  ()) || 
#line 9152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penReservedTarget  -> IsPet  ()) || 
#line 9153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penReservedTarget  -> IsSlave  ()) || 
#line 9154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(penReservedTarget  -> GetFlags  () & ENF_ITEM ) || penReservedTarget  == this )
#line 9155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 9157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1 || m_nDesiredSkillNum  != - 1)
#line 9161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 9163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 9166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::AliveActions(const CPlayerAction & pa) 
#line 9171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_fAcceleration  = plr_fAcceleration ;
#line 9174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_fDeceleration  = plr_fDeceleration ;
#line 9176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAction  paAction  = pa ;
#line 9181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  BOOL _bWorldEditorApp ;
#line 9182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  != NULL  && ! _bInFixedCamera )
#line 9183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _bLoginProcess  || _bWorldEditorApp )
#line 9185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_vTranslation  = FLOAT3D (0 , 0 , 0);
#line 9188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aRotation  = ANGLE3D (0 , 0 , 0);
#line 9189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aViewRotation  = ANGLE3D (0 , 0 , 0);
#line 9191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & (PLACT_FIRE  | PLACT_USE ))
#line 9192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = NULL ;
#line 9195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ButtonsActions  (paAction );
#line 9201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> GetUIGameState  () == UGS_GAMEON  || _bInTestGame )
#line 9206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ActiveActions  (paAction );
#line 9209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::AutoActions(const CPlayerAction & pa) 
#line 9215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  == NULL )
#line 9218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EAutoAction  eAutoAction ;
#line 9221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eAutoAction  . eidFirstMarker  = (CEntity  *) NULL ;
#line 9222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (eAutoAction );
#line 9223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & (PLACT_FIRE  | PLACT_USE )){
#line 9227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  != NULL ){
#line 9228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penOnBreak  = ((CCamera  &) * m_penCamera ) . m_penOnBreak ;
#line 9229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penOnBreak  != NULL ){
#line 9230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (penOnBreak  , EET_TRIGGER  , this );
#line 9231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAction  paAction  = pa ;
#line 9237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_vTranslation  = FLOAT3D (0 , 0 , 0);
#line 9238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aRotation  = ANGLE3D (0 , 0 , 0);
#line 9239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aViewRotation  = ANGLE3D (0 , 0 , 0);
#line 9242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fAutoSpeed  > 0)
#line 9243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = 
#line 9245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penActionMarker  -> GetPlacement  () . pl_PositionVector  - 
#line 9246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlacement  () . pl_PositionVector ;
#line 9247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDistance  = vDelta  . Length  ();
#line 9248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDistance  > 0.1f)
#line 9249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  /= fDistance ;
#line 9251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE aDH  = GetRelativeHeading  (vDelta );
#line 9254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fSpeed  = m_fAutoSpeed ;
#line 9255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetActionMarker  () -> m_paaAction  == PAA_RUNANDSTOP )
#line 9256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fSpeed  = Min  (fSpeed  , fDistance  / _pTimer  -> TickQuantum );
#line 9259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(Abs  (aDH ) > 1.0f)
#line 9262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fSpeed  > m_fAutoSpeed  - 0.1f)
#line 9264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aDH  = Clamp  (aDH  , - 10.0f , 10.0f);
#line 9266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aRotation  = ANGLE3D (aDH  / _pTimer  -> TickQuantum  , 0 , 0);
#line 9268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_vTranslation  = FLOAT3D (0 , 0 , - fSpeed );
#line 9271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_vTranslation  = m_vAutoSpeed ;
#line 9276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_AUTOMOVEMENTS )){
#line 9280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ActiveActions  (paAction );
#line 9281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::GetLerpedWeaponPosition(FLOAT3D vRel,CPlacement3D & pl) 
#line 9285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pl  = CPlacement3D (vRel  , ANGLE3D (0 , 0 , 0));
#line 9287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plView ;
#line 9288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bDiscard3rdView  = GetViewEntity  (FALSE ) != this ;
#line 9289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetLerpedAbsoluteViewPlacement  (plView );
#line 9290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pl  . RelativeToAbsolute  (plView );
#line 9291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SpawnBubbles(INDEX ctBubbles) 
#line 9294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iBouble  = 0;iBouble  < ctBubbles ;iBouble  ++)
#line 9296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vRndRel  = FLOAT3D ((FRnd  () - 0.5f) * 0.25f , - 0.25f , - 0.5f + FRnd  () / 10.0f);
#line 9298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aDummy  = ANGLE3D (0 , 0 , 0);
#line 9299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plMouth  = CPlacement3D (vRndRel  , aDummy );
#line 9301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plMouth  . RelativeToAbsolute  (en_plViewpoint );
#line 9302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plMouth  . RelativeToAbsolute  (GetPlacement  ());
#line 9303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vRndSpd  = FLOAT3D ((FRnd  () - 0.5f) * 0.25f , (FRnd  () - 0.5f) * 0.25f , (FRnd  () - 0.5f) * 0.25f);
#line 9304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plMouth  . pl_PositionVector  (2) += 0.5f;
#line 9305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddBouble  (plMouth  . pl_PositionVector  , vRndSpd );
#line 9306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ActiveActions(const CPlayerAction & paAction) 
#line 9318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTranslation  = paAction  . pa_vTranslation ;
#line 9324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cht_fTranslationMultiplier  && CheatsEnabled  ())
#line 9325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTranslation  *= cht_fTranslationMultiplier ;
#line 9327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! GetSP  () -> sp_bCooperative )
#line 9330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTranslation  (1) *= 1.35f;
#line 9332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTranslation  (3) *= 1.35f;
#line 9334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CContentType  & ctUp  = GetWorld  () -> wo_actContentTypes  [ en_iUpContent  ];
#line 9337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CContentType  & ctDn  = GetWorld  () -> wo_actContentTypes  [ en_iDnContent  ];
#line 9338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayerState  pstWanted  = PST_STAND ;
#line 9339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bUpSwimable  = (ctUp  . ct_ulFlags  & CTF_SWIMABLE ) && en_fImmersionFactor  <= 0.99f;
#line 9340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bDnSwimable  = (ctDn  . ct_ulFlags  & CTF_SWIMABLE ) && en_fImmersionFactor  >= 0.5f;
#line 9344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bUpSwimable  || bDnSwimable )
#line 9345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_JUMPALLOWED ;
#line 9350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_fImmersionFactor  >= 0.99f || bUpSwimable )
#line 9351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pstWanted  = PST_DIVE ;
#line 9355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pstWanted  = PST_SWIM ;
#line 9360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {
#line 9366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_penReference  != NULL )
#line 9367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fFallTime  = 0.0f;
#line 9370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fFallTime  += _pTimer  -> TickQuantum ;
#line 9378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vTranslation  (2) < 0.1f)
#line 9381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_JUMPALLOWED ;
#line 9384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fFallTime  >= 0.5f){
#line 9389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pstWanted  = PST_FALL ;
#line 9390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pstWanted  = PST_STAND ;
#line 9396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayerState  pstOld  = m_pstState ;
#line 9402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pstWanted  != m_pstState )
#line 9403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(pstWanted )
#line 9406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case PST_STAND : 
#line 9409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ChangeCollisionBoxIndexNow  (PLAYER_COLLISION_BOX_STAND ))
#line 9412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_PositionVector  (2) = plr_fViewHeightStand ;
#line 9414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . Stand  ();
#line 9415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pstState  = PST_STAND ;
#line 9416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case PST_SWIM : 
#line 9422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case PST_DIVE : 
#line 9428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case PST_FALL : 
#line 9435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ChangeCollisionBoxIndexNow  (PLAYER_COLLISION_BOX_STAND ))
#line 9438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pstState  = PST_FALL ;
#line 9440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_PositionVector  (2) = plr_fViewHeightStand ;
#line 9441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . Fall  ();
#line 9442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> m_bTcpIp )
#line 9450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bChanging )
#line 9452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MinMaximize  ();
#line 9454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bTransforming )
#line 9457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Transforming  ();
#line 9459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bStuned  || CheckAction  ())
#line 9461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bWaitForSkillResponse  && (_pTimer  -> CurrentTick  () - m_tmSendSkillMessage  > 5000.0f))
#line 9467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 9469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2083 , "잘못된 조작으로 스킬을 취소합니다."));
#line 9470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 9473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 9474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 9475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillCancelMessage  ();
#line 9476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_SKILL );
#line 9477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 9478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! CheckSkill  ())
#line 9482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CheckTarget  ())
#line 9484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulFlags  = SetDesiredMovement  ();
#line 9486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 9494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetMyPosition  (GetPlacement  () , m_fCameraAngle );
#line 9499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling )
#line 9500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 9502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 9508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 9512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDesirePosition  = m_vDesiredPosition ;
#line 9513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vOriginPosition  = GetPlacement  () . pl_PositionVector ;
#line 9514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDesirePosition  (2) = 0.0f;
#line 9515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vOriginPosition  (2) = 0.0f;
#line 9516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fHeight  = fabs  (m_vDesiredPosition  (2) - GetPlacement  () . pl_PositionVector  (2));
#line 9517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDistance  = (vOriginPosition  - vDesirePosition ) . Length  ();
#line 9518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fAngle  = ATan2  (fHeight  , fDistance );
#line 9521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fAngle  > 40.0f || m_bHold )
#line 9522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTranslation  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 9525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopTranslating  ();
#line 9526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDeltatmp  = vDelta ;
#line 9531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fLength  = plr_fSpeed ;
#line 9533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDeltatmp  . Normalize  ();
#line 9535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTranslation  = (vDeltatmp  * fLength );
#line 9570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredTranslation  (vTranslation );
#line 9577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . Rotate_HPB  (ANGLE3D (
#line 9578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(ANGLE) ((FLOAT) paAction  . pa_aRotation  (1) * _pTimer  -> TickQuantum ) , 
#line 9579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(ANGLE) ((FLOAT) paAction  . pa_aRotation  (2) * _pTimer  -> TickQuantum ) , 
#line 9580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(ANGLE) ((FLOAT) paAction  . pa_aRotation  (3) * _pTimer  -> TickQuantum )));
#line 9583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fCameraAngle  = en_plViewpoint  . pl_OrientationAngle  (1) * 2;
#line 9585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RoundViewAngle  (en_plViewpoint  . pl_OrientationAngle  (2) , PITCH_MAX );
#line 9586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RoundViewAngle  (en_plViewpoint  . pl_OrientationAngle  (3) , BANKING_MAX );
#line 9589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fWantSpeed  = en_vDesiredTranslationRelative  . Length  ();
#line 9590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fGoesSpeed  = en_vCurrentTranslationAbsolute  . Length  ();
#line 9591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bOnGround  = (m_pstState  == PST_STAND );
#line 9592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bRunning  = bOnGround  && fWantSpeed  > 4.0f && fGoesSpeed  > 4.0f;
#line 9593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bWalking  = bOnGround  && ! bRunning  && fWantSpeed  > 1.5f && fGoesSpeed  > 1.5f;
#line 9594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bSwimming  = (m_pstState  == PST_SWIM ) && fWantSpeed  > 2.0f && fGoesSpeed  > 2.0f;
#line 9595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bDiving  = (m_pstState  == PST_DIVE ) && fWantSpeed  > 2.0f && fGoesSpeed  > 2.0f;
#line 9596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tmNow  = en_tmEntityTime ;
#line 9597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static INDEX iSoundWalkL  = SOUND_WALK_MARBLE_IN_L ;
#line 9598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static INDEX iSoundWalkR  = SOUND_WALK_MARBLE_IN_R ;
#line 9600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((ctDn  . ct_ulFlags  & CTF_SWIMABLE ) && en_fImmersionFactor  >= 0.1f)
#line 9601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_DEFAULT ;
#line 9603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_DEFAULT ;
#line 9604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(en_pbpoStandOn  != NULL )
#line 9606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pbpoStandOn  -> bpo_ubPolygonAttribute  > BPOA_NONE )
#line 9608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbyLayer  = ((en_pbpoStandOn  -> bpo_ubPolygonAttribute  - 1) % 10) << 1;
#line 9610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pbpoStandOn  -> bpo_ubPolygonAttribute  >= BPOA_STAIR1F2F  && 
#line 9611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_pbpoStandOn  -> bpo_ubPolygonAttribute  <= BPOA_STAIRWALL4F5F )
#line 9612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbyLayer  += 1;
#line 9614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . yLayer  = sbyLayer ;
#line 9617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bIsTransform )
#line 9623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iTransformType  == CTransformInfo  :: TYPE_1 )
#line 9625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_HELL_WALK ;
#line 9627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_HELL_RUN ;
#line 9628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iTransformType  == CTransformInfo  :: TYPE_2 )
#line 9630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_ELENEN_WALK ;
#line 9632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_ELENEN_RUN ;
#line 9633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bRide )
#line 9636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 9639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = - 1;
#line 9641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_HORSE_RUN ;
#line 9642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = - 1;
#line 9646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = - 1;
#line 9647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(en_pbpoStandOn  -> bpo_bppProperties  . bpp_ubSurfaceType )
#line 9652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case LC_SURFACE_MARBLE_IN : 
#line 9654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_MARBLE_IN_L ;
#line 9656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_MARBLE_IN_R ;
#line 9659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case LC_SURFACE_BLOCK_OUT : 
#line 9663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_BLOCK_OUT_L ;
#line 9665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_BLOCK_OUT_R ;
#line 9668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case LC_SURFACE_WOOD_OUT : 
#line 9672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_WOOD_OUT_L ;
#line 9674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_WOOD_OUT_R ;
#line 9677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case LC_SURFACE_WATER_SHALLOW_IN : 
#line 9681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WATER_WALK_SHALLOW_L ;
#line 9683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WATER_WALK_SHALLOW_R ;
#line 9684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  :
#line 9688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_MARBLE_IN_L ;
#line 9690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_MARBLE_IN_R ;
#line 9693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fX  = _pNetwork  -> MyCharacterInfo  . x ;
#line 9702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fZ  = _pNetwork  -> MyCharacterInfo  . z ;
#line 9703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iTerSound  = TR_GetTerrainLayerSound  (fX  , fZ );
#line 9705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iTerSound  >= 0)
#line 9706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bIsTransform )
#line 9714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iTransformType  == CTransformInfo  :: TYPE_1 )
#line 9716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_HELL_WALK ;
#line 9718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_HELL_RUN ;
#line 9719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iTransformType  == CTransformInfo  :: TYPE_2 )
#line 9721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WALK_ELENEN_WALK ;
#line 9723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_ELENEN_RUN ;
#line 9724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bRide )
#line 9727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 9730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = - 1;
#line 9732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WALK_HORSE_RUN ;
#line 9733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = - 1;
#line 9737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = - 1;
#line 9738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fWaterDiff  = _pNetwork  -> MyCharacterInfo  . fWaterHeight  - en_plPlacement  . pl_PositionVector  (2);
#line 9743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fWaterDiff  > 0.01f)
#line 9744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_WATER_WALK_SHALLOW_L ;
#line 9755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_WATER_WALK_SHALLOW_R ;
#line 9756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iTerSound  <<= 1;
#line 9760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkL  = SOUND_TER_WALK_DIRT_L  + iTerSound ;
#line 9761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iSoundWalkR  = SOUND_TER_WALK_DIRT_R  + iTerSound ;
#line 9764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bRunning )
#line 9772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmNow  > m_tmMoveSound  + plr_fRunSoundDelay )
#line 9774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmMoveSound  = tmNow ;
#line 9776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMoveSoundLeft  = ! m_bMoveSoundLeft ;
#line 9777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMoveSoundLeft  && iSoundWalkL  != - 1)
#line 9778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soFootL  , iSoundWalkL  , SOF_3D  | SOF_VOLUMETRIC );
#line 9780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iSoundWalkR  != - 1)
#line 9782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soFootR  , iSoundWalkR  , SOF_3D  | SOF_VOLUMETRIC );
#line 9784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(bWalking )
#line 9788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmNow  > m_tmMoveSound  + plr_fWalkSoundDelay )
#line 9790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmMoveSound  = tmNow ;
#line 9792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMoveSoundLeft  = ! m_bMoveSoundLeft ;
#line 9793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMoveSoundLeft  && iSoundWalkL  != - 1)
#line 9794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soFootL  , iSoundWalkL  , SOF_3D  | SOF_VOLUMETRIC );
#line 9796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iSoundWalkR  != - 1)
#line 9798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soFootR  , iSoundWalkR  , SOF_3D  | SOF_VOLUMETRIC );
#line 9800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(bDiving )
#line 9804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmNow  > m_tmMoveSound  + plr_fDiveSoundDelay )
#line 9806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmMoveSound  = tmNow ;
#line 9808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMoveSoundLeft  = ! m_bMoveSoundLeft ;
#line 9809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMoveSoundLeft )
#line 9810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(bSwimming )
#line 9820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmNow  > m_tmMoveSound  + plr_fSwimSoundDelay )
#line 9822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmMoveSound  = tmNow ;
#line 9824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMoveSoundLeft  = ! m_bMoveSoundLeft ;
#line 9825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMoveSoundLeft )
#line 9826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TIME  tmBreathDelay  = tmNow  - en_tmLastBreathed ;
#line 9838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_tmMaxHoldBreath  - tmBreathDelay  < 20.0f)
#line 9839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_tmMouthSoundLast  + 2.0f < tmNow )
#line 9842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmMouthSoundLast  = tmNow ;
#line 9844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetRandomMouthPitch  (0.9f , 1.1f);
#line 9846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1 && m_bSkilling )
#line 9853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! HardCodingSkill  (FALSE ))
#line 9856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillAnimation  ();
#line 9858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 9861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . AnimatePlayer  ();
#line 9864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
#define HP_PERCENT	0.50f	
  
#line 9868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::SkillCondition(INDEX skillIndex,CEntityPointer penTarget,BOOL & bLostTarget,BOOL & bAutoAttack) 
#line 9869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & skill  = _pNetwork  -> GetSkillData  (skillIndex );
#line 9871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bLostTarget  = TRUE ;
#line 9872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAutoAttack  = FALSE ;
#line 9873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(m_nCurrentSkillNum )
#line 9874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 128: 
#line 9876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bConfused  = TRUE ;
#line 9878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ipl ;
#line 9879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> IsEnemy  ())
#line 9880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_amtMob  . Count  ();++ ipl )
#line 9882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobTarget  & mt  = _pNetwork  -> ga_srvServer  . srv_amtMob  [ ipl  ];
#line 9884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mt  . mob_iClientIndex  == penTarget  -> en_ulID )
#line 9885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! mt  . mob_statusEffect  . IsConfuse  ())
#line 9887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bConfused  = FALSE ;
#line 9889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  -> IsCharacter  ())
#line 9895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl )
#line 9897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl  ];
#line 9899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_iClientIndex  == penTarget  -> en_ulID )
#line 9900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ct  . cha_statusEffect  . IsConfuse  ())
#line 9902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bConfused  = FALSE ;
#line 9904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  -> IsSlave  ())
#line 9910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actSlave  . Count  ();++ ipl )
#line 9912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSlaveTarget  & st  = _pNetwork  -> ga_srvServer  . srv_actSlave  [ ipl  ];
#line 9914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(st  . slave_iClientIndex  == penTarget  -> en_ulID )
#line 9915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! st  . slave_statusEffect  . IsConfuse  ())
#line 9917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bConfused  = FALSE ;
#line 9919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 9921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! bConfused )
#line 9925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strMsg ;
#line 9927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMsg  . PrintF  (_S  (1447 , "%s 스킬을 쓰려면 목표가 혼란상태여야 합니다.") , skill  . GetName  ());
#line 9928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strMsg  , SYSMSG_ERROR );
#line 9929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bLostTarget  = FALSE ;
#line 9930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAutoAttack  = FALSE ;
#line 9931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 9932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE ;
#line 9938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 152: 
#line 9939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 153: 
#line 9940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 228: 
#line 9941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . maxHP  * HP_PERCENT  < _pNetwork  -> MyCharacterInfo  . hp )
#line 9943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strMsg ;
#line 9945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMsg  . PrintF  (_S  (2084 , "%s 스킬을 쓰려면 현재 hp가 최대 hp의 %.0f 퍼센트 이하여야 합니다.") , skill  . GetName  () , (HP_PERCENT  * 100));
#line 9946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strMsg  , SYSMSG_ERROR );
#line 9947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 9948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE ;
#line 9950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 9952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 9954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::HardCodingSkill(BOOL bOnlyTest) 
#line 9955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != 128 
#line 9957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& m_nCurrentSkillNum  != 155 
#line 9958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& m_nCurrentSkillNum  != 191
#line 9960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 9961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 9963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 9964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bOnlyTest ){return TRUE ;}
#line 9966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 9967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bIdleAnim  = TRUE ;
#line 9968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & skill  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 9969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityPointer penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 9971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_afHardCodeValue  . Count  () == 0){m_afHardCodeValue  . New  (32);}
#line 9973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(m_nCurrentSkillNum )
#line 9974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 128: 
#line 9976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fTotalSkillTime  = 2.5f * _pNetwork  -> MyCharacterInfo  . skillSpeed ;
#line 9978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fFirstAttackTime  = 1.7f * _pNetwork  -> MyCharacterInfo  . skillSpeed ;
#line 9979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fAttackTime  = 0.7f * _pNetwork  -> MyCharacterInfo  . skillSpeed ;
#line 9980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static INDEX iFireAnimID  = ska_StringToID  (skill  . GetFireAnim  (_pNetwork  -> MyCharacterInfo  . bExtension ));
#line 9981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT fAttackTimeOnce  = GetModelInstance  () -> GetAnimLength  (iFireAnimID );
#line 9982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT fDistFromCB  = 1.0f;
#line 9983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT fDamageTime  = 999.0f;
#line 9984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  == NULL ){break ;}
#line 9986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 0)
#line 9987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 9988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 9989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = _pTimer  -> GetLerpedCurrentTick  ();
#line 9991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D pl  = GetPlacement  ();
#line 9992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 11 ] = pl  . pl_OrientationAngle  (1);
#line 9993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 12 ] = pl  . pl_OrientationAngle  (2);
#line 9994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 13 ] = pl  . pl_OrientationAngle  (3);
#line 9995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 14 ] = pl  . pl_PositionVector  (1);
#line 9996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 15 ] = pl  . pl_PositionVector  (2);
#line 9997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 16 ] = pl  . pl_PositionVector  (3);
#line 9998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (NULL  , 1);
#line 9999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . statusEffect  . Refresh  (NULL  , CStatusEffect  :: R_NONE );
#line 10000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOn  (ENF_HIDDEN );
#line 10001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDir  = penTarget  -> GetPlacement  () . pl_PositionVector  - GetPlacement  () . pl_PositionVector ;
#line 10002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 9 ] = vDir  . Length  () / fFirstAttackTime ;
#line 10003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
LONG  lTargetIndex  = - 1;
#line 10009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
lTargetIndex  = penTarget  -> GetNetworkID  ();
#line 10010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , penTarget  
#line 10011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, lTargetIndex  , TRUE );
#line 10012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 1)
#line 10016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime ) < fFirstAttackTime )
#line 10018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT delta  = _pTimer  -> GetLerpedCurrentTick  () - m_afHardCodeValue  [ 1 ];
#line 10020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDir  = penTarget  -> GetPlacement  () . pl_PositionVector  
#line 10022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
- GetPlacement  () . pl_PositionVector ;
#line 10023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDir  . SafeNormalize  ();
#line 10024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew  = GetPlacement  ();
#line 10025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  += vDir  * m_afHardCodeValue  [ 9 ] * delta ;
#line 10026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 10032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTarget  -> GetModelInstance  () -> GetCurrentColisionBox  (aabb );
#line 10033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D size  = aabb  . Size  ();
#line 10034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 0 ] = sqrtf  (size  (1) * size  (1) + size  (3) * size  (3)) * 0.5f;
#line 10036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOff  (ENF_HIDDEN );
#line 10037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& GetModelInstance  () -> m_tmSkaTagManager  , 1);
#line 10038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . statusEffect  . Refresh  (& GetModelInstance  () -> m_tmSkaTagManager  , CStatusEffect  :: R_PARTY );
#line 10040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew ;
#line 10041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRadius  = m_afHardCodeValue  [ 0 ] + fDistFromCB ;
#line 10042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D deltaPos  (fRadius  * (0.5f * 1.7320f) , 0 , fRadius  * 0.5f);
#line 10043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  = penTarget  -> GetPlacement  () . pl_PositionVector  + deltaPos ;
#line 10044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  = GetEulerAngleFromDir  ((- deltaPos ) . SafeNormalize  ());
#line 10045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (0);
#line 10048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (iFireAnimID  , AN_NORESTART  , 1 , 0 , ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 10050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> MyCharacterInfo  . bExtension )
#line 10051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_DAIR_STRIKE_BLOW1 ) , SOF_3D  | SOF_VOLUMETRIC );
#line 10053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_A_DAIR_STRIKE_BLOW1 ) , SOF_3D  | SOF_VOLUMETRIC );
#line 10057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect1  (_pNetwork  -> MyCharacterInfo  . bExtension ) , 
#line 10060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
& GetModelInstance  () -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 10062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 2 ] = 2 * (m_afHardCodeValue  [ 0 ] + fDistFromCB ) / fAttackTimeOnce ;
#line 10064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = skill  . GetDelay  (0 , _pNetwork  -> MyCharacterInfo  . bExtension );
#line 10065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 2)
#line 10068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT delta  = _pTimer  -> GetLerpedCurrentTick  () - m_afHardCodeValue  [ 1 ];
#line 10071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT deltaDist  = m_afHardCodeValue  [ 2 ] * delta ;
#line 10073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew ;
#line 10074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D deltaDir  = (penTarget  -> GetPlacement  () . pl_PositionVector  - GetPlacement  () . pl_PositionVector ) . SafeNormalize  ();
#line 10075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  = GetPlacement  () . pl_PositionVector  + deltaDir  * deltaDist ;
#line 10076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  = GetEulerAngleFromDir  (deltaDir );
#line 10077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime  > fFirstAttackTime  + fDamageTime )
#line 10080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitPoint  = penTarget  -> GetPlacement  () . pl_PositionVector  + deltaDir  * (- m_afHardCodeValue  [ 0 ]);
#line 10083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Normal Hit" , _pTimer  -> GetLerpedCurrentTick  () , vHitPoint  , deltaDir );
#line 10084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = 999.0f;
#line 10085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime  > fFirstAttackTime  + fAttackTimeOnce )
#line 10087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = skill  . GetDelay  (0 , _pNetwork  -> MyCharacterInfo  . bExtension );
#line 10089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 3)
#line 10095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew ;
#line 10099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRadius  = m_afHardCodeValue  [ 0 ] + fDistFromCB ;
#line 10100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D deltaPos  (- fRadius  * (0.5f * 1.7320f) , 0 , fRadius  * 0.5f);
#line 10101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  = penTarget  -> GetPlacement  () . pl_PositionVector  + deltaPos ;
#line 10102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  = GetEulerAngleFromDir  ((- deltaPos ) . SafeNormalize  ());
#line 10103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (0);
#line 10106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (iFireAnimID  , AN_NORESTART  , 1 , 0 , ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 10108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> MyCharacterInfo  . bExtension )
#line 10109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_DAIR_STRIKE_BLOW2 ) , SOF_3D  | SOF_VOLUMETRIC );
#line 10111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_A_DAIR_STRIKE_BLOW2 ) , SOF_3D  | SOF_VOLUMETRIC );
#line 10115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect1  (_pNetwork  -> MyCharacterInfo  . bExtension ) , 
#line 10118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
& GetModelInstance  () -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 10120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 4)
#line 10124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT delta  = _pTimer  -> GetLerpedCurrentTick  () - m_afHardCodeValue  [ 1 ];
#line 10127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT deltaDist  = m_afHardCodeValue  [ 2 ] * delta ;
#line 10129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew ;
#line 10130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D deltaDir  = (penTarget  -> GetPlacement  () . pl_PositionVector  - GetPlacement  () . pl_PositionVector ) . SafeNormalize  ();
#line 10131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  = GetPlacement  () . pl_PositionVector  + deltaDir  * deltaDist ;
#line 10132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  = GetEulerAngleFromDir  (deltaDir );
#line 10133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime  > fFirstAttackTime  + fDamageTime )
#line 10136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitPoint  = penTarget  -> GetPlacement  () . pl_PositionVector  + deltaDir  * (- m_afHardCodeValue  [ 0 ]);
#line 10139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Normal Hit" , _pTimer  -> GetLerpedCurrentTick  () , vHitPoint  , deltaDir );
#line 10140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = 999.0f;
#line 10141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime  > fFirstAttackTime  + 2 * fAttackTimeOnce )
#line 10143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = skill  . GetDelay  (0 , _pNetwork  -> MyCharacterInfo  . bExtension );
#line 10145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 5)
#line 10151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew ;
#line 10155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRadius  = m_afHardCodeValue  [ 0 ] + fDistFromCB ;
#line 10156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D deltaPos  (0 , 0 , - fRadius  * 0.5f);
#line 10157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  = penTarget  -> GetPlacement  () . pl_PositionVector  + deltaPos ;
#line 10158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  = GetEulerAngleFromDir  ((- deltaPos ) . SafeNormalize  ());
#line 10159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (0);
#line 10162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (iFireAnimID  , AN_NORESTART  , 1 , 0 , ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 10164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> MyCharacterInfo  . bExtension )
#line 10165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_DAIR_STRIKE_BLOW3 ) , SOF_3D  | SOF_VOLUMETRIC );
#line 10167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_A_DAIR_STRIKE_BLOW3 ) , SOF_3D  | SOF_VOLUMETRIC );
#line 10171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect1  (_pNetwork  -> MyCharacterInfo  . bExtension ) , 
#line 10174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
& GetModelInstance  () -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 10176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 6)
#line 10180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT delta  = _pTimer  -> GetLerpedCurrentTick  () - m_afHardCodeValue  [ 1 ];
#line 10183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_afHardCodeValue  [ 1 ] = _pTimer  -> GetLerpedCurrentTick  ();
#line 10184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT deltaDist  = m_afHardCodeValue  [ 2 ] * delta ;
#line 10185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew ;
#line 10186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D deltaDir  = (penTarget  -> GetPlacement  () . pl_PositionVector  - GetPlacement  () . pl_PositionVector ) . SafeNormalize  ();
#line 10187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  = GetPlacement  () . pl_PositionVector  + deltaDir  * deltaDist ;
#line 10188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  = GetEulerAngleFromDir  (deltaDir );
#line 10189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime  > fFirstAttackTime  + fDamageTime )
#line 10192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitPoint  = penTarget  -> GetPlacement  () . pl_PositionVector  + deltaDir  * (- m_afHardCodeValue  [ 0 ]);
#line 10195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Normal Hit" , _pTimer  -> GetLerpedCurrentTick  () , vHitPoint  , deltaDir );
#line 10196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = 999.0f;
#line 10197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime  > fFirstAttackTime  + 3 * fAttackTimeOnce )
#line 10199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = skill  . GetDelay  (0 , _pNetwork  -> MyCharacterInfo  . bExtension );
#line 10201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 7)
#line 10207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
InflictDirectDamage  (penTarget  , this  , DMT_NONE  , 0 , FLOAT3D (0 , 0 , 0) , FLOAT3D (0 , 0 , 0));
#line 10209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew ;
#line 10210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  (1) = m_afHardCodeValue  [ 11 ];
#line 10211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  (2) = m_afHardCodeValue  [ 12 ];
#line 10212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_OrientationAngle  (3) = m_afHardCodeValue  [ 13 ];
#line 10213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  (1) = m_afHardCodeValue  [ 14 ];
#line 10214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  (2) = m_afHardCodeValue  [ 15 ];
#line 10215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  (3) = m_afHardCodeValue  [ 16 ];
#line 10216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlacement  (plNew );
#line 10217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 10218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & penTarget  -> GetModelInstance  () -> m_tmSkaTagManager  
#line 10219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  ());
#line 10220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageTime  = 999.0f;
#line 10221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}break ;
#line 10223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 155: 
#line 10224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect1  (_pNetwork  -> MyCharacterInfo  . bExtension ) , 
#line 10226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
& GetModelInstance  () -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 10227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , this  , _pNetwork  -> MyCharacterInfo  . index  , TRUE );
#line 10228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}break ;
#line 10229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 191: 
#line 10230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static INDEX animID  = ska_StringToID  (skill  . GetFireAnim  (_pNetwork  -> MyCharacterInfo  . bExtension ));
#line 10232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT animTime  = GetModelInstance  () -> GetAnimLength  (animID );
#line 10233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 0)
#line 10234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = _pTimer  -> GetLerpedCurrentTick  ();
#line 10237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , this  , _pNetwork  -> MyCharacterInfo  . index  , TRUE );
#line 10238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (animID  , AN_NORESTART  | AN_CLEAR  , 1.0f , 0 , ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 10239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 1)
#line 10242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> GetLerpedCurrentTick  () - m_tmSkillStartTime  <= animTime )
#line 10244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bIdleAnim  = FALSE ;
#line 10249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 10250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}break ;
#line 10260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  :
#line 10261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 10263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 10265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReadySendSkillMessage  = TRUE ;
#line 10269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  = FALSE ;
#line 10270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartPostSkill  = TRUE ;
#line 10271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 10273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iSkillEffectStep  = 0;
#line 10275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = - 1;
#line 10276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = 0.0f;
#line 10277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSkilling  = FALSE ;
#line 10278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 10279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 10281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 10283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bIdleAnim )
#line 10284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 10286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 10287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nReservedSkillNum  != - 1)
#line 10290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = m_nReservedSkillNum ;
#line 10292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 10293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 10297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 10300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOff  (ENF_HIDDEN );
#line 10301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopRotating  ();
#line 10303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_SKILL );
#line 10305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 10306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 10309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RoundViewAngle(ANGLE & aViewAngle,ANGLE aRound) 
#line 10310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(aViewAngle  > aRound )
#line 10312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aViewAngle  = aRound ;
#line 10314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(aViewAngle  < - aRound )
#line 10316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aViewAngle  = - aRound ;
#line 10318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10319 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 10322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::DeathActions(const CPlayerAction & paAction) 
#line 10323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsReapplyingActions  ()){return ;}
#line 10326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredTranslation  (FLOAT3D (0 , 0 , 0));
#line 10340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . Rotate_HPB  (ANGLE3D (
#line 10341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(ANGLE) ((FLOAT) paAction  . pa_aRotation  (1) * _pTimer  -> TickQuantum ) , 
#line 10342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(ANGLE) ((FLOAT) paAction  . pa_aRotation  (2) * _pTimer  -> TickQuantum ) , 
#line 10343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(ANGLE) ((FLOAT) paAction  . pa_aRotation  (3) * _pTimer  -> TickQuantum )));
#line 10346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fCameraAngle  = en_plViewpoint  . pl_OrientationAngle  (1) * 2;
#line 10349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RoundViewAngle  (en_plViewpoint  . pl_OrientationAngle  (2) , PITCH_MAX );
#line 10350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RoundViewAngle  (en_plViewpoint  . pl_OrientationAngle  (3) , BANKING_MAX );
#line 10352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulReleasedButtons  & PLACT_FIRE )
#line 10353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES ){
#line 10365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pen3rdPersonView  == NULL ){
#line 10366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  = CreateEntity  (GetPlacement  () , CLASS_PLAYER_VIEW  , WLD_AUTO_ENTITY_ID  , FALSE );
#line 10367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EViewInit  eInit ;
#line 10368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . eidOwner  = this ;
#line 10369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . eidCamera  = (CEntity  *) NULL ;
#line 10370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . vtView  = VT_3RDPERSONVIEW ;
#line 10371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . bDeathFixed  = FALSE ;
#line 10372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  -> Initialize  (eInit  , FALSE );
#line 10373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iViewState  = PVT_3RDPERSONVIEW ;
#line 10378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 10383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ButtonsActions(CPlayerAction & paAction) 
#line 10384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_checkLock  == 1){
#line 10387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((_pTimer  -> GetHighPrecisionTimer  () . GetSeconds  () - m_timeCnt ) > 3){
#line 10388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 10389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_checkLock  = 0;
#line 10390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_timeCnt  = 0;
#line 10391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsReapplyingActions  ())
#line 10397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bDying  && ! m_bDeathChk )
#line 10404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeathYou  ();
#line 10406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_ARROWLEFT  ] . ic_fValue  == 1.0f 
#line 10409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_NUM4  ] . ic_fValue  == 1.0f)
#line 10410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (1) += 3;
#line 10412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_ARROWRIGHT  ] . ic_fValue  == 1.0f 
#line 10414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_NUM6  ] . ic_fValue  == 1.0f)
#line 10415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (1) -= 3;
#line 10417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_ARROWUP  ] . ic_fValue  == 1.0f 
#line 10419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_NUM8  ] . ic_fValue  == 1.0f)
#line 10420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (2) -= 3;
#line 10422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_ARROWDOWN  ] . ic_fValue  == 1.0f 
#line 10424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pInput  -> GetInputDevice  (1) -> id_aicControls  [ KID_NUM2  ] . ic_fValue  == 1.0f)
#line 10425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (2) += 3;
#line 10427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_plViewpoint  . pl_OrientationAngle  (2) >= 20.0f)
#line 10431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (2) = 20.0f;
#line 10433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> IsLMousePressed  ())
#line 10436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulNewButtons  |= PLACT_FIRE ;
#line 10438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pInput  -> SetLMousePressed  (FALSE );
#line 10439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL _bFlip  = FALSE ;
#line 10443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> IsWheelPressed  ())
#line 10444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bFlip )
#line 10446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (1) = GetPlacement  () . pl_OrientationAngle  (1) / 2;
#line 10449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (1) = GetPlacement  () . pl_OrientationAngle  (1) / 2 + 90;
#line 10454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bFlip  = ! _bFlip ;
#line 10457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pInput  -> SetWheelPressed  (FALSE );
#line 10458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pInput  -> IsHomePressed  ())
#line 10462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  (1) = 0.0f;
#line 10464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pInput  -> SetHomePressed  (FALSE );
#line 10465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _bInTestGame )
#line 10475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRunningMode )
#line 10477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fSpeed  = _pNetwork  -> MyCharacterInfo  . runspeed ;
#line 10479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fSpeed  = _pNetwork  -> MyCharacterInfo  . walkspeed ;
#line 10483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSpeedUp )
#line 10488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSeriousSpeed  = 1000.0f;
#line 10490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSeriousSpeed  = 0.0f;
#line 10494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _bInTestGame  && 
#line 10497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(_pUIMgr  -> GetBilling  () -> IsLock  () || 
#line 10498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bChanging  || 
#line 10499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  || 
#line 10500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStuned  || 
#line 10501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! m_apr  || 
#line 10502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  || 
#line 10503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . hp  == 0
#line 10505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
))
#line 10506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bLockMove  && (ulNewButtons  & PLACT_FIRE  || m_bReserveMove  || _pInput  -> IsRMousePressed  ()))
#line 10515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> IsCSFlagOn  (CSF_CANNOT_MOVE_MASK ))
#line 10517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  *) & * m_penView ) -> UnlockRotate  ();
#line 10522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bReserveMove )
#line 10523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plRay ;
#line 10525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plRay  = GetPlayerWeapons  () -> GetMouseHitInformation  (_pInput  -> inp_ptMousePos  , m_apr  , TRUE );
#line 10526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this ))
#line 10530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 10532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_vRayHitTmp  = GetPlayerWeapons  () -> m_vRayHitReserve ;
#line 10534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = GetPlayerWeapons  () -> m_penRayHitReserve ;
#line 10535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_fRayHitDistanceTmp  = GetPlayerWeapons  () -> m_fRayHitDistanceReserve ;
#line 10537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = FLOAT3D (GetPlayerWeapons  () -> m_vRayHitTmp  (1) , GetPlayerWeapons  () -> m_vRayHitTmp  (2) , GetPlayerWeapons  () -> m_vRayHitTmp  (3));
#line 10538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEnt  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEnt  != NULL  && penEnt  -> GetFlags  () & ENF_ALIVE )
#line 10540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = penEnt  -> en_plPlacement  . pl_PositionVector ;
#line 10542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlayerWeapons  () -> m_vRayHitTmp ;
#line 10546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 10550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp )
#line 10551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  -> GetFlags  () & ENF_ALIVE  || 
#line 10553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  -> GetFlags  () & ENF_ITEM )
#line 10554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 10562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 10563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> GetFlags  () & ENF_ALIVE  || penTarget  -> IsCharacter  ())
#line 10565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT MaxHealth ;
#line 10567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CurrentHealth ;
#line 10568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  Level ;
#line 10569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  mobIdx ;
#line 10570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkMode  = - 1;
#line 10571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkState ;
#line 10572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkLegit ;
#line 10574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MaxHealth  = ((CUnit  *) ((CEntity  *) penTarget )) -> m_nMaxiHealth ;
#line 10575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CurrentHealth  = ((CUnit  *) ((CEntity  *) penTarget )) -> m_nCurrentHealth ;
#line 10576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level  = ((CUnit  *) ((CEntity  *) penTarget )) -> m_nMobLevel ;
#line 10577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mobIdx  = ((CUnit  *) ((CEntity  *) penTarget )) -> m_nMobDBIndex ;
#line 10579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> IsCharacter  ())
#line 10580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level  = 0;
#line 10582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkMode  = ((CCharacter  *) ((CEntity  *) penTarget )) -> m_nPkMode ;
#line 10583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkState  = ((CCharacter  *) ((CEntity  *) penTarget )) -> m_nPkState ;
#line 10584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkLegit  = ((CCharacter  *) ((CEntity  *) penTarget )) -> m_nLegit ;
#line 10585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(PkMode  != - 1)
#line 10588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTarget  -> SetTargetInfo  (MaxHealth  , CurrentHealth  , FALSE  , Level  , PkMode  , PkState  , PkLegit );
#line 10590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTarget  -> SetTargetInfo  (MaxHealth  , CurrentHealth  , FALSE  , Level  , 0 , 0 , 0 , mobIdx );
#line 10595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 10601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CEffectGroupManager  :: Instance  () . IsValidCreated  (m_pPickingEffectGroup ))
#line 10606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  -> Stop  (PICKING_EFFECT_REMAIN_TIME );
#line 10608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  = NULL ;
#line 10612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  != NULL )
#line 10614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  -> GetRenderType  () == RT_TERRAIN )
#line 10616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  = StartEffectGroup  ("Picking Terrain" 
#line 10618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  () , m_vDesiredPosition  , ANGLE3D (0 , 0 , 0));
#line 10619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if((GetPlayerWeapons  () -> m_penRayHitTmp  -> GetRenderType  () == RT_BRUSH  
#line 10621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| GetPlayerWeapons  () -> m_penRayHitTmp  -> GetRenderType  () == RT_FIELDBRUSH ) 
#line 10622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& GetPlayerWeapons  () -> m_bPickConditionOk )
#line 10623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D angle  = GetEulerAngleFromDir  (GetPlayerWeapons  () -> m_vRayHitSurfaceNormal );
#line 10625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  = StartEffectGroup  ("Picking BSP" 
#line 10626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  () , m_vDesiredPosition  , angle );
#line 10627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pInput  -> SetRMousePressed  (FALSE );
#line 10633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 10634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fLength  = vDelta  . Length  ();
#line 10636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  != NULL  && GetPlayerWeapons  () -> m_penRayHitTmp  -> GetFlags  () & ENF_ALIVE  && m_nDesiredSkillNum  != - 1)
#line 10637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nDesiredSkillNum );
#line 10640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetFireRange  () >= fLength )
#line 10641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEnt  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEnt  != NULL  && penEnt  -> GetFlags  () & ENF_ALIVE  && penEnt  != this )
#line 10651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEnt  -> IsFirstExtraFlagOn  (ENF_EX1_NPC ) || 
#line 10653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEnt  -> IsFirstExtraFlagOn  (ENF_EX1_PRODUCTION ) || 
#line 10654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEnt  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_PET ) || 
#line 10655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEnt  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ) || 
#line 10656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEnt  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ))
#line 10657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  () || 
#line 10663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsLegitTarget  (penEnt ) || 
#line 10664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penEnt  -> en_ulID ) || 
#line 10665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUISWDoc  -> IsWar  ())
#line 10666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 10669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  fAttackDistance  = _pNetwork  -> MyCharacterInfo  . attackrange ;
#line 10671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsAttacking  () && m_nCurrentSkillNum  != - 1)
#line 10672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 10675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillDistance  = SkillData  . GetFireRange  ();
#line 10677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fLength  < m_fSkillDistance )
#line 10678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 10680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 10682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 10685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penEnt ))
#line 10686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 10688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2085 , "가로막혀서 스킬을 사용할수 없습니다."));
#line 10689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 10690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 10693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 10694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(BUTTON_MOVE_ENABLE ){SendMyNextMovePosition  (vDelta );}
#line 10703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(! IsAttacking  () && m_nDesiredSkillNum  != - 1)
#line 10706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nDesiredSkillNum );
#line 10708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillDistance  = SkillData  . GetFireRange  ();
#line 10710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fLength  < m_fSkillDistance )
#line 10711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 10713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 10715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 10717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penEnt ))
#line 10718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 10720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2085 , "가로막혀서 스킬을 사용할수 없습니다."));
#line 10721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 10722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 10725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 10726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendMyNextMovePosition  (vDelta );
#line 10735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(fLength  < fAttackDistance  && ! IsAttacking  () && m_nCurrentSkillNum  == - 1)
#line 10738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 10740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 10742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 10744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penEnt ))
#line 10745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 10747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2086 , "가로막혀서 공격할수 없습니다."));
#line 10748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 10750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 10753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , penEnt  , fLength );
#line 10758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 10759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartAttack  ();
#line 10761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 10765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(fLength  >= 2.0f && ! IsAttacking  ())
#line 10771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(BUTTON_MOVE_ENABLE ){SendMyNextMovePosition  (vDelta );}
#line 10776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEnt  -> IsCharacter  ())
#line 10781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fLength  >= 1.0f)
#line 10783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(BUTTON_MOVE_ENABLE ){SendMyNextMovePosition  (vDelta );}
#line 10788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penEnt  == this )
#line 10791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penEnt  -> IsEnemy  () || penEnt  -> IsPet  () || penEnt  -> IsSlave  ())
#line 10795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 10798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  fAttackDistance  = _pNetwork  -> MyCharacterInfo  . attackrange ;
#line 10801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsAttacking  () && m_nCurrentSkillNum  != - 1)
#line 10802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 10805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillDistance  = SkillData  . GetFireRange  ();
#line 10807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fLength  < m_fSkillDistance )
#line 10808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 10810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 10812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 10815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penEnt ))
#line 10816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 10818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2085 , "가로막혀서 스킬을 사용할수 없습니다."));
#line 10819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 10820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 10823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 10824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(BUTTON_MOVE_ENABLE ){SendMyNextMovePosition  (vDelta );}
#line 10834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(! IsAttacking  () && m_nDesiredSkillNum  != - 1)
#line 10838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nDesiredSkillNum );
#line 10841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillDistance  = SkillData  . GetFireRange  ();
#line 10843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fLength  < m_fSkillDistance )
#line 10844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 10846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 10848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 10850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penEnt ))
#line 10851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 10853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2085 , "가로막혀서 스킬을 사용할수 없습니다."));
#line 10854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 10855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 10858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 10859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(BUTTON_MOVE_ENABLE ){SendMyNextMovePosition  (vDelta );}
#line 10868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(fLength  < fAttackDistance  && ! IsAttacking  () && m_nCurrentSkillNum  == - 1)
#line 10873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 10875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 10877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 10880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penEnt ))
#line 10881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 10883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2086 , "가로막혀서 공격할수 없습니다."));
#line 10884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 10886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 10887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 10889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 10890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , penEnt  , fLength );
#line 10894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 10895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartAttack  ();
#line 10897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 10899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 10901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(fLength  >= 2.0f && ! IsAttacking  ())
#line 10906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(BUTTON_MOVE_ENABLE ){SendMyNextMovePosition  (vDelta );}
#line 10911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(fLength  >= 0.5f)
#line 10916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 10919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = TRUE ;
#line 10920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bTargetDirection  = vDelta ;
#line 10925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(ulNewButtons  & PLACT_FIRE  && m_bLockMove )
#line 10929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plRay ;
#line 10940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = TRUE ;
#line 10941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plRay  = GetPlayerWeapons  () -> GetMouseHitInformationReserve  (_pInput  -> inp_ptMousePos  , m_apr  , TRUE  , TRUE );
#line 10944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAttacking  ())
#line 10947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 10948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 10950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 10951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES ){
#line 10956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pen3rdPersonView  == NULL ){
#line 10957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  = CreateEntity  (GetPlacement  () , CLASS_PLAYER_VIEW  , WLD_AUTO_ENTITY_ID  , FALSE );
#line 10958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EViewInit  eInit ;
#line 10959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . eidOwner  = this ;
#line 10960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . eidCamera  = (CEntity  *) NULL ;
#line 10961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . vtView  = VT_3RDPERSONVIEW ;
#line 10962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInit  . bDeathFixed  = FALSE ;
#line 10963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  -> Initialize  (eInit  , FALSE );
#line 10964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iViewState  = PVT_3RDPERSONVIEW ;
#line 10969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulButtonsNow  & PLACT_CENTER_VIEW ){
#line 10974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
paAction  . pa_aRotation  (2) += Clamp  (- en_plViewpoint  . pl_OrientationAngle  (2) / _pTimer  -> TickQuantum  , - 900.0f , + 900.0f);
#line 10975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 10976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheatsEnabled(void) 
#line 11004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return (GetSP  () -> sp_ctMaxPlayers  == 1 || GetSP  () -> sp_bQuickTest ) && m_penActionMarker  == NULL  && ! _SE_DEMO ;
#line 11006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::GetLerpedAbsoluteViewPlacement(CPlacement3D & plView) 
#line 11015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_INITIALIZED ))
#line 11017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = GetPlacement  ();
#line 11019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bDiscard3rdView  = FALSE ;
#line 11020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 11021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bSharpTurning  = TRUE ;
#line 11024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((! _pNetwork  -> IsPlayerLocal  (this ) && ! _pNetwork  -> IsPlayingDemo  ()) || _pNetwork  -> IsPlayingDemo  () || _pNetwork  -> IsGameFinished  ())
#line 11025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSharpTurning  = FALSE ;
#line 11027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fLerpFactor  = _pTimer  -> GetLerpFactor  ();
#line 11032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bDontLerpView )
#line 11033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plLastViewpoint  = en_plViewpoint ;
#line 11035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = en_plViewpoint ;
#line 11036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDontLerpView  = FALSE ;
#line 11037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . Lerp  (en_plLastViewpoint  , en_plViewpoint  , fLerpFactor );
#line 11041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fOriginalPitch  = plView  . pl_OrientationAngle  (2);
#line 11046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . ChangeView  (plView );
#line 11051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES  || _bDiscard3rdView )
#line 11052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPosLerped  = GetLerpedPlacement  ();
#line 11055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bSharpTurning )
#line 11056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRotationDamping  = CalculateViewRotationDamping  ();
#line 11059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . pl_OrientationAngle  (1) = en_plViewpoint  . pl_OrientationAngle  (1) + GetRotationDiff  (m_iLastRotationH  , m_aLocalRotation  (1)) * fRotationDamping ;
#line 11060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . pl_OrientationAngle  (2) = en_plViewpoint  . pl_OrientationAngle  (2) + GetRotationDiff  (m_iLastRotationP  , m_aLocalRotation  (2)) * fRotationDamping ;
#line 11061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . pl_OrientationAngle  (3) = en_plViewpoint  . pl_OrientationAngle  (3) + GetRotationDiff  (m_iLastRotationB  , m_aLocalRotation  (3)) * fRotationDamping ;
#line 11064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RoundViewAngle  (plView  . pl_OrientationAngle  (2) , PITCH_MAX );
#line 11065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RoundViewAngle  (plView  . pl_OrientationAngle  (3) , BANKING_MAX );
#line 11070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aCurr  = GetPlacement  () . pl_OrientationAngle ;
#line 11071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aLast  = en_plLastPlacement  . pl_OrientationAngle ;
#line 11072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aDesired  = en_aDesiredRotationRelative  * _pTimer  -> TickQuantum ;
#line 11073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATmatrix3D mCurr ;MakeRotationMatrixFast  (mCurr  , aCurr );
#line 11074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATmatrix3D mLast ;MakeRotationMatrixFast  (mLast  , aLast );
#line 11075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATmatrix3D mDesired ;MakeRotationMatrixFast  (mDesired  , aDesired );
#line 11076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mDesired  = en_mRotation  * (mDesired  * ! en_mRotation );
#line 11077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATmatrix3D mForced  = ! mDesired  * mCurr  * ! mLast ;
#line 11078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D aForced ;DecomposeRotationMatrixNoSnap  (aForced  , mForced );
#line 11079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(aForced  . MaxNorm  () < 1E-2){
#line 11080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aForced  = ANGLE3D (0 , 0 , 0);
#line 11081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATquat3D qForced ;qForced  . FromEuler  (aForced );
#line 11083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATquat3D qZero ;qZero  . FromEuler  (ANGLE3D (0 , 0 , 0));
#line 11084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATquat3D qLerped  = Slerp  (fLerpFactor  , qZero  , qForced );
#line 11085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATmatrix3D m ;
#line 11086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
qLerped  . ToMatrix  (m );
#line 11087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m  = m  * mDesired  * mLast ;
#line 11088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DecomposeRotationMatrixNoSnap  (plPosLerped  . pl_OrientationAngle  , m );
#line 11089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . RelativeToAbsoluteSmooth  (plPosLerped );
#line 11094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iViewState  == PVT_3RDPERSONVIEW )
#line 11096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = m_pen3rdPersonView  -> GetLerpedPlacement  ();
#line 11099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iViewState  == PVT_PLAYERAUTOVIEW )
#line 11101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = CPlacement3D (FLOAT3D (0 , plr_fViewHeightStand  , 0) , ANGLE3D (180 , - 90 , 0));
#line 11103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . RelativeToAbsoluteSmooth  (GetLerpedPlacement  ());
#line 11105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERTALWAYS  ("Unknown player view");
#line 11109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bDiscard3rdView  = FALSE ;
#line 11111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity * CPlayer::GetViewEntity(BOOL bCamera) 
#line 11115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES )
#line 11118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return this ;
#line 11121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iViewState  == PVT_3RDPERSONVIEW )
#line 11124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ulFlags  & PLF_ISZOOMING ){
#line 11126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return this ;
#line 11127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CPlayerView  &) * m_pen3rdPersonView ) . m_fDistance  > 0.5f && ! bCamera ){
#line 11133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_pen3rdPersonView ;
#line 11134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return this ;
#line 11136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iViewState  == PVT_PLAYERAUTOVIEW )
#line 11140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return this ;
#line 11143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERTALWAYS  ("Unknown player view");
#line 11147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return NULL ;
#line 11148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderChainsawParticles(BOOL bThird) 
#line 11152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fStretch  = 1.0f;
#line 11154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bThird )
#line 11155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fStretch  = 0.4f;
#line 11157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmNow  = _pTimer  -> GetLerpedCurrentTick  ();
#line 11160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iSpray  = 0;iSpray  < MAX_BULLET_SPRAYS ;iSpray  ++)
#line 11161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BulletSprayLaunchData  & bsld  = m_absldData  [ iSpray  ];
#line 11163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fLife  = 1.25f;
#line 11164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmNow  > (bsld  . bsld_tmLaunch  + fLife )){continue ;}
#line 11165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_BulletSpray  (bsld  . bsld_iRndBase  , bsld  . bsld_vPos  , bsld  . bsld_vG  , 
#line 11166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bsld  . bsld_eptType  , bsld  . bsld_tmLaunch  , bsld  . bsld_vStretch  * fStretch  , 1.0f);
#line 11167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iGore  = 0;iGore  < MAX_GORE_SPRAYS ;iGore  ++)
#line 11171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GoreSprayLaunchData  & gsld  = m_agsldData  [ iGore  ];
#line 11173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fLife  = 2.0f;
#line 11174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmNow  > (gsld  . gsld_tmLaunch  + fLife )){continue ;}
#line 11175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vPos  = gsld  . gsld_vPos ;
#line 11176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bThird )
#line 11177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vPos  = gsld  . gsld_v3rdPos ;
#line 11179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_BloodSpray  (gsld  . gsld_sptType  , vPos  , gsld  . gsld_vG  , gsld  . gsld_fGA  , 
#line 11181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_boxHitted  , gsld  . gsld_vSpilDirection  , 
#line 11182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
gsld  . gsld_tmLaunch  , gsld  . gsld_fDamagePower  * fStretch  , gsld  . gsld_colParticles );
#line 11183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderHUD(CPerspectiveProjection3D & prProjection,CDrawPort * pdp,
#line 11188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vViewerLightDirection,COLOR colViewerLight,COLOR colViewerAmbient,
#line 11189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bRenderWeapon,INDEX iEye) 
#line 11190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plViewOld  = prProjection  . ViewerPlacementR  ();
#line 11195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bRenderModels  = _pShell  -> GetINDEX  ("gfx_bRenderModels");
#line 11205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES ){
#line 11206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prProjection  . ViewerPlacementL  () = plViewOld ;
#line 11207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
prProjection  . Prepare  ();
#line 11208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CAnyProjection3D  apr ;
#line 11209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
apr  = prProjection ;
#line 11210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , iEye  , 1);
#line 11211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particle_PrepareSystem  (pdp  , apr );
#line 11212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particle_PrepareEntity  (2.0f , FALSE  , FALSE  , TRUE  , this );
#line 11213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderChainsawParticles  (FALSE );
#line 11214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particle_EndSystem  ();
#line 11215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plView ;
#line 11219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES )
#line 11220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = en_plViewpoint ;
#line 11223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . RelativeToAbsolute  (GetPlacement  ());
#line 11224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iViewState  == PVT_3RDPERSONVIEW )
#line 11226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = ((CPlayerView  &) * m_pen3rdPersonView ) . GetPlacement  ();
#line 11229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulR  = 255 , ulG  = 0 , ulB  = 0;
#line 11232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulA  = m_fDamageAmmount  * 5.0f;
#line 11235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmSinceWounding  = en_tmEntityTime  - m_tmWoundedTime ;
#line 11236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmSinceWounding  < 4.0f && ! IsReapplyingActions  ())
#line 11237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tmSinceWounding  < 0.001f){ulA  = (ulA  + 64) / 2;}
#line 11240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulA  = ClampUp  (ulA  , (ULONG ) 224);
#line 11246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static int  cnt  = 0;
#line 11265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  == 4){
#line 11266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulR  = 255;
#line 11267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulG  = 0;
#line 11268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulB  = 0;
#line 11269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulA  = 64;
#line 11270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(cnt  == 1){
#line 11272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulR  = 0;
#line 11273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulG  = 255;
#line 11274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulB  = 0;
#line 11275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulA  = 64;
#line 11276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(cnt  == 2){
#line 11278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulR  = 0;
#line 11279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulG  = 0;
#line 11280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulB  = 255;
#line 11281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulA  = 64;
#line 11282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(cnt  == 3){
#line 11284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulR  = 255;
#line 11285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulG  = 200;
#line 11286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulB  = 0;
#line 11287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulA  = 64;
#line 11288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(cnt  == 0){
#line 11290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulR  = 255;
#line 11291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulG  = 0;
#line 11292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulB  = 0;
#line 11293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulA  = 0;
#line 11294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingRA  += ulR  * ulA ;
#line 11298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingGA  += ulG  * ulA ;
#line 11299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingBA  += ulB  * ulA ;
#line 11300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingA  += ulA ;
#line 11304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colGlare  = GetWorldGlaring  ();
#line 11306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  ubR  , ubG  , ubB  , ubA ;
#line 11307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ColorToRGBA  (colGlare  , ubR  , ubG  , ubB  , ubA );
#line 11308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ubA  != 0){
#line 11309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingRA  += ULONG  (ubR ) * ULONG  (ubA );
#line 11310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingGA  += ULONG  (ubG ) * ULONG  (ubA );
#line 11311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingBA  += ULONG  (ubB ) * ULONG  (ubA );
#line 11312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> dp_ulBlendingA  += ULONG  (ubA );
#line 11313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> BlendScreen  ();
#line 11320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(hud_bShowInfo ){
#line 11321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bSnooping  = FALSE ;
#line 11322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penHUDPlayer  = this ;
#line 11323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penHUDOwner  = this ;
#line 11336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DrawHUD  (penHUDPlayer  , pdp  , bSnooping  , penHUDOwner );
#line 11337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderCursor(CDrawPort * pdp,void * pvUserData) 
#line 11341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bShowExtras  = (ULONG  (pvUserData ) & GRV_SHOWEXTRAS );
#line 11344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CAnyProjection3D  apr ;
#line 11345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penViewer ;
#line 11346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plViewer ;
#line 11347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
COLOR colBlend ;
#line 11350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDrawPort  dpCenter  (pdp  , 0);
#line 11351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dpCenter  . SetAsCurrent  ();
#line 11352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetupView  (& dpCenter  , apr  , penViewer  , plViewer  , colBlend  , FALSE );
#line 11353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Stereo_AdjustProjection  (* apr  , 0 , 1);
#line 11358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderHudPicFX  (& dpCenter );
#line 11360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(hud_bShowAll  && bShowExtras )
#line 11361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plView ;
#line 11363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iViewState  == PVT_PLAYEREYES )
#line 11364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = en_plViewpoint ;
#line 11367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  . RelativeToAbsolute  (GetPlacement  ());
#line 11368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iViewState  == PVT_3RDPERSONVIEW )
#line 11370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plView  = ((CPlayerView  &) * m_pen3rdPersonView ) . GetPlacement  ();
#line 11373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsFlagOn  (ENF_ALIVE ))
#line 11376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pInput  -> IsRMouseButtonPressed  ())
#line 11378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPerspectiveProjection3D  & prProjection  = * (CPerspectiveProjection3D  *) (CProjection3D  *) apr ;
#line 11380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerWeapons  &) * m_penWeapons ) . RenderCrosshair  (prProjection  , & dpCenter  , plView );
#line 11381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pdp  -> SetAsCurrent  ();
#line 11386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::InitializePlayer(BOOL bFirstInit) 
#line 11393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  = ANGLE3D (0 , 0 , 0);
#line 11396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_PositionVector  = FLOAT3D (0.0f , plr_fViewHeightStand  , 0.0f);
#line 11397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plLastViewpoint  = en_plViewpoint ;
#line 11400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= PLF_INITIALIZED  | PLF_LEVELSTARTED  | PLF_RESPAWNINPLACE ;
#line 11401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fFallTime  = 0.0f;
#line 11402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pstState  = PST_STAND ;
#line 11403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fDamageAmmount  = 0.0f;
#line 11404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmWoundedTime  = 0.0f;
#line 11405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmInvisibility  = 0.0f , 
#line 11406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmInvulnerability  = 0.0f , 
#line 11407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSeriousDamage  = 0.0f , 
#line 11408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSeriousSpeed  = 0.0f , 
#line 11410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bIsTransform  = FALSE ;
#line 11411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  = FALSE ;
#line 11412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iTransformType  = 0;
#line 11414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nChangeMonsterId  = 0;
#line 11415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bChanging  = FALSE ;
#line 11416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMobChange  = FALSE ;
#line 11419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . InitializeProperties  ();
#line 11421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> SendEvent  (EStart  ());
#line 11424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_AfterBurner_Prepare  (this );
#line 11427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (EPF_MODEL_WALKING  | EPF_HASLUNGS );
#line 11428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetCollisionFlags  (ECF_MODEL  | ((ECBI_PLAYER ) << ECB_IS ));
#line 11429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlags  (GetFlags  () | ENF_ALIVE );
#line 11432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl ){
#line 11433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_STAND  , AOF_LOOPING );
#line 11434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartSkaAnim  (this  , idPlayerWhole_Animation  [ ANIM_IDLE  ] , AN_LOOPING  , 0 , 0.5f);
#line 11436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayerTeleportCause  eCause ;
#line 11440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _cmiComm  . IsNetworkOn  ()){
#line 11442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bFirstInit ){
#line 11443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eCause  = TPC_FIRSTINIT ;
#line 11444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eCause  = TPC_OTHER ;
#line 11446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(eCause  == TPC_FIRSTINIT )
#line 11448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaTag  tag ;
#line 11450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__ROOT");
#line 11451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 11452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance ){en_pmiModelInstance  -> m_tmSkaTagManager  . Register  (& tag );}
#line 11453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__TOP");
#line 11454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 11455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 11456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> GetAllFramesBBox  (aabb );
#line 11457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetPos  (0 , aabb  . Size  () (2) * GetModelInstance  () -> mi_vStretch  (2) , 0);
#line 11458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 11459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TeleportPlayer  (WLT_FIXED  , eCause );
#line 11461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_cmiComm  . IsNetworkOn  ()){
#line 11465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bFirstInit ){
#line 11466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eCause  = TPC_FIRSTINIT ;
#line 11467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eCause  = TPC_OTHER ;
#line 11469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(eCause  == TPC_FIRSTINIT )
#line 11471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetModelInstance  ())
#line 11473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaTag  tag ;
#line 11475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__ROOT");
#line 11476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 11477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_pmiModelInstance  -> m_tmSkaTagManager  . Register  (& tag );
#line 11478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__TOP");
#line 11479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 11480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 11481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> GetAllFramesBBox  (aabb );
#line 11482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetPos  (0 , aabb  . Size  () (2) * GetModelInstance  () -> mi_vStretch  (2) , 0);
#line 11483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 11484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! bFirstInit )
#line 11491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GoTo  (_pNetwork  -> MyCharacterInfo  . x  , _pNetwork  -> MyCharacterInfo  . h  , _pNetwork  -> MyCharacterInfo  . z  , 
#line 11493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . r );
#line 11494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 11495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D CPlayer::GetTeleportingOffset(void) 
#line 11499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iPlayer  = GetMyPlayerIndex  ();
#line 11504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const FLOAT fOffsetY  = 0.1f;
#line 11505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vOffsetRel  = FLOAT3D (0 , fOffsetY  , 0);
#line 11506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bCooperative  && ! GetSP  () -> sp_bSinglePlayer ){
#line 11507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iRow  = iPlayer  / 4;
#line 11508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iCol  = iPlayer  % 4;
#line 11509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vOffsetRel  = FLOAT3D (- 3.0f + iCol  * 2.0f , fOffsetY  , - 3.0f + iRow  * 2.0f);
#line 11510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return vOffsetRel ;
#line 11513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RemapLevelNames(INDEX & iLevel) 
#line 11516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(iLevel ){
#line 11518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 10: 
#line 11519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 1;
#line 11520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 11: 
#line 11522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 2;
#line 11523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 12: 
#line 11525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 3;
#line 11526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 13: 
#line 11528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 4;
#line 11529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 14: 
#line 11531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 5;
#line 11532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 15: 
#line 11534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 6;
#line 11535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11536 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 21: 
#line 11537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 7;
#line 11538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 22: 
#line 11540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 8;
#line 11541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 23: 
#line 11543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 9;
#line 11544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 24: 
#line 11546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 10;
#line 11547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 31: 
#line 11549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 11;
#line 11550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 32: 
#line 11552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 12;
#line 11553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 33: 
#line 11555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = 13;
#line 11556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  : 
#line 11558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = - 1;
#line 11559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 11560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::TeleportPlayer(enum WorldLinkType EwltType,PlayerTeleportCause eCause) 
#line 11564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iLevel  = - 1;
#line 11566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strLevelName  = GetWorld  () -> wo_fnmFileName  . FileName  ();
#line 11569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX u  , v ;
#line 11570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
u  = v  = - 1;
#line 11571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strLevelName  . ScanF  ("%01d_%01d_" , & u  , & v );
#line 11572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iLevel  = u  * 10 + v ;
#line 11574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RemapLevelNames  (iLevel );
#line 11576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iLevel  > 0){
#line 11577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CSessionProperties  *) GetSP  ()) -> sp_ulLevelsMask  |= 1 << (iLevel  - 1);
#line 11578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ()){
#line 11581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_DONTRENDER ;
#line 11582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iPlayer  = GetMyPlayerIndex  ();
#line 11587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plSet  = GetPlacement  ();
#line 11589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Teleport  (CPlacement3D (FLOAT3D (32000.0f + 100.0f * iPlayer  , 32000.0f , 0) , ANGLE3D (0 , 0 , 0)));
#line 11592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl ){
#line 11593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ForceCollisionBoxIndexChange  (PLAYER_COLLISION_BOX_STAND );
#line 11594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ForceCollisionBoxIndexChange  (GetModelInstance  () -> GetColisionBoxIndex  (idPlayer_Collision_Stand ));
#line 11596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_PositionVector  (2) = plr_fViewHeightStand ;
#line 11599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . m_bDisableAnimating  = FALSE ;
#line 11600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerAnimator  &) * m_penAnimator ) . Stand  ();
#line 11601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pstState  = PST_STAND ;
#line 11606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bInitialMarker  = FALSE ;
#line 11609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vOffsetRel  = GetTeleportingOffset  ();
#line 11612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bSetHealth  = FALSE ;
#line 11613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAdjustHealth  = FALSE ;
#line 11614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = NULL ;
#line 11615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bCooperative )
#line 11616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cht_iGoToMarker  >= 0){
#line 11619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strPlayerStart ;
#line 11620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strPlayerStart  . PrintF  ("Player Start - %d" , (INDEX) cht_iGoToMarker );
#line 11621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  = _pNetwork  -> GetEntityWithName  (strPlayerStart  , 0);
#line 11622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ETrigger  etr ;
#line 11623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
etr  . penCaused  = this ;
#line 11624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  -> SendEvent  (etr );
#line 11625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cht_iGoToMarker  = - 1;
#line 11626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSetHealth  = TRUE ;
#line 11627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAdjustHealth  = FALSE ;
#line 11629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(m_penMainMusicHolder  != NULL  && ! (m_ulFlags  & PLF_CHANGINGLEVEL )){
#line 11630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMusicHolder  * pmh  = (CMusicHolder  *) & * m_penMainMusicHolder ;
#line 11632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penRespawnMarker ;
#line 11633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ga_World  . EntityExists  (pmh  -> m_iRespawnMarker  , penRespawnMarker );
#line 11634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penRespawnMarker  != NULL ){
#line 11636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  = penRespawnMarker ;
#line 11637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSetHealth  = TRUE ;
#line 11638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAdjustHealth  = FALSE ;
#line 11639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  == NULL  && GetSP  () -> sp_bQuickTest  && m_strGroup  == ""){
#line 11645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strPlayerStart ;
#line 11646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strPlayerStart  . PrintF  ("Player Quick Start");
#line 11647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  = _pNetwork  -> GetEntityWithName  (strPlayerStart  , 0);
#line 11648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSetHealth  = TRUE ;
#line 11649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAdjustHealth  = FALSE ;
#line 11650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  == NULL ){
#line 11654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strPlayerStart ;
#line 11655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strPlayerStart  . PrintF  ("Player Start - %s" , m_strGroup );
#line 11656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  = _pNetwork  -> GetEntityWithName  (strPlayerStart  , 0);
#line 11657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_strGroup  == ""){
#line 11658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSetHealth  = TRUE ;
#line 11659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAdjustHealth  = FALSE ;
#line 11660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(EwltType  == WLT_FIXED ){
#line 11662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSetHealth  = FALSE ;
#line 11663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAdjustHealth  = TRUE ;
#line 11664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSetHealth  = FALSE ;
#line 11666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAdjustHealth  = FALSE ;
#line 11667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  == NULL ){
#line 11673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strPlayerStart ;
#line 11674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strPlayerStart  . PrintF  ("Player Start - ");
#line 11675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  = _pNetwork  -> GetEntityWithName  (strPlayerStart  , 0);
#line 11676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bSetHealth  = TRUE ;
#line 11677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bAdjustHealth  = FALSE ;
#line 11678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && eCause  != TPC_OTHER ){
#line 11681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bInitialMarker  = TRUE ;
#line 11682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((m_ulFlags  & PLF_RESPAWNINPLACE ) && pen  != NULL  && ! ((CPlayerMarker  *) & * pen ) -> m_bNoRespawnInPlace ){
#line 11687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_RESPAWNINPLACE ;
#line 11689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetHealth  (TopHealth  ());
#line 11691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fArmor  = 0.0f;
#line 11693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Teleport  (CPlacement3D (m_vDied  , m_aDied ));
#line 11696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(pen  != NULL ){
#line 11698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penMainMusicHolder  != NULL ){
#line 11699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMusicHolder  * pmh  = (CMusicHolder  *) & * m_penMainMusicHolder ;
#line 11700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pmh  -> m_iRespawnMarker  == - 1){
#line 11702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pmh  -> m_iRespawnMarker  = pen  -> en_ulID ;
#line 11703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerMarker  & CpmStart  = (CPlayerMarker  &) * pen ;
#line 11708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bSetHealth ){
#line 11709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetHealth  (CpmStart  . m_fHealth  / 100.0f * TopHealth  ());
#line 11711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fArmor  = CpmStart  . m_fShield ;
#line 11712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(bAdjustHealth ){
#line 11713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fHealth  = GetHealth  ();
#line 11714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fTopHealth  = TopHealth  ();
#line 11715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fHealth  < fTopHealth ){
#line 11716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetHealth  (ClampUp  (fHealth  + fTopHealth  / 2.0f , fTopHealth ));
#line 11717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CpmStart  . m_bStartInComputer  && GetSP  () -> sp_bSinglePlayer ){
#line 11723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this )){
#line 11724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmp_ppenPlayer  = this ;
#line 11725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ()){
#line 11727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (EShowConsole  () , TRUE );
#line 11728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmp_bInitialStart  = TRUE ;
#line 11730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(EwltType  == WLT_RELATIVE ){
#line 11758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plSet  . AbsoluteToRelative  (_SwcWorldChange  . plLink );
#line 11759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plSet  . RelativeToAbsolute  (CpmStart  . GetPlacement  ());
#line 11760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Teleport  (plSet );
#line 11762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(EwltType  == WLT_FIXED ){
#line 11763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plNew  = CpmStart  . GetPlacement  ();
#line 11764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vOffsetRel  *= CpmStart  . en_mRotation ;
#line 11765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plNew  . pl_PositionVector  += vOffsetRel ;
#line 11766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Teleport  (plNew );
#line 11769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_plPlacement  . pl_PositionVector  (1) != 32000.0f)
#line 11770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_cmiComm  . IsNetworkOn  ())
#line 11772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Teleport  (CPlacement3D (FLOAT3D (_pNetwork  -> MyCharacterInfo  . x  , _pNetwork  -> MyCharacterInfo  . h  , _pNetwork  -> MyCharacterInfo  . z ) , ANGLE3D (0 , 0 , 0)));
#line 11783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CpmStart  . m_penTarget  != NULL )
#line 11786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (CpmStart  . m_penTarget  , EET_TRIGGER  , this );
#line 11788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetHealth  (TopHealth  ());
#line 11796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fArmor  = 0.0f;
#line 11800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Teleport  (CPlacement3D (FLOAT3D (0 , 0 , 0) + vOffsetRel  , ANGLE3D (0 , 0 , 0)));
#line 11801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEventInRange  (ETeleport  () , FLOATaabbox3D (GetPlacement  () . pl_PositionVector  , 200.0f));
#line 11805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ForceFullStop  ();
#line 11808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fMaxHealth  = TopHealth  ();
#line 11811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bSinglePlayer  && GetSP  () -> sp_gmGameMode  != CSessionProperties  :: GM_FLYOVER ){
#line 11812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CWorldSettingsController  * pwsc  = GetWSC  (this );
#line 11813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pwsc  != NULL  && pwsc  -> m_bNoSaveGame ){
#line 11814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NOTHING ;
#line 11815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 11818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_LEVELSTARTED )){
#line 11822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_LEVELSTARTED ;
#line 11823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmLevelStarted  = _pNetwork  -> GetGameTime  ();
#line 11824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SpawnTeleport  ();
#line 11859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SwitchToModel  ();
#line 11861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSpawned  = en_tmEntityTime ;
#line 11862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_tmLastBreathed  = en_tmEntityTime  + 0.1f;
#line 11863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::CreateAnimAndBoneIDs(void) 
#line 11867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_RenderType  != RT_SKAMODEL  && en_RenderType  != RT_SKAEDITORMODEL ){return ;}
#line 11870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pmi  = GetModelInstance  ();
#line 11871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (pmi  != NULL );
#line 11873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 11875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = ANIM_START ;i  < ANIM_TOTAL ;++ i )
#line 11876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ska_CreateAnimIDFromString  (& idPlayerWhole_Animation  [ i  ] , pmi  , JobInfo  () . GetAnimationName  (iJob  , i ));
#line 11878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::FillAnimAndBoneIDs() 
#line 11883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_RenderType  != RT_SKAMODEL  && en_RenderType  != RT_SKAEDITORMODEL ){return ;}
#line 11886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pmi  = GetModelInstance  ();
#line 11887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (pmi  != NULL );
#line 11889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 11891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = ANIM_START ;i  < ANIM_TOTAL ;++ i )
#line 11892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idPlayerWhole_Animation  [ i  ] = ska_GetIDFromStringTable  (JobInfo  () . GetAnimationName  (iJob  , i ));
#line 11894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::IdleAnim() 
#line 11899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ])
#line 11901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> MyCharacterInfo  . bExtension  || m_bMobChange )
#line 11903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 11905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX idBodyAnim  = - 1;
#line 11908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 11909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_1  ];
#line 11911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_1  ];
#line 11915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idBodyAnim  , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , ESKA_MASTER_MODEL_INSTANCE );
#line 11918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idPlayerWhole_Animation  [ ANIM_ATTACK_IDLE  ] , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 11922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 11923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 11928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX idBodyAnim  = - 1;
#line 11931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 11932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_2  ];
#line 11934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_2  ];
#line 11938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idBodyAnim  , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , ESKA_MASTER_MODEL_INSTANCE );
#line 11941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_IDLE  ] , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 11945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 11946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 11952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX idBodyAnim  = - 1;
#line 11955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 11956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_1  ];
#line 11958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_1  ];
#line 11962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idBodyAnim  , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , ESKA_MASTER_MODEL_INSTANCE );
#line 11965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 11967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idPlayerWhole_Animation  [ ANIM_IDLE  ] , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 11969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 11970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 11972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 11974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::ChangeWholeAnim(INDEX idBodyAnim,ULONG ulFlags,FLOAT fStrength,FLOAT fFadeTime,FLOAT fSpeed) 
#line 11975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 11976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT start_attack_time ;
#line 11977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static float  m_fBodyAnimTime ;
#line 11978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT start_action_time ;
#line 11979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT start_Product_time ;
#line 11980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT start_Damage_time ;
#line 11983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static cnt  = 0;
#line 11985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static effectCnt  = 0;
#line 11996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance ){en_pmiModelInstance  -> m_tmSkaTagManager  . SetOwner  (this );}
#line 11999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetPos  (0 , 0 , 0);
#line 12000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDirection  (0 , 0 , 0);
#line 12002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 12004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentCenter  (((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 12005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 12006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 12007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentPos  = this  -> en_plPlacement  . pl_PositionVector  + vCurrentCenter ;
#line 12008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetCenter  (0 , 0 , 0);
#line 12009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT size  = 0;
#line 12010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  -> GetFlags  () & ENF_ALIVE )
#line 12011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> en_RenderType  == RT_SKAMODEL )
#line 12013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D bbox ;
#line 12016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  -> GetModelInstance  () -> GetCurrentColisionBox  (bbox );
#line 12017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vRadius  = (bbox  . maxvect  - bbox  . minvect ) * 0.5f * 0.4f;
#line 12018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
size  = vRadius  . Length  ();
#line 12019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetCenter  = FLOAT3D (((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 12021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 12022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 12023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  = pen  -> en_plPlacement  . pl_PositionVector  + vTargetCenter ;
#line 12024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  = vTargetPos  - vCurrentPos ;
#line 12025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  . Normalize  ();
#line 12026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  -= vDirection  * size ;
#line 12027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  . Normalize  ();
#line 12031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RUN_1  ]) || 
#line 12032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_RUN_2  ]) || 
#line 12033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_RUN_1  ]) || 
#line 12034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_RUN_1  ]) || 
#line 12035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RUN_2  ]))
#line 12036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  
#line 12038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (idBodyAnim  == idPlayerWhole_Animation  [ ANIM_WALK_1  ] || 
#line 12039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_WALK_2  ] || 
#line 12040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_WALK_1  ] || 
#line 12041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_WALK_1  ] || 
#line 12042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_1  ] || 
#line 12043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_1  ] || 
#line 12044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_2  ] || 
#line 12045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_2  ] || 
#line 12046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_WALK_2  ] || 
#line 12047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_IDLE_1  ] || 
#line 12048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_IDLE  ]))
#line 12049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_WALK_1  ]) || 
#line 12056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_WALK_2  ]) || 
#line 12057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_WALK_1  ]) || 
#line 12058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_WALK_1  ]) || 
#line 12059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_WALK_2  ]))
#line 12060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && 
#line 12062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_IDLE  ] || 
#line 12063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_1  ] || 
#line 12064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_2  ] || 
#line 12065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_1  ] || 
#line 12066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_2  ] || 
#line 12067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_IDLE_1  ]))
#line 12068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  _PreAttackTime  , _DoAttackTime  , _PostAttackTime ;
#line 12074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL bIsPreDoEnd  = FALSE ;
#line 12075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idBodyAnim ))
#line 12076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_DAMAGE  ]) || 
#line 12079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_DAMAGE  ]) || 
#line 12080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_DAMAGE  ]) || 
#line 12081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_DAMAGE  ]))
#line 12082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - start_Damage_time  >= m_fBodyAnimTime  - 0.1f)
#line 12084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 12086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SIT_CONTINUE  ]) 
#line 12095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_SIT_CONTINUE  ]) 
#line 12096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_SIT_CONTINUE  ])) 
#line 12097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& m_bPlayAction )
#line 12098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nPlayActionNum  == ACTION_NUM_SITDOWN  && m_nActionSit  == 3)
#line 12100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 12102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_action_time  = _pTimer  -> CurrentTick  ();
#line 12103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 12104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX idBodyAnim  = - 1;
#line 12107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 12108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_STANDUP  ];
#line 12110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_iRideType  == CPetInfo  :: PET_DRAGON )
#line 12112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_STANDUP  ];
#line 12114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idBodyAnim  , AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , ESKA_MASTER_MODEL_INSTANCE );
#line 12117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idPlayerWhole_Animation  [ ANIM_STANDUP  ] , AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 12121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 12122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_MINE  ] 
#line 12130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_COLLECT  ] 
#line 12131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_GATHER  ])
#line 12132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  == NULL )
#line 12136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX iMobIndex  = ((CEnemy  *) pen ) -> m_nMobDBIndex ;
#line 12140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (iMobIndex );
#line 12143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bConsensus )
#line 12144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! MD  . IsLordSymbol  ())
#line 12147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSiegeWarfareNew  () -> StopConsensus  (_pNetwork  -> MyCharacterInfo  . index );
#line 12150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! MD  . IsCollect  ())
#line 12157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_SHIELD  ])
#line 12161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 12163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (696 , "방패를 장착하고서 생산을 할 수 없습니다."));
#line 12164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 12165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 12166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 12167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ])
#line 12174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 12176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 12177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iWeaponType  = _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData  . GetSubType  ();
#line 12182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (iWeaponType  == CItemData  :: ITEM_WEAPON_MINING  || 
#line 12183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWeaponType  == CItemData  :: ITEM_WEAPON_GATHERING  || 
#line 12184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWeaponType  == CItemData  :: ITEM_WEAPON_CHARGE ))
#line 12185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 12187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 12188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 12193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! pen )
#line 12194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 12196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 12197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ((iWeaponType  == CItemData  :: ITEM_WEAPON_MINING ) && MD  . IsMineral  () || 
#line 12201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(iWeaponType  == CItemData  :: ITEM_WEAPON_GATHERING ) && MD  . IsCrops  () || 
#line 12202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(iWeaponType  == CItemData  :: ITEM_WEAPON_CHARGE ) && MD  . IsEnergy  ()))
#line 12203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 12205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 12206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - start_Product_time  >= m_fBodyAnimTime )
#line 12213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_Product_time  = _pTimer  -> CurrentTick  ();
#line 12215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fBodyAnimTime  = en_pmiModelInstance  -> GetAnimLength  (idBodyAnim );
#line 12217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> IsFirstExtraFlagOn  (ENF_EX1_PRODUCTION ))
#line 12218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_amtMob  . Count  ();++ ipl )
#line 12220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobTarget  & mt  = _pNetwork  -> ga_srvServer  . srv_amtMob  [ ipl  ];
#line 12222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mt  . mob_iClientIndex  == pen  -> en_ulID )
#line 12223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . IsMineral  ())
#line 12225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSelectProduceMessage  (mt  . mob_Index  , m_nProduceItemDBIndex );
#line 12227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsCrops  ())
#line 12229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSelectProduceMessage  (mt  . mob_Index  , m_nProduceItemDBIndex );
#line 12231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsEnergy  ())
#line 12233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSelectProduceMessage  (mt  . mob_Index  , m_nProduceItemDBIndex );
#line 12235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsCollect  ())
#line 12237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendCollectProduceMessage  (mt  . mob_Index );
#line 12241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeleteWearingWeapon  (FALSE );
#line 12243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 12246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SIT  ]) 
#line 12253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_SIT  ]) 
#line 12254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_SIT  ]) 
#line 12255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_STANDUP  ]) 
#line 12256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_STANDUP  ]) 
#line 12257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_STANDUP  ]) 
#line 12258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Anim_Face3 ) 
#line 12259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Anim_Face4 ))
#line 12260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction )
#line 12262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - start_action_time  >= m_fBodyAnimTime  - 0.1f)
#line 12264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SIT  ]) || 
#line 12266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_SIT  ]) || 
#line 12267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_SIT  ]))
#line 12268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 12271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 12272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX idBodyAnim  = - 1;
#line 12275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 12276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_SIT_CONTINUE  ];
#line 12278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  = idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_SIT_CONTINUE  ];
#line 12282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idBodyAnim  , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , ESKA_MASTER_MODEL_INSTANCE );
#line 12285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idPlayerWhole_Animation  [ ANIM_SIT_CONTINUE  ] , AN_LOOPING  | AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 12289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , 1.0f);
#line 12290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = 3;
#line 12293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 2;
#line 12294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 12298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 12299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 12300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 12301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_PICK  ]) 
#line 12308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_PICK  ]) 
#line 12309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_PICK  ]) 
#line 12310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_PICK  ]) 
#line 12311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_0  ]) || IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_1  ]) 
#line 12312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_2  ]) || IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_3  ]) 
#line 12313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_4  ]) || IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_5  ]) 
#line 12314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_6  ]) || IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_7  ]) 
#line 12315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_8  ]) || IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_9  ]) 
#line 12316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_10  ]) || IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_SOCIAL_11  ])
#line 12331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 12332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction )
#line 12334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - start_action_time  >= m_fBodyAnimTime )
#line 12336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AppearWearingWeapon  ();
#line 12338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 12339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 12340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 12341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_1  ]) || 
#line 12347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_2  ]) || 
#line 12348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_3  ]) || 
#line 12349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_4  ]) || 
#line 12350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ]) || 
#line 12351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ]) || 
#line 12352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ]) || 
#line 12353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ])
#line 12354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 12355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 12357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bIsTransform )
#line 12358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_1  ]) || 
#line 12360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ]))
#line 12361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = TransformInfo  () . GetImpactTime  (m_iTransformType  , ATTACK1 ) * _fAttackLengthMul ;
#line 12363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_2  ]) || 
#line 12365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ]))
#line 12366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = TransformInfo  () . GetImpactTime  (m_iTransformType  , ATTACK2 ) * _fAttackLengthMul ;
#line 12368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_3  ]) || 
#line 12370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ]))
#line 12371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = TransformInfo  () . GetImpactTime  (m_iTransformType  , ATTACK3 ) * _fAttackLengthMul ;
#line 12373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_4  ]) || 
#line 12375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ]))
#line 12376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = TransformInfo  () . GetImpactTime  (m_iTransformType  , ATTACK4 ) * _fAttackLengthMul ;
#line 12378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_1  ]))
#line 12383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , ATTACK1 ) * _fAttackLengthMul ;
#line 12385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_2  ]))
#line 12387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , ATTACK2 ) * _fAttackLengthMul ;
#line 12389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_3  ]))
#line 12391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , ATTACK3 ) * _fAttackLengthMul ;
#line 12393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_4  ]))
#line 12395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , ATTACK4 ) * _fAttackLengthMul ;
#line 12397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ]))
#line 12400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , EXT_ATTACK1 ) * _fAttackLengthMul ;
#line 12402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ]))
#line 12404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , EXT_ATTACK2 ) * _fAttackLengthMul ;
#line 12406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ]))
#line 12408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , EXT_ATTACK3 ) * _fAttackLengthMul ;
#line 12410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ]))
#line 12412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_DoAttackTime  = JobInfo  () . GetImpactTime  (iJob  , EXT_ATTACK4 ) * _fAttackLengthMul ;
#line 12414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_PreAttackTime  = 0.10f;
#line 12417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_PostAttackTime  = m_fBodyAnimTime ;
#line 12419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cnt  == - 1)
#line 12420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  == this )
#line 12422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 12425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 12426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 12427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAttackingEnemy  = pen ;
#line 12431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  -> GetFlags  () & ENF_ALIVE )
#line 12432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = UI_SUMMON_START ;i  <= UI_SUMMON_END ;++ i )
#line 12435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUISummon  * pUISummon  = (CUISummon  *) _pUIMgr  -> GetUI  (i );
#line 12437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pSummonEntity  = pUISummon  -> GetSummonEntity  ();
#line 12438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pSummonEntity )
#line 12439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pSummonEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 12441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  != ((CSlave  *) pSummonEntity ) -> m_penEnemy )
#line 12443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pSummonEntity  -> SendEvent  (ESlaveKilledEnemy  ());
#line 12445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _WildPetInfo  . bIsActive )
#line 12452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pWildPetEntity  = _pNetwork  -> _WildPetInfo  . pet_pEntity ;
#line 12454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pWildPetEntity )
#line 12455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pWildPetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ) && 
#line 12457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(m_penAttackingEnemy  != ((CWildPet  *) pWildPetEntity ) -> m_penEnemy ))
#line 12458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pWildPetEntity  -> SendEvent  (ESlaveKilledEnemy  ());
#line 12461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_bSingleMode  && m_penAttackingEnemy  -> IsEnemy  ())
#line 12467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 12469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Add  (m_penAttackingEnemy );
#line 12473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iJob  == HEALER  || 
#line 12474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iJob  == MAGE )
#line 12475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> FindTargetsInRange  (this  , m_penAttackingEnemy  , m_dcEnemies  , 
#line 12479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
5.0f , 4 , 45.0f);
#line 12480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> FindTargetsInRange  (this  , m_penAttackingEnemy  , m_dcEnemies  , 
#line 12485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
2.0f , 2 , 45.0f);
#line 12486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackMessageInContainer  (m_dcEnemies );
#line 12488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  -> IsEnemy  ())
#line 12493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX iMobIndex  = ((CEnemy  *) ((CEntity  *) m_penAttackingEnemy )) -> m_nMobDBIndex ;
#line 12497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == LORD_SYMBOL_INDEX )
#line 12498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackSymbol  ();
#line 12500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackMessage  (this  , pen  , FALSE );
#line 12504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackMessage  (this  , pen  , FALSE );
#line 12509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iJob  == KNIGHT )
#line 12514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_3  ])
#line 12516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 1" 
#line 12518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_4  ])
#line 12521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 2" 
#line 12523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ])
#line 12527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 1_a" 
#line 12529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ])
#line 12532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 2_a" 
#line 12534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12536 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == TITAN )
#line 12538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_3  ])
#line 12540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 1" 
#line 12542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_4  ])
#line 12545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 2" 
#line 12547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ])
#line 12551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 1_a" 
#line 12553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ])
#line 12556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 2_a" 
#line 12558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == MAGE )
#line 12562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ])
#line 12564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall0" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 12566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 12567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ])
#line 12569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall1" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 12571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 12572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ])
#line 12575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall0" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 12577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 12578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ])
#line 12580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall1" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 12582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 12583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == ROGUE )
#line 12586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ])
#line 12588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Rogue Attack 1" 
#line 12590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ])
#line 12593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Rogue Attack 2" 
#line 12595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 12596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == SORCERER )
#line 12599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = 0;
#line 12625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - start_attack_time  > _PreAttackTime  && cnt  == 0)
#line 12629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  ++;
#line 12631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bIsPreDoEnd  = TRUE ;
#line 12632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 12633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - start_attack_time  > _DoAttackTime  && cnt  == 1)
#line 12636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(iJob )
#line 12638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case TITAN : 
#line 12640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bExtension )
#line 12641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bCriticalDamage )
#line 12643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_AXE_CRITICAL ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 12647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_AXE_BLOW ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bCriticalDamage )
#line 12653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_BIGSWORD_CRITICAL ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 12657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_BIGSWORD_BLOW ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 12663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HEALER : 
#line 12665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance  != NULL  && pen  != NULL  && pen  -> IsFlagOn  (ENF_ALIVE ))
#line 12666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 12668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bExtension )
#line 12670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> IsEnemy  ())
#line 12672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - pen  -> GetPlacement  () . pl_PositionVector ;
#line 12674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 12675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , pen  , vDelta  . Length  ());
#line 12676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 12677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "STAFF" , pen  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0 , 0.0f , 0.0f , 1);
#line 12679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "STAFF" , pen  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0 , 0.0f , 0.0f , 1);
#line 12684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> IsEnemy  ())
#line 12689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - pen  -> GetPlacement  () . pl_PositionVector ;
#line 12691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 12692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , pen  , vDelta  . Length  ());
#line 12693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 12694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , pen  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0);
#line 12696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , pen  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0);
#line 12701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ENTITIES_ITERATOR  it  = m_dcEnemies  . vectorSelectedEntities  . begin  ();
#line 12707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  != m_dcEnemies  . vectorSelectedEntities  . end  ();++ it )
#line 12708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pEn  = (* it );
#line 12710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEn  != NULL  && pEn  -> IsFlagOn  (ENF_ALIVE ))
#line 12711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bExtension )
#line 12713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "STAFF" , pEn  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0 , 0.0f , 0.0f , 1);
#line 12715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , pEn  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0);
#line 12719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 12723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 12729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MAGE : 
#line 12730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance  != NULL  && pen  != NULL )
#line 12731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vStartPos ;
#line 12733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATquat3D qStartRot ;
#line 12734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTag  * pTag  = NULL ;
#line 12736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ])
#line 12737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pTag  = this  -> en_pmiModelInstance  -> m_tmSkaTagManager  . Find  ("WAND");
#line 12739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  == NULL )
#line 12740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pTag  = this  -> en_pmiModelInstance  -> m_tmSkaTagManager  . Find  ("RHAND");
#line 12742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  != NULL )
#line 12744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vStartPos  = pTag  -> CurrentTagInfo  () . m_vPos ;
#line 12746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
qStartRot  = pTag  -> CurrentTagInfo  () . m_qRot ;
#line 12747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ])
#line 12750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pTag  = this  -> en_pmiModelInstance  -> m_tmSkaTagManager  . Find  ("LHAND");
#line 12752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  != NULL )
#line 12753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vStartPos  = pTag  -> CurrentTagInfo  () . m_vPos ;
#line 12755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
qStartRot  = pTag  -> CurrentTagInfo  () . m_qRot ;
#line 12756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ])
#line 12759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pTag  = this  -> en_pmiModelInstance  -> m_tmSkaTagManager  . Find  ("RHAND");
#line 12761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  != NULL )
#line 12762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vStartPos  = pTag  -> CurrentTagInfo  () . m_vPos ;
#line 12764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
qStartRot  = pTag  -> CurrentTagInfo  () . m_qRot ;
#line 12765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ])
#line 12768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pTag  = this  -> en_pmiModelInstance  -> m_tmSkaTagManager  . Find  ("RHAND");
#line 12770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  != NULL )
#line 12771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vStartPos  = pTag  -> CurrentTagInfo  () . m_vPos ;
#line 12773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
qStartRot  = pTag  -> CurrentTagInfo  () . m_qRot ;
#line 12774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (pTag  != NULL );
#line 12778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  != NULL )
#line 12779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode  && pen  != NULL  && pen  -> IsFlagOn  (ENF_ALIVE ))
#line 12781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> IsEnemy  ())
#line 12783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - pen  -> GetPlacement  () . pl_PositionVector ;
#line 12785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 12786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , pen  , vDelta  . Length  ());
#line 12787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 12788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"mHitEnerBall" , "mMissileEnerBall" , 
#line 12791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"mHitEnerBall" , "mMissileEnerBall" , 
#line 12798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ENTITIES_ITERATOR  it  = m_dcEnemies  . vectorSelectedEntities  . begin  ();
#line 12804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  != m_dcEnemies  . vectorSelectedEntities  . end  ();++ it )
#line 12805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pEn  = (* it );
#line 12807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEn  != NULL  && pEn  -> IsFlagOn  (ENF_ALIVE ))
#line 12808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pEn  , 35.0F , 
#line 12810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"mHitEnerBall" , "mMissileEnerBall" , 
#line 12811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 12815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 12821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case KNIGHT : 
#line 12822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bCriticalDamage )
#line 12823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_SWORD_CRITICAL ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 12827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_SWORD_BLOW ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 12830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ROGUE : 
#line 12833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bExtension )
#line 12834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance  != NULL  && pen  != NULL )
#line 12836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode  && pen  -> IsFlagOn  (ENF_ALIVE ))
#line 12838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> IsEnemy  ())
#line 12840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - pen  -> GetPlacement  () . pl_PositionVector ;
#line 12842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 12843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , pen  , vDelta  . Length  ());
#line 12844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 12845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , pen  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0);
#line 12847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , pen  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0);
#line 12852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ENTITIES_ITERATOR  it  = m_dcEnemies  . vectorSelectedEntities  . begin  ();
#line 12857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  != m_dcEnemies  . vectorSelectedEntities  . end  ();++ it )
#line 12858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pEn  = (* it );
#line 12860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEn  != NULL  && pEn  -> IsFlagOn  (ENF_ALIVE ))
#line 12861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , pEn  , 40.0f , "Normal Hit" , "Normal Arrow Trace" , m_bCriticalDamage  != 0);
#line 12863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 12866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bCriticalDamage )
#line 12874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_DAGGER_CRITICAL ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_DAGGER_BLOW ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 12885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case SORCERER : 
#line 12886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bIsTransform  && m_iTransformType  == CTransformInfo  :: TYPE_1 )
#line 12888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance  != NULL  && pen  != NULL )
#line 12890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vStartPos ;
#line 12892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATquat3D qStartRot ;
#line 12893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTag  * pTag  = NULL ;
#line 12895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pTag  = this  -> en_pmiModelInstance  -> m_tmSkaTagManager  . Find  ("LHAND");
#line 12897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  != NULL )
#line 12898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vStartPos  = pTag  -> CurrentTagInfo  () . m_vPos ;
#line 12900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
qStartRot  = pTag  -> CurrentTagInfo  () . m_qRot ;
#line 12901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (pTag  != NULL );
#line 12904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pTag  != NULL )
#line 12905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode  && pen  != NULL  && pen  -> IsFlagOn  (ENF_ALIVE ))
#line 12907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> IsEnemy  ())
#line 12909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - pen  -> GetPlacement  () . pl_PositionVector ;
#line 12911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 12913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , pen  , vDelta  . Length  ());
#line 12914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 12915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || 
#line 12918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || 
#line 12919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ] || 
#line 12920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_3  ])
#line 12921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"so2_Att02_Hit" , "so2_Att02_Missile" , 
#line 12924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"so2_Att01_Hit" , "so2_Att01_Missile" , 
#line 12930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || 
#line 12938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || 
#line 12939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ] || 
#line 12940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_3  ])
#line 12941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"so2_Att02_Hit" , "so2_Att02_Missile" , 
#line 12944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"so2_Att01_Hit" , "so2_Att01_Missile" , 
#line 12950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ENTITIES_ITERATOR  it  = m_dcEnemies  . vectorSelectedEntities  . begin  ();
#line 12957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  != m_dcEnemies  . vectorSelectedEntities  . end  ();++ it )
#line 12958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pEn  = (* it );
#line 12960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEn  != NULL  && pEn  -> IsFlagOn  (ENF_ALIVE ))
#line 12961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || 
#line 12964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || 
#line 12965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ] || 
#line 12966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_3  ])
#line 12967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"so2_Att02_Hit" , "so2_Att02_Missile" , 
#line 12970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vStartPos  , qStartRot  , pen  , 35.0F , 
#line 12975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
"so2_Att01_Hit" , "so2_Att01_Missile" , 
#line 12976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  != 0 , 0);
#line 12977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 12981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bCriticalDamage )
#line 12989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_SWORD_CRITICAL ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bCriticalDamage  = FALSE ;
#line 12992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 12994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 12995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_SWORD_BLOW ) , SOF_3D  | SOF_VOLUMETRIC );
#line 12996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 12999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 13001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  : 
#line 13002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 13003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_cmiComm  . IsNetworkOn  ())
#line 13006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_dcEnemies  . Count  () > 0)
#line 13008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DamagedTargetsInRange  (this  , m_dcEnemies  , DMT_EXPLOSION  , 1 , vTargetPos  , FALSE );
#line 13010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 13011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iJob  != HEALER  && 
#line 13015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iJob  != MAGE  && 
#line 13016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! (iJob  == ROGUE  && _pNetwork  -> MyCharacterInfo  . bExtension ) && 
#line 13017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! (iJob  == SORCERER  && m_bIsTransform  && m_iTransformType  == CTransformInfo  :: TYPE_1 ))
#line 13018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  != NULL )
#line 13020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
this  -> InflictDirectDamage  (m_penAttackingEnemy  , this  , DMT_CLOSERANGE  , 1 , vTargetPos  , vDirection );
#line 13022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  ++;
#line 13027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - start_attack_time  >= _PostAttackTime  - 0.1f && cnt  == 2)
#line 13031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_attack_time  = _pTimer  -> CurrentTick  ();
#line 13033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = - 1;
#line 13035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAttackingEnemy  = NULL ;
#line 13038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 13041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 13043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 13045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nDesiredSkillNum  != - 1)
#line 13046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 13049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bReservedCancel )
#line 13050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 13052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReservedCancel  = FALSE ;
#line 13053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UseSkill  (m_nDesiredSkillNum );
#line 13057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bReserveMove  || m_nCurrentSkillNum  != - 1 || m_bReservedCancel  || (pen  != NULL  && ! (pen  -> GetFlags  () & ENF_ALIVE )) || pen  == NULL  || penTarget  != m_penAttackingEnemy )
#line 13061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 13065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bReservedCancel )
#line 13066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 13068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReservedCancel  = FALSE ;
#line 13071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 13072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 13073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cnt  = 0;
#line 13080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
effectCnt  = 0;
#line 13083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 13085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_WALK_1  ] || 
#line 13086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_WALK_1  ])
#line 13087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_1  ] || 
#line 13090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_1  ])
#line 13091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_IDLE_2  ] || 
#line 13094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_IDLE_2  ])
#line 13095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_RUN_1  ] || 
#line 13098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_RUN_1  ])
#line 13099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_DAMAGE  ] || 
#line 13102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_DAMAGE  ])
#line 13103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_DIE  ] || 
#line 13106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_DIE  ])
#line 13107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (idBodyAnim  , ulFlags  , fStrength  , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 13112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , fSpeed );
#line 13116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || 
#line 13117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ] || 
#line 13118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_3  ]) || 
#line 13119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IsAnimationPlaying  (idPlayerWhole_Animation  [ ANIM_ATTACK_4  ]) || 
#line 13120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || 
#line 13121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ] || 
#line 13122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ] || 
#line 13123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ])
#line 13124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  frandom  = FRnd  ();
#line 13128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 13129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iJob  == KNIGHT )
#line 13130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_3  ])
#line 13132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 1" 
#line 13134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_4  ])
#line 13137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 2" 
#line 13139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ])
#line 13143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 1_a" 
#line 13145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ])
#line 13148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Knight Attack 2_a" 
#line 13150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(frandom  <= 0.25f)
#line 13153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_KNIGHT_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 13155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == TITAN )
#line 13158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_3  ])
#line 13160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 1" 
#line 13162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_4  ])
#line 13165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 2" 
#line 13167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_3  ])
#line 13171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 1_a" 
#line 13173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_4  ])
#line 13176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Titan Attack 2_a" 
#line 13178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(frandom  <= 0.25f)
#line 13181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_TITAN_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 13183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == MAGE )
#line 13186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ])
#line 13188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall0" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 13190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 13191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ])
#line 13193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall1" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 13195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 13196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_1  ])
#line 13199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall0_a" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 13201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 13202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_ATTACK_2  ])
#line 13204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("mEnerBall1_a" , & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 13206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 13207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(frandom  <= 0.25f)
#line 13209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_MAGE_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 13211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == HEALER )
#line 13214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(frandom  <= 0.25f)
#line 13216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_HEALER_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 13218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == ROGUE )
#line 13221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_1  ])
#line 13223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Rogue Attack 1" 
#line 13225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_ATTACK_2  ])
#line 13228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("Rogue Attack 2" 
#line 13230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 13231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(frandom  <= 0.25f)
#line 13233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_ROGUE_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 13235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == SORCERER )
#line 13238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(frandom  <= 0.25f)
#line 13263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_TITAN_ATTACK ) , SOF_3D  | SOF_VOLUMETRIC );
#line 13265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fBodyAnimTime  = GetModelInstance  () -> GetAnimLength  (idBodyAnim ) * _fAttackLengthMul ;
#line 13269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_attack_time  = _pTimer  -> CurrentTick  ();
#line 13271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = TRUE ;
#line 13273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAttackingEnemy  = pen ;
#line 13274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  -> GetFlags  () & ENF_ALIVE )
#line 13275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = UI_SUMMON_START ;i  <= UI_SUMMON_END ;++ i )
#line 13278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUISummon  * pUISummon  = (CUISummon  *) _pUIMgr  -> GetUI  (i );
#line 13280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pSummonEntity  = pUISummon  -> GetSummonEntity  ();
#line 13281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pSummonEntity )
#line 13282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pSummonEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 13284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  != ((CSlave  *) pSummonEntity ) -> m_penEnemy )
#line 13286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pSummonEntity  -> SendEvent  (ESlaveKilledEnemy  ());
#line 13288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _WildPetInfo  . bIsActive )
#line 13295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pWildPetEntity  = _pNetwork  -> _WildPetInfo  . pet_pEntity ;
#line 13297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pWildPetEntity )
#line 13298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pWildPetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ) && 
#line 13300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(m_penAttackingEnemy  != ((CWildPet  *) pWildPetEntity ) -> m_penEnemy ))
#line 13301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pWildPetEntity  -> SendEvent  (ESlaveKilledEnemy  ());
#line 13304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_bSingleMode  && m_penAttackingEnemy  -> IsEnemy  ())
#line 13309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 13311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Add  (m_penAttackingEnemy );
#line 13314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iJob  == HEALER  || 
#line 13315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iJob  == MAGE )
#line 13316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> FindTargetsInRange  (this  , m_penAttackingEnemy  , m_dcEnemies  , 
#line 13319 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
5.0f , 4 , 45.0f);
#line 13320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> FindTargetsInRange  (this  , m_penAttackingEnemy  , m_dcEnemies  , 
#line 13325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
2.0f , 2 , 45.0f);
#line 13326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bSendStopMessage )
#line 13328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 13330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 13331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackMessageInContainer  (m_dcEnemies );
#line 13333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bSendStopMessage )
#line 13337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 13339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 13340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  -> IsEnemy  ())
#line 13344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX iMobIndex  = ((CEnemy  *) ((CEntity  *) m_penAttackingEnemy )) -> m_nMobDBIndex ;
#line 13348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == LORD_SYMBOL_INDEX )
#line 13349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackSymbol  ();
#line 13351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackMessage  (this  , pen  , FALSE );
#line 13355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendAttackMessage  (this  , pen  , FALSE );
#line 13360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SIT  ] 
#line 13365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_STANDUP  ] 
#line 13366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Anim_Face3  
#line 13367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Anim_Face4 )
#line 13368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  state  = 0;
#line 13372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _bPersonalShop )
#line 13373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SIT  ])
#line 13375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendActionMessage  (0 , ACTION_NUM_SITDOWN  , 1);
#line 13377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendActionMessage  (0 , ACTION_NUM_SITDOWN  , 0);
#line 13381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fBodyAnimTime  = GetModelInstance  () -> GetAnimLength  (idBodyAnim );
#line 13384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_action_time  = _pTimer  -> CurrentTick  ();
#line 13385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_SIT  ] 
#line 13387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_SIT  ] 
#line 13388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_STANDUP  ] 
#line 13389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_STANDUP  ])
#line 13390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  state  = 0;
#line 13393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _bPersonalShop )
#line 13394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_SIT  ] || 
#line 13396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_SIT  ])
#line 13397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendActionMessage  (0 , ACTION_NUM_SITDOWN  , 1);
#line 13399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendActionMessage  (0 , ACTION_NUM_SITDOWN  , 0);
#line 13403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_action_time  = _pTimer  -> CurrentTick  ();
#line 13406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_MINE  ] 
#line 13408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_COLLECT  ] 
#line 13409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_GATHER  ])
#line 13410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fBodyAnimTime  = GetModelInstance  () -> GetAnimLength  (idBodyAnim );
#line 13412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_Product_time  = _pTimer  -> CurrentTick  ();
#line 13413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_PICK  ] 
#line 13415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_EXT_PICK  ] 
#line 13416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_0  ] 
#line 13417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_1  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_2  ] 
#line 13418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_3  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_4  ] 
#line 13419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_5  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_6  ] 
#line 13420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_7  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_8  ] 
#line 13421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_9  ] || idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_10  ] 
#line 13422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| idBodyAnim  == idPlayerWhole_Animation  [ ANIM_SOCIAL_11  ]
#line 13431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 13432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fBodyAnimTime  = GetModelInstance  () -> GetAnimLength  (idBodyAnim );
#line 13434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_action_time  = _pTimer  -> CurrentTick  ();
#line 13435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(idBodyAnim  == idPlayerWhole_Animation  [ ANIM_DAMAGE  ] || 
#line 13437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_DAMAGE  ] || 
#line 13438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
idBodyAnim  == idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_DAMAGE  ])
#line 13439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fBodyAnimTime  = GetModelInstance  () -> GetAnimLength  (idBodyAnim );
#line 13441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
start_Damage_time  = _pTimer  -> CurrentTick  ();
#line 13442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 13446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SpawnTeleport(void) 
#line 13447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bSinglePlayer ){
#line 13451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESpawnEffect  ese ;
#line 13454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 13455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . betType  = BET_TELEPORT ;
#line 13456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . vNormal  = FLOAT3D (0 , 1 , 0);
#line 13457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D box ;
#line 13458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetBoundingBox  (box );
#line 13459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fEntitySize  = box  . Size  () . MaxNorm  () * 2;
#line 13460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ese  . vStretch  = FLOAT3D (fEntitySize  , fEntitySize  , fEntitySize );
#line 13461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityPointer penEffect  = CreateEntity  (GetPlacement  () , CLASS_BASIC_EFFECT  , WLD_AUTO_ENTITY_ID  , FALSE );
#line 13462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEffect  -> Initialize  (ese  , FALSE );
#line 13463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 13466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::RenderParticles(void) 
#line 13467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bNotRenderParticles )
#line 13469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT tmNow  = en_tmEntityTime ;
#line 13476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_EmptyShells  (this  , m_asldData );
#line 13479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_RunningDust  (this );
#line 13482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fLastBurnTime  = (FLOAT) _pTimer  -> GetHighPrecisionTimer  () . GetSeconds  ();
#line 13483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fBurnLeftTime  > 0)
#line 13484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fRatio  = 1.0f;
#line 13486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fBurnLeftTime  < m_fBurnFadeInTime )
#line 13487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fRatio  = m_fBurnLeftTime  / m_fBurnFadeInTime ;
#line 13489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fBurnTime  - m_fBurnLeftTime  < m_fBurnFadeOutTime )
#line 13491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fRatio  = (m_fBurnTime  - m_fBurnLeftTime ) / m_fBurnFadeOutTime ;
#line 13493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fRatio  *= m_fBurnRatio ;
#line 13495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_Burning  (this  , m_fBurnPower  , fRatio );
#line 13496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fCurrentTime  = (FLOAT) _pTimer  -> GetHighPrecisionTimer  () . GetSeconds  ();
#line 13497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fBurnLeftTime  -= fCurrentTime  - m_fLastBurnTime ;
#line 13498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fBurnLeftTime  < 0){m_fBurnLeftTime  = 0;}
#line 13499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(FLOAT &) m_fLastBurnTime  = fCurrentTime ;
#line 13500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(Particle_GetViewer  () == this ){
#line 13503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_ViewerLocal  (this );
#line 13504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
RenderChainsawParticles  (TRUE );
#line 13510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetFlags  () & ENF_ALIVE ){
#line 13511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_tmSeriousDamage  > tmNow  && m_tmInvulnerability  > tmNow ){
#line 13512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_ModelGlow  (this  , Max  (m_tmSeriousDamage  , m_tmInvulnerability ) , PT_STAR08  , 0.15f , 2 , 0.03f , 0xff00ff00);
#line 13513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(m_tmInvulnerability  > tmNow ){
#line 13516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_ModelGlow  (this  , m_tmInvulnerability  , PT_STAR05  , 0.1f , 7 , 0.03f , 0xff777700);
#line 13517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(m_tmSeriousDamage  > tmNow ){
#line 13519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_ModelGlow  (this  , m_tmSeriousDamage  , PT_STAR08  , 0.1f , 5 , 0.03f , 0xff777700);
#line 13521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSpeedUp )
#line 13524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_RunAfterBurner  (this  , m_tmSeriousSpeed  , 0.3f , 0);
#line 13526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! GetSP  () -> sp_bCooperative ){
#line 13528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerWeapons  * wpn  = GetPlayerWeapons  ();
#line 13539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_tmSpiritStart  != 0.0f)
#line 13545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_Appearing  (this  , m_tmSpiritStart );
#line 13547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 13550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::TeleportToAutoMarker(CPlayerActionMarker * ppam) 
#line 13551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bCooperative  && ! GetSP  () -> sp_bSinglePlayer ){
#line 13555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iPlayer  = 0;iPlayer  < GetMaxPlayers  ();iPlayer  ++){
#line 13556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * ppl  = (CPlayer  *) GetPlayerEntity  (iPlayer );
#line 13557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ppl  != NULL ){
#line 13559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D pl  = ppam  -> GetPlacement  ();
#line 13560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vOffsetRel  = ppl  -> GetTeleportingOffset  ();
#line 13561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pl  . pl_PositionVector  += vOffsetRel  * ppam  -> en_mRotation ;
#line 13562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ppl  -> Teleport  (pl  , FALSE );
#line 13564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ppl  -> m_vDied  = pl  . pl_PositionVector ;
#line 13565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ppl  -> m_aDied  = pl  . pl_OrientationAngle ;
#line 13566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 13571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D pl  = ppam  -> GetPlacement  ();
#line 13572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vOffsetRel  = GetTeleportingOffset  ();
#line 13573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pl  . pl_PositionVector  += vOffsetRel  * ppam  -> en_mRotation ;
#line 13574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Teleport  (pl  , FALSE );
#line 13575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 13579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::CheckDeathForRespawnInPlace(EPlayerDeath ePLDeath) 
#line 13580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! GetSP  () -> sp_bRespawnInPlace ){
#line 13584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 13585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penKiller  = (CEntity  *) ePLDeath  . eidInflictor ;
#line 13588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsOfClass  (penKiller  , & CPlayer_DLLClass ) 
#line 13589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| IsDerivedFromClass  (penKiller  , & CEnemyBase_DLLClass ))
#line 13590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_RESPAWNINPLACE ;
#line 13593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDied  = GetPlacement  () . pl_PositionVector ;
#line 13594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_aDied  = GetPlacement  () . pl_OrientationAngle ;
#line 13595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  ULONG CPlayer::SetDesiredMovement() 
#line 13603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulFlags  = 0;
#line 13608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL m_bFirstRotate  = TRUE ;
#line 13611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 13613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  != NULL  && 
#line 13614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  == this )
#line 13615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return 0;
#line 13617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penEnt  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 13620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 13623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL  && (penTarget  -> GetFirstExFlags  () & (ENF_EX1_CURRENT_PET  | ENF_EX1_CURRENT_SLAVE  | ENF_EX1_CURRENT_WILDPET )))
#line 13624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && timeGetTime  () - tmStartTime  > 1000)
#line 13626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendMyNextMovePosition  (vDelta );
#line 13628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  != NULL  && 
#line 13632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(((penTarget  -> IsCharacter  ()) && 
#line 13633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(((IsPvp  () || _pUISWDoc  -> IsWar  () || IsLegitTarget  (penEnt ) || 
#line 13634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penTarget  -> en_ulID )) && vDelta  . Length  () < 2.0f) || 
#line 13635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(! IsPvp  () && ! (_pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penTarget  -> en_ulID )) && vDelta  . Length  () < 1.0f))) 
#line 13636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| vDelta  . Length  () < 0.5f))
#line 13637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 13639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopRotating  ();
#line 13640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopTranslating  ();
#line 13642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 13645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && _cmiComm  . IsNetworkOn  ())
#line 13646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 13648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return 0.0f;
#line 13650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && timeGetTime  () - tmStartTime  > 1000)
#line 13655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendMyNextMovePosition  (vDelta );
#line 13657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE aWantedHeadingRelative ;
#line 13663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_aRotateSpeed  > 0.0f && m_bFirstRotate )
#line 13664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDir ;
#line 13666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bFirstRotate )
#line 13667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDir  = g_bTargetDirection ;
#line 13669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDir  = vDelta ;
#line 13673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDir  . SafeNormalize  ();
#line 13676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aWantedHeadingRelative  = GetRelativeHeading  (vDir );
#line 13679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aWantedHeadingRelative  = NormalizeAngle  (aWantedHeadingRelative );
#line 13681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE aHeadingRotation ;
#line 13683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(aWantedHeadingRelative  < - m_aRotateSpeed  * m_fMoveFrequency )
#line 13684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aHeadingRotation  = - (m_aRotateSpeed  * m_fMoveFrequency );
#line 13688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(aWantedHeadingRelative  > m_aRotateSpeed  * m_fMoveFrequency )
#line 13689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aHeadingRotation  = + (m_aRotateSpeed  * m_fMoveFrequency );
#line 13693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aHeadingRotation  = aWantedHeadingRelative  / m_fMoveFrequency ;
#line 13698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_aHeadingRotation  = aHeadingRotation ;
#line 13705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (aHeadingRotation  , 0 , 0));
#line 13707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(Abs  (aHeadingRotation ) > 1.0f)
#line 13708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulFlags  |= MF_ROTATEH ;
#line 13710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(Abs  (aWantedHeadingRelative ) < 1.0f)
#line 13715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bFirstRotate  = FALSE ;
#line 13719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotating  = FALSE ;
#line 13720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = TRUE ;
#line 13721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bFirstRotate )
#line 13722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = FALSE ;
#line 13724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return 0;
#line 13727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotating  = TRUE ;
#line 13732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (0 , 0 , 0));
#line 13737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fMoveSpeed  > 0.0f && ! m_bFirstRotate )
#line 13764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulFlags  |= MF_MOVEZ ;
#line 13766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredTranslation  (FLOAT3D (0 , 0 , 0));
#line 13772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ulFlags ;
#line 13775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 13779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckTarget() 
#line 13780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bStuned ){return FALSE ;}
#line 13786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL bInit  = FALSE ;
#line 13787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! bInit )
#line 13788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 13790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bInit  = TRUE ;
#line 13791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && ! m_bLockMove  && ! m_bHold )
#line 13794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  *) & * m_penView ) -> UnlockRotate  ();
#line 13796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this ))
#line 13797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 13799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 13804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1)
#line 13805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 13807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetTargetType  () == CSkill  :: STT_SELF_ONE  
#line 13808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| SkillData  . GetTargetType  () == CSkill  :: STT_SELF_RANGE  
#line 13809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| SkillData  . GetTargetType  () == CSkill  :: STT_PARTY_ALL )
#line 13810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 13812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  == this )
#line 13816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 13818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 13821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> GetFirstExFlags  () & (ENF_EX1_CURRENT_PET  | ENF_EX1_CURRENT_SLAVE  | ENF_EX1_CURRENT_WILDPET ))
#line 13824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 13826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> GetFlags  () & ENF_ALIVE  && penTarget  -> IsEnemy  () 
#line 13830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ! (penTarget  -> IsFirstExtraFlagOn  (ENF_EX1_NPC )) 
#line 13831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ! (penTarget  -> IsFirstExtraFlagOn  (ENF_EX1_PRODUCTION )) 
#line 13832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ! (_pNetwork  -> MyCharacterInfo  . statusEffect  . IsState  (EST_ASSIST_FAKEDEATH ))
#line 13834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 13835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 13837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 13839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 13840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fScaledSize  = _pNetwork  -> GetMobData  (((CEnemy  *) penTarget ) -> m_nMobDBIndex ) . GetScaledSize  ();
#line 13842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 13844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  fAttackDistance  = _pNetwork  -> MyCharacterInfo  . attackrange ;
#line 13845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fAttackDistance  += fScaledSize ;
#line 13848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () < fAttackDistance  && ! IsAttacking  () && m_nCurrentSkillNum  == - 1)
#line 13849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 13851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 13853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 13856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penTarget ))
#line 13857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 13859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2086 , "가로막혀서 공격할수 없습니다."));
#line 13860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 13862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 13863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 13865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 13866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , penTarget  , vDelta  . Length  ());
#line 13870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 13871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartAttack  ();
#line 13873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 13877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 13881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAttacking  ())
#line 13883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Rotate  (- vDelta  , 1800.0f , TRUE );
#line 13885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 13886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAttacking  ())
#line 13890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 13892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () >= 2.0f && ! m_bHold )
#line 13895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bForward )
#line 13897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = 0;
#line 13899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 13902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 13904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 13906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && timeGetTime  () - tmStartTime  > 1000)
#line 13907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendMyNextMovePosition  (vDelta );
#line 13909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 13913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 13915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 13917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  -> IsFirstExtraFlagOn  (ENF_EX1_PRODUCTION ))
#line 13922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDLLEntityClass  * pdecDLLClass  = penTarget  -> GetClass  () -> ec_pdecDLLClass ;
#line 13925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityProperty  & epProperty  = * pdecDLLClass  -> PropertyForTypeAndID  (CEntityProperty  :: EPT_INDEX  , 91);
#line 13926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iMobIndex  = ENTITYPROPERTY  (& * penTarget  , epProperty  . ep_slOffset  , INDEX);
#line 13927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == - 1)
#line 13928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 13930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (iMobIndex );
#line 13933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 13934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () >= MD  . GetAttackDistance  () && _cmiComm  . IsNetworkOn  ())
#line 13935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 13937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL  && penTarget  -> IsEnemy  () && (penTarget  -> GetFlags  () & ENF_ALIVE ))
#line 13940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 13942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Rotate  (- vDelta  , 360.0f , TRUE );
#line 13943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 13946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 13948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 13950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 13955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . IsCollectQuest  ())
#line 13956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = TRUE ;
#line 13958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = 4;
#line 13959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSelectResource  () -> OpenSelectResource  (penTarget  -> en_ulID  , m_nProductionNum );
#line 13960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 13961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_SHIELD  ])
#line 13966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 13968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (696 , "방패를 장착하고서 생산을 할 수 없습니다."));
#line 13969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 13970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 13971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 13975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 13977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (3074 , "애완동물을 타고서 생산을 할 수 없습니다."));
#line 13978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 13979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 13980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  nProduceType ;
#line 13983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strItemName ;
#line 13985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . IsEnergy  ())
#line 13986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nProduceType  = CItemData  :: ITEM_WEAPON_CHARGE ;
#line 13988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsCrops  ())
#line 13990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nProduceType  = CItemData  :: ITEM_WEAPON_GATHERING ;
#line 13992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsMineral  ())
#line 13994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 13995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nProduceType  = CItemData  :: ITEM_WEAPON_MINING ;
#line 13996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 13999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  nIndex  = 0;nIndex  <= _pNetwork  -> wo_iNumOfItem ;nIndex  ++)
#line 14000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItemData  & ItemData  = _pNetwork  -> GetItemData  (nIndex );
#line 14002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const char  * szItemName  = _pNetwork  -> GetItemName  (nIndex );
#line 14004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ItemData  . GetItemIndex  () == - 1)
#line 14005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
continue ;
#line 14007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ItemData  . GetType  () == CItemData  :: ITEM_WEAPON )
#line 14010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ItemData  . GetSubType  () == nProduceType )
#line 14012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ItemData  . GetJob  () & (1 << _pNetwork  -> MyCharacterInfo  . job ))
#line 14014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strItemName  = szItemName ;
#line 14016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ])
#line 14023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 14025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (697 , "생산도구를 장착하지 않았습니다."));
#line 14026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (788 , "%s를 착용하여 주십시오,") , strItemName );
#line 14029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iWeaponType  = _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData  . GetSubType  ();
#line 14037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (iWeaponType  == CItemData  :: ITEM_WEAPON_MINING  || 
#line 14038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWeaponType  == CItemData  :: ITEM_WEAPON_GATHERING  || 
#line 14039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWeaponType  == CItemData  :: ITEM_WEAPON_CHARGE ))
#line 14040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 14042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (697 , "생산도구를 장착하지 않았습니다."));
#line 14043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (788 , "%s를 착용하여 주십시오,") , strItemName );
#line 14046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((iWeaponType  == CItemData  :: ITEM_WEAPON_MINING ) && MD  . IsMineral  ())
#line 14056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = TRUE ;
#line 14058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = 1;
#line 14059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSelectResource  () -> OpenSelectResource  (penTarget  -> en_ulID  , m_nProductionNum );
#line 14060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if((iWeaponType  == CItemData  :: ITEM_WEAPON_GATHERING ) && MD  . IsCrops  ())
#line 14063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = TRUE ;
#line 14065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = 2;
#line 14066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSelectResource  () -> OpenSelectResource  (penTarget  -> en_ulID  , m_nProductionNum );
#line 14067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if((iWeaponType  == CItemData  :: ITEM_WEAPON_CHARGE ) && MD  . IsEnergy  ())
#line 14070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = TRUE ;
#line 14072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = 3;
#line 14073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSelectResource  () -> OpenSelectResource  (penTarget  -> en_ulID  , m_nProductionNum );
#line 14074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 14078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (701 , "생산도구가 올바르지 않습니다."));
#line 14079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (788 , "%s를 착용하여 주십시오,") , strItemName );
#line 14082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  -> GetFlags  () & ENF_ITEM )
#line 14097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 14099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 14103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = FLOAT3D (1000.0f , 0.0f , 0.0f);
#line 14104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_aitItem  . Count  ();++ ipl )
#line 14105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItemTarget  & it  = _pNetwork  -> ga_srvServer  . srv_aitItem  [ ipl  ];
#line 14107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(it  . item_pEntity  == penTarget )
#line 14108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbLayerDiff  = it  . item_yLayer  - _pNetwork  -> MyCharacterInfo  . yLayer ;
#line 14110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbLayerDiff  < - 1 || sbLayerDiff  > 1)
#line 14111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 14113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1007 , "현재의 위치에서 줍지 못하는 아이템입니다."));
#line 14114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage );
#line 14116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 14117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 14122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  myLayer  = _pNetwork  -> MyCharacterInfo  . yLayer ;
#line 14125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  = GetPlacement  () . pl_PositionVector  - it  . item_place ;
#line 14126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 14127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 14133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () <= 2.0f)
#line 14134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 14136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = TRUE ;
#line 14144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = ACTION_NUM_PICKITEM ;
#line 14145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PickItem  (penTarget  -> en_ulID );
#line 14146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 14148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if((penTarget  -> GetFlags  () & ENF_ALIVE ) 
#line 14157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (penTarget  -> IsCharacter  ()))
#line 14158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 14160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 14162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - ((CCharacterBase  *) penTarget ) -> GetPlacement  () . pl_PositionVector ;
#line 14164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsPvp  () && ! _pUISWDoc  -> IsWar  () && ! IsLegitTarget  (penTarget ) && ! (_pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penTarget  -> en_ulID )) 
#line 14165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ! _pUIMgr  -> GetSiegeWarfareNew  () -> GetWarState  ())
#line 14166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () < 1.0f)
#line 14168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 14170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  cha_index  = - 1;
#line 14176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  cha_shoptype  = 0;
#line 14178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();++ ipl )
#line 14179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl  ];
#line 14181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_iClientIndex  == penTarget  -> en_ulID )
#line 14182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cha_index  = ct  . cha_Index ;
#line 14184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cha_shoptype  = ct  . cha_sbShopType ;
#line 14185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 14186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(cha_shoptype  != PST_NOSHOP )
#line 14189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . sbShopType  == PST_NOSHOP )
#line 14191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPersonalShop  () -> TradePersonalShop  (cha_index  , 0.0f , 0.0f , TRUE );
#line 14193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 14194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(! m_bHold )
#line 14200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () >= 1.0f && ! (m_bSkilling  && m_bStartAttack ))
#line 14202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bForward )
#line 14205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = 0;
#line 14207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 14210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 14212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 14215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && timeGetTime  () - tmStartTime  > 1000)
#line 14216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendMyNextMovePosition  (vDelta );
#line 14218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  fAttackDistance  = _pNetwork  -> MyCharacterInfo  . attackrange ;
#line 14233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 14236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () < fAttackDistance  && ! IsAttacking  () && m_nCurrentSkillNum  == - 1)
#line 14237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 14239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penTarget ))
#line 14245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 14247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2086 , "가로막혀서 공격할수 없습니다."));
#line 14248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 14251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 14253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , penTarget  , vDelta  . Length  ());
#line 14258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 14259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartAttack  ();
#line 14261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 14265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAttacking  ())
#line 14271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Rotate  (- vDelta  , 1800.0f , TRUE );
#line 14273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(! m_bHold )
#line 14276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAttacking  ())
#line 14278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 14280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () > 2.0f)
#line 14283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bForward )
#line 14286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = 0;
#line 14288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 14291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 14293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 14296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && timeGetTime  () - tmStartTime  > 1000)
#line 14297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendMyNextMovePosition  (vDelta );
#line 14299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  -> IsPet  () || penTarget  -> IsSlave  ())
#line 14312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 14314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 14316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  fAttackDistance  = _pNetwork  -> MyCharacterInfo  . attackrange ;
#line 14318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 14320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () < fAttackDistance  && ! IsAttacking  () && m_nCurrentSkillNum  == - 1)
#line 14321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 14323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penTarget ))
#line 14329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 14331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  ("가로막혀서 공격할수 없습니다.");
#line 14332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 14334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 14335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 14337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bAttack  = CheckAttackTarget  (- 1 , penTarget  , 0.0f);
#line 14342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bAttack )
#line 14343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartAttack  ();
#line 14345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 14349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAttacking  ())
#line 14355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Rotate  (- vDelta  , 1800.0f , TRUE );
#line 14357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAttacking  ())
#line 14362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 14364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () >= 2.0f && ! m_bHold )
#line 14367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bForward )
#line 14369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = 0;
#line 14371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 14374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 14376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 14378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward  && timeGetTime  () - tmStartTime  > 1000)
#line 14379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendMyNextMovePosition  (vDelta );
#line 14381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  -> IsFirstExtraFlagOn  (ENF_EX1_NPC ))
#line 14393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 14395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 14398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CDLLEntityClass  * pdecDLLClass  = penTarget  -> GetClass  () -> ec_pdecDLLClass ;
#line 14399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityProperty  & epProperty  = * pdecDLLClass  -> PropertyForTypeAndID  (CEntityProperty  :: EPT_INDEX  , 91);
#line 14400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iMobIndex  = ENTITYPROPERTY  (& * penTarget  , epProperty  . ep_slOffset  , INDEX);
#line 14402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == - 1)
#line 14403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (iMobIndex );
#line 14408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 14409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () >= 5.0f && _cmiComm  . IsNetworkOn  ())
#line 14410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vNpcPos  = penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 14416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == 244)
#line 14417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . lGuildLevel  < 4)
#line 14423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGuildStash  () -> Message  (MSGCMD_NULL  , CTString (_S  (2556 , "길드 레벨 3이하는 창고를 소유할 수 없습니다.")) , UMBS_OK );
#line 14425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGuildStash  () -> OpenGuildStash  ();
#line 14429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iMobIndex  >= 240 && iMobIndex  <= 243)
#line 14433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGuildWarPortal  () -> OpenGuildWarPortal  (iMobIndex );
#line 14438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iMobIndex  >= 382 && iMobIndex  <= 386)
#line 14443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> GetGuildWarPortal  () -> IsVisible  ())
#line 14448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGuildWarPortal  () -> SetPortalIdx  (iMobIndex );
#line 14454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSiegeWarfareNew  () -> SendDratanPortalMessage  (iMobIndex );
#line 14455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsZoneMoving  () && ! m_bHold )
#line 14460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 14462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pUIMgr  -> GetPortal  () -> IsVisible  ())
#line 14463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityProperty  & epPropertyZone  = * pdecDLLClass  -> PropertyForTypeAndID  (CEntityProperty  :: EPT_FLAGS  , 237);
#line 14465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityProperty  & epPropertyExtra  = * pdecDLLClass  -> PropertyForTypeAndID  (CEntityProperty  :: EPT_FLAGS  , 238);
#line 14466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulZoneFlag  = ENTITYPROPERTY  (& * penTarget  , epPropertyZone  . ep_slOffset  , ULONG );
#line 14467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulExtraFlag  = ENTITYPROPERTY  (& * penTarget  , epPropertyExtra  . ep_slOffset  , ULONG );
#line 14469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> ResetZoneList  ();
#line 14471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . GetMobIndex  () == 891)
#line 14472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> AddToZoneList  (31 , 0);
#line 14474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> SetNpcIdx  (MD  . GetMobIndex  ());
#line 14475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX i  = 0;i  < 31 && i  < ZoneInfo  () . GetZoneCount  ();++ i )
#line 14479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (ulZoneFlag  & (1 << i ))){continue ;}
#line 14482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX j  = 0;j  < 31 && j  < ZoneInfo  () . GetExtraCount  (i );++ j )
#line 14483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (ulExtraFlag  & (1 << j ))){continue ;}
#line 14485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> AddToZoneList  (i  , j );
#line 14486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> SetNpcIdx  (MD  . GetMobIndex  ());
#line 14487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . GetMobIndex  () == 468)
#line 14493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> SetNpcIdx  (MD  . GetMobIndex  ());
#line 14495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> OpenDratanDungeonMsgBox  ();
#line 14496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_pUIMgr  -> GetPortal  () -> GetZoneListCount  ())
#line 14498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPortal  () -> OpenPortal  (vNpcPos  (1) , vNpcPos  (3));
#line 14500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 14502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . GetMobIndex  () == 482)
#line 14507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . sbShopType  == PST_NOSHOP )
#line 14509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPersonalShop  () -> TradePersonalShop  (MD  . GetOwnerIndex  () , 0.0f , 0.0f , TRUE );
#line 14511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 14512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsShopper  ())
#line 14516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_SHOP  , vNpcPos  (1) , vNpcPos  (3));
#line 14522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsWareHouse  ())
#line 14526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_WAREHOUSE  , vNpcPos  (1) , vNpcPos  (3));
#line 14532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsRefiner  ())
#line 14536 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_REFINE  , vNpcPos  (1) , vNpcPos  (3));
#line 14542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsGuild  ())
#line 14546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_GUILD  , vNpcPos  (1) , vNpcPos  (3));
#line 14552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsResetStat  ())
#line 14556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_INITJOB  , vNpcPos  (1) , vNpcPos  (3));
#line 14562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsChangeWeapon  ())
#line 14566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_CHANGEWEAPON  , vNpcPos  (1) , vNpcPos  (3));
#line 14572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsWarCastle  ())
#line 14576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  tQtr ;
#line 14583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == DRATAN_MASTER_TOWER_INDEX )
#line 14584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . sbAttributePos  == ATTC_WAR  && 
#line 14587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  == WCJF_OWNER )
#line 14588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuest  () -> OpenQuest  (iMobIndex  , FALSE  , vNpcPos  (1) , vNpcPos  (3));
#line 14590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iMobIndex  == DRATAN_LORD_SYMBOL_INDEX )
#line 14593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . sbAttributePos  == ATTC_WAR  && 
#line 14596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  == WCJF_ATTACK_GUILD  && 
#line 14597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! _pNetwork  -> MyCharacterInfo  . bConsensus )
#line 14598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSiegeWarfareNew  () -> SendConsensus  ((UBYTE ) MSG_CASTLE_CRISTAL_RESPOND_START );
#line 14600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if((tQtr  = MD  . IsMyQuarter  ()) != QUARTER_NONE )
#line 14603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(tQtr  == QUARTER_INSTALL  && _pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  == WCJF_ATTACK_GUILD )
#line 14605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSiegeWarfareNew  () -> CreateBuyQuarterBox  (MD  . GetMobIndex  ());
#line 14607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_SIEGE_WARFARE  , vNpcPos  (1) , vNpcPos  (3));
#line 14614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsCastleTower  ())
#line 14620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  == WCJF_OWNER )
#line 14626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . GetMobIndex  () == 388 || 
#line 14629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MD  . GetMobIndex  () == 389 || 
#line 14630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MD  . GetMobIndex  () == 404)
#line 14631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSiegeWarfareNew  () -> SendTowerRepairStateRequest  (MD  . GetMobIndex  ());
#line 14636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsRemission  ())
#line 14641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_REMISSION  , vNpcPos  (1) , vNpcPos  (3));
#line 14647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsSkillMaster  ())
#line 14651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_SKILLLEARN  , vNpcPos  (1) , vNpcPos  (3));
#line 14657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsSSkillMaster  ())
#line 14661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . GetSpecialSkillMaster  () == SSKILL_PROCESS_NPC )
#line 14663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_PROCESSNPC  , vNpcPos  (1) , vNpcPos  (3));
#line 14669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_SKILLLEARN  , vNpcPos  (1) , vNpcPos  (3));
#line 14679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsQuest  ())
#line 14684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_QUEST  , vNpcPos  (1) , vNpcPos  (3));
#line 14690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iMobIndex  == 192)
#line 14696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_GAMBLE  , vNpcPos  (1) , vNpcPos  (3));
#line 14702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGamble  () -> OpenGamble  (penTarget );
#line 14703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iMobIndex  == 271)
#line 14708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetGamble  () -> OpenGamble  (penTarget  , TRUE );
#line 14715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iMobIndex  == 253)
#line 14719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_PETTRAINING  , vNpcPos  (1) , vNpcPos  (3));
#line 14725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iMobIndex  == 32 || iMobIndex  == 88 || iMobIndex  == 160 || iMobIndex  == 343)
#line 14730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> RearrangeOrder  (UI_NPCHELP  , TRUE );
#line 14735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(MD  . IsPeaceful  ())
#line 14739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_bSingleMode )
#line 14741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CEnemy  *) penTarget ) -> m_EventType  == EVENT_MOBCLICK )
#line 14748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CEnemy  *) penTarget ) -> ClickedEvent  ();
#line 14750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetQuestBookNew  () -> RequestQuest  (iMobIndex  , UI_CHARACTERINFO  , vNpcPos  (1) , vNpcPos  (3));
#line 14755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(! m_bHold )
#line 14764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 14766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 14768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAttacking  ())
#line 14769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  != NULL ){
#line 14771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 14774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = m_vDesiredPosition  - GetPlacement  () . pl_PositionVector ;
#line 14779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> IsEnemy  () && ! (penTarget  -> GetFlags  () & ENF_ALIVE ))
#line 14780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () < 2.0f)
#line 14783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 14785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 14792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bFirstRotate )
#line 14793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bFinished  = TRUE ;
#line 14795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bFinished  = Rotate  (g_bTargetDirection  , 1800.0f , TRUE );
#line 14796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! bFinished )
#line 14797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = FALSE ;
#line 14799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () < 0.5f)
#line 14811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 14813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bIsRotateEnd  = FALSE ;
#line 14822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bFirstRotate )
#line 14823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bFinished  = TRUE ;
#line 14825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bFinished  = Rotate  (g_bTargetDirection  , 1800.0f , TRUE );
#line 14826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! bFinished )
#line 14827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bFirstRotate  = FALSE ;
#line 14829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 14836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAttacking  ())
#line 14843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  != NULL )
#line 14846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 14850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 14853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 14856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::StopAttack() 
#line 14859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 14861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::StartAttack() 
#line 14864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMobChange )
#line 14866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 14868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = TRUE ;
#line 14871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsAttacking() 
#line 14874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_bStartAttack ;
#line 14876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsProduct() 
#line 14879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_bProduction ;
#line 14881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::StopMove() 
#line 14884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bForward )
#line 14886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  BOOL _bLoginProcess ;
#line 14889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_cmiComm  . IsNetworkOn  () && ! _bLoginProcess )
#line 14890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pUIMgr  -> IsCSFlagOn  (CSF_CANNOT_MOVE_MASK ) || m_bSendStopMessage )
#line 14892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendStopMessage  (this  , GetPlacement  ());
#line 14894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSendStopMessage  = TRUE ;
#line 14895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 14899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vMyPositionTmp  = GetPlacement  () . pl_PositionVector ;
#line 14900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopRotating  ();
#line 14901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopTranslating  ();
#line 14903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitClick  != NULL )
#line 14904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitClick  = NULL ;
#line 14906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CEffectGroupManager  :: Instance  () . IsValidCreated  (m_pPickingEffectGroup ))
#line 14909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  -> Stop  (PICKING_EFFECT_REMAIN_TIME );
#line 14911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  = NULL ;
#line 14912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::StopMoveNoSendStopMsg() 
#line 14917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 14919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 14920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vMyPositionTmp  = GetPlacement  () . pl_PositionVector ;
#line 14921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopRotating  ();
#line 14922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopTranslating  ();
#line 14924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitClick  != NULL )
#line 14925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitClick  = NULL ;
#line 14927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CEffectGroupManager  :: Instance  () . IsValidCreated  (m_pPickingEffectGroup ))
#line 14929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  -> Stop  (PICKING_EFFECT_REMAIN_TIME );
#line 14931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pPickingEffectGroup  = NULL ;
#line 14932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PickItem(ULONG targetindex) 
#line 14936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  ItemIndex  = _pNetwork  -> SearchItemIndex  (targetindex );
#line 14938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ItemIndex  != - 1)
#line 14939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendPickMessage  (this  , (ULONG ) ItemIndex  , TRUE );
#line 14941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::PlayItemSound(BOOL bPick,BOOL bMoney) 
#line 14945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bPick )
#line 14947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , SOUND_PICK_ITEM  , SOF_3D  | SOF_VOLUMETRIC );
#line 14949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bMoney )
#line 14953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , SOUND_DROP_MONEY  , SOF_3D  | SOF_VOLUMETRIC );
#line 14955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 14957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , SOUND_DROP_ITEM  , SOF_3D  | SOF_VOLUMETRIC );
#line 14959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 14963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PlayButtonSound() 
#line 14964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , SOUND_BUTTON_CLICK  , SOF_3D  | SOF_VOLUMETRIC );
#line 14966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::PlayItemEffect(SLONG itemindex,SBYTE effecttype) 
#line 14969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(itemindex  != - 1)
#line 14972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(itemindex )
#line 14974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 14975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 391: 
#line 14976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  : 
#line 14977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , SOUND_POTION  , SOF_3D  | SOF_VOLUMETRIC );
#line 14978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 14979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 14980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 14981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SendMyNextMovePosition(FLOAT3D vDelta) 
#line 15010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_cmiComm  . IsNetworkOn  ())
#line 15012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT length  = vDelta  . Length  ();
#line 15014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT deltaX  = m_vDesiredPosition  (1) - GetPlacement  () . pl_PositionVector  (1);
#line 15015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT deltaZ  = m_vDesiredPosition  (3) - GetPlacement  () . pl_PositionVector  (3);
#line 15017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT num  = length  / plr_fSpeed ;
#line 15020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(num  < 1.0f)
#line 15021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - m_vMyPositionTmp ;
#line 15024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () < 0.5f)
#line 15025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT flength  = Sqrt  (deltaX  * deltaX  + deltaZ  * deltaZ );
#line 15029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(flength  < 0.5f)
#line 15030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 15032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSendStopMessage  = TRUE ;
#line 15033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 15034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 15038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_OrientationAngle  = ANGLE3D (GetPlacement  () . pl_OrientationAngle  (1) , 0 , 0);
#line 15039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  = m_vDesiredPosition ;
#line 15041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendMoveMessage  (this  , plPlacement  , plr_fSpeed );
#line 15042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vMyPositionTmp  = GetPlacement  () . pl_PositionVector ;
#line 15043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSendStopMessage  = FALSE ;
#line 15044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = timeGetTime  ();
#line 15045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 15046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
deltaX  = deltaX  / num ;
#line 15051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
deltaZ  = deltaZ  / num ;
#line 15054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vRayHit ;
#line 15055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlacement3D plPlacement ;
#line 15056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_OrientationAngle  = ANGLE3D (0 , 0 , 0);
#line 15057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  = FLOAT3D (GetPlacement  () . pl_PositionVector  (1) + deltaX  , 300.0f , GetPlacement  () . pl_PositionVector  (3) + deltaZ );
#line 15059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fMaxY  = - 9999999.0f;
#line 15060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bFloorHitted  = FALSE ;
#line 15064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vSource  = plPlacement  . pl_PositionVector ;
#line 15065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTarget  = vSource ;
#line 15066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTarget  (2) -= 1000.0f;
#line 15067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCastRay  crRay  (this  , vSource  , vTarget );
#line 15068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_ttHitModels  = CCastRay  :: TT_NONE ;
#line 15069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_bHitTranslucentPortals  = TRUE ;
#line 15070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_bPhysical  = TRUE ;
#line 15071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetWorld  () -> CastRay  (crRay );
#line 15072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((crRay  . cr_penHit  != NULL ) && (crRay  . cr_vHit  (2) > fMaxY ))
#line 15073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fMaxY  = crRay  . cr_vHit  (2);
#line 15075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bFloorHitted  = TRUE ;
#line 15076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bFloorHitted )
#line 15079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_PositionVector  (2) += fMaxY  - (plPlacement  . pl_PositionVector  (2) + 0.1f);
#line 15081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tmStartTime  = timeGetTime  ();
#line 15085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plPlacement  . pl_OrientationAngle  (1) = GetPlacement  () . pl_OrientationAngle  (1);
#line 15088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendMoveMessage  (this  , plPlacement  , plr_fSpeed );
#line 15089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vMyPositionTmp  = GetPlacement  () . pl_PositionVector ;
#line 15090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSendStopMessage  = FALSE ;
#line 15091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::Rotate(FLOAT3D vDelta,ANGLE aRotateSpeed,BOOL bFirstRotate) 
#line 15096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static ANGLE _aHeadingRotation  = 0.0f;
#line 15100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(aRotateSpeed  > 0.0f && bFirstRotate ){
#line 15102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDir  = vDelta ;
#line 15103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDir  . SafeNormalize  ();
#line 15104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE aWantedHeadingRelative  = GetRelativeHeading  (vDir );
#line 15107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aWantedHeadingRelative  = NormalizeAngle  (aWantedHeadingRelative );
#line 15109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE aHeadingRotation ;
#line 15111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(aWantedHeadingRelative  < - aRotateSpeed  * m_fMoveFrequency ){
#line 15113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aHeadingRotation  = - aRotateSpeed ;
#line 15115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(aWantedHeadingRelative  > aRotateSpeed  * m_fMoveFrequency ){
#line 15118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aHeadingRotation  = + aRotateSpeed ;
#line 15120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 15122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
aHeadingRotation  = aWantedHeadingRelative  / m_fMoveFrequency ;
#line 15124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_aHeadingRotation  == aHeadingRotation )
#line 15125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_aHeadingRotation  = aHeadingRotation ;
#line 15130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (aHeadingRotation  , 0 , 0));
#line 15136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(Abs  (aHeadingRotation ) > 1.0f)
#line 15137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(Abs  (aHeadingRotation ) < 1.0f)
#line 15141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {
#line 15148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (0 , 0 , 0));
#line 15149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::StopRotating() 
#line 15155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (0 , 0 , 0));
#line 15157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::StopTranslating() 
#line 15161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredTranslation  (FLOAT3D (0.0f , 0.0f , 0.0f));
#line 15163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CPlayer::CalcDistanceInPlaneToDestination(void) 
#line 15166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vNormal ;
#line 15169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetNormalComponent  (m_vDesiredPosition  - GetPlacement  () . pl_PositionVector  , en_vGravityDir  , vNormal );
#line 15170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return vNormal  . Length  ();
#line 15171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::MoveNow() 
#line 15174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bMoving  = TRUE ;
#line 15176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (EAutoAction  ());
#line 15178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetDefaultWearing() 
#line 15181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::DeleteCurrentArmor(int weartype) 
#line 15188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> pMyCurrentWearing  [ weartype  ])
#line 15191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 15193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItemData  & ItemData  = _pNetwork  -> pMyCurrentWearing  [ weartype  ] -> ItemData ;
#line 15195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetCurrentPlayerModelInstance  ();
#line 15197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bHead_change )
#line 15198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ItemData  . GetType  () == CItemData  :: ITEM_SHIELD  
#line 15200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| ItemData  . GetType  () == CItemData  :: ITEM_WEAPON )
#line 15201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ItemData  . GetSubType  () == CItemData  :: ITEM_SHIELD_HEAD  && (CTString) ItemData  . GetItemSmcFileName  () == MODEL_TREASURE )
#line 15203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeleteDefaultArmor  (ItemData  . GetSubType  ());
#line 15205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> TakeOffArmor  (pMI  , ItemData );
#line 15209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((ItemData  . GetType  () == CItemData  :: ITEM_SHIELD  
#line 15215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (ItemData  . GetSubType  () == CItemData  :: ITEM_SHIELD_COAT  
#line 15216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| ItemData  . GetSubType  () == CItemData  :: ITEM_SHIELD_PANTS  
#line 15217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| ItemData  . GetSubType  () == CItemData  :: ITEM_SHIELD_GLOVE  
#line 15218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| ItemData  . GetSubType  () == CItemData  :: ITEM_SHIELD_SHOES  
#line 15219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| ItemData  . GetSubType  () == CItemData  :: ITEM_SHIELD_SHIELD 
#line 15220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)) || ItemData  . GetType  () == CItemData  :: ITEM_WEAPON 
#line 15221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 15222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> TakeOffArmor  (pMI  , ItemData );
#line 15226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::DeleteDefaultArmor(int type) 
#line 15235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iPlayerType  = en_pcCharacter  . pc_iPlayerType ;
#line 15239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetCurrentPlayerModelInstance  ();
#line 15241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> DeleteDefaultArmor  (pMI  , type  , iPlayerType );
#line 15242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);
#line 15243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::WearingDefaultArmor(int type) 
#line 15247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetCurrentPlayerModelInstance  ();
#line 15250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 15251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> DeleteDefaultArmor  (pMI  , type  , iJob );
#line 15253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MeshInstance  * mi ;
#line 15254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTFileName fnFileName ;
#line 15257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  iWearPos  = - 1;
#line 15258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(type )
#line 15259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case WEAR_HELMET : 
#line 15261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWearPos  = HEAD ;
#line 15262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case WEAR_JACKET : 
#line 15265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWearPos  = BODYUP ;
#line 15266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case WEAR_PANTS : 
#line 15268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWearPos  = BODYDOWN ;
#line 15269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case WEAR_GLOVES : 
#line 15271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWearPos  = HAND ;
#line 15272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case WEAR_BOOTS : 
#line 15274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWearPos  = FOOT ;
#line 15275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iWearPos  == - 1)
#line 15279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 15281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(type  == WEAR_PANTS )
#line 15285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetMeshName  (iJob  , SKIRT );
#line 15288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(strlen  (fnFileName ) > 0)
#line 15289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mi  = pMI  -> AddArmor  (fnFileName );
#line 15293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetTextureName  (iJob  , SKIRT );
#line 15294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (fnFileName  , fnFileName  . FileName  () , mi );
#line 15297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetTexNormalName  (iJob  , SKIRT );
#line 15298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(strcmp  (fnFileName  , ""))
#line 15299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (fnFileName  , fnFileName  . FileName  () , mi );
#line 15301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bHead_change )
#line 15306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(type  == WEAR_HELMET )
#line 15308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeHairMesh  (pMI  , iJob  , _pNetwork  -> MyCharacterInfo  . hairStyle  - 1);
#line 15310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 15312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetMeshName  (iJob  , iWearPos );
#line 15313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mi  = pMI  -> AddArmor  (fnFileName );
#line 15316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetTextureName  (iJob  , iWearPos );
#line 15317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (fnFileName  , fnFileName  . FileName  () , mi );
#line 15320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetTexNormalName  (iJob  , iWearPos );
#line 15321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(strcmp  (fnFileName  , ""))
#line 15322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (fnFileName  , fnFileName  . FileName  () , mi );
#line 15324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetMeshName  (iJob  , iWearPos );
#line 15331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mi  = pMI  -> AddArmor  (fnFileName );
#line 15333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetTextureName  (iJob  , iWearPos );
#line 15334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (fnFileName  , fnFileName  . FileName  () , mi );
#line 15337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fnFileName  = JobInfo  () . GetTexNormalName  (iJob  , iWearPos );
#line 15338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(strcmp  (fnFileName  , ""))
#line 15339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (fnFileName  , fnFileName  . FileName  () , mi );
#line 15341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);
#line 15344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsSocialActing() 
#line 15347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction  || m_nPlayActionNum  != - 1)
#line 15349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsPolymophing() 
#line 15359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMobChange  || m_bChanging )
#line 15361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsTransforming() 
#line 15372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bIsTransform  || m_bTransforming )
#line 15374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::DeleteWearingWeapon(BOOL bException) 
#line 15382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((bException  && m_bDisappearWeapon ) || (! bException  && ! m_bDisappearWeapon ))
#line 15385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ])
#line 15387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetCurrentPlayerModelInstance  ();
#line 15390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItemData  & ItemData  = _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData ;
#line 15391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> TakeOffArmor  (pMI  , ItemData );
#line 15392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDisappearWeapon  = TRUE ;
#line 15393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . DeleteEffect  (WEAR_WEAPON );
#line 15394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);
#line 15395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nPlayActionNum  == ACTION_NUM_WATER_SPREAD )
#line 15399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetCurrentPlayerModelInstance  ();
#line 15403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UBYTE  ubJob  = _pNetwork  -> MyCharacterInfo  . job ;
#line 15404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MeshInstance  * mi  = pMI  -> AddArmor  (_afnDishMeshName  [ ubJob  ] [ 0 ]);
#line 15405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddTexture_t  (_afnDishTextureName  , _afnDishTextureName  . FileName  () , mi );
#line 15407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> AddArmor  (_afnDishMeshName  [ ubJob  ] [ 1 ]);
#line 15408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);
#line 15411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ubJob  == 0 || ubJob  == 1 || ubJob  == 5)
#line 15412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("water_sm" 
#line 15414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 15415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  ("water_sw" 
#line 15419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , _pTimer  -> GetLerpedCurrentTick  ());
#line 15420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::AppearWearingWeapon() 
#line 15426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bDisappearWeapon )
#line 15428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ])
#line 15430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  Tab  , Row  , Col ;
#line 15432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Tab  = _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> Item_Tab ;
#line 15433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Row  = _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> Item_Row ;
#line 15434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Col  = _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> Item_Col ;
#line 15436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetCurrentPlayerModelInstance  ();
#line 15439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pGameState  -> WearingArmor  (pMI  , _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData );
#line 15441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetMyCurrentWearing  (Tab  , Row  , Col );
#line 15442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);
#line 15443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nPlayActionNum  == ACTION_NUM_WATER_SPREAD )
#line 15447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = GetCurrentPlayerModelInstance  ();
#line 15450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> DeleteMesh  (_afnDishMeshName  [ _pNetwork  -> MyCharacterInfo  . job  ] [ 0 ]);
#line 15451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pMI  -> DeleteMesh  (_afnDishMeshName  [ _pNetwork  -> MyCharacterInfo  . job  ] [ 1 ]);
#line 15453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 15454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 15455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 15456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pMI  -> m_tmSkaTagManager  , 1);
#line 15457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDisappearWeapon  = FALSE ;
#line 15459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 15462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckSkillBuffer() 
#line 15463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bStartAttack )
#line 15465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nDesiredSkillNum  == - 1 && m_nCurrentSkillNum  == - 1)
#line 15470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1)
#line 15475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling )
#line 15477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nReservedSkillNum  == m_nCurrentSkillNum )
#line 15480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 15482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nDesiredSkillNum  != - 1 && m_nReservedSkillNum  == - 1)
#line 15485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = m_nDesiredSkillNum ;
#line 15487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_nDesiredSkillNum  != - 1 && m_nReservedSkillNum  != - 1)
#line 15490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bStartAttack )
#line 15502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetReserve  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 15517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CommandAttack  ();
#line 15519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 15520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  
#line 15521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (GetPlayerWeapons  () -> m_penRayHitTmp  -> GetFlags  () & ENF_ALIVE ) 
#line 15522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ((GetPlayerWeapons  () -> m_penRayHitTmp  -> IsEnemy  ()) || (GetPlayerWeapons  () -> m_penRayHitTmp  -> IsPet  ()) || (GetPlayerWeapons  () -> m_penRayHitTmp  -> IsSlave  ()) 
#line 15523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| ((GetPlayerWeapons  () -> m_penRayHitTmp  -> IsCharacter  ()) 
#line 15524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (IsPvp  () || IsLegitTarget  (penTarget ) || _pUISWDoc  -> IsWar  () || _pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penTarget  -> en_ulID ))))
#line 15525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 15526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nDesiredSkillNum );
#line 15528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  nSkillLevel  = _pUIMgr  -> GetCharacterInfo  () -> GetSkillLevel  (m_nDesiredSkillNum  , false );
#line 15534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetNeedMP  (nSkillLevel  - 1) > _pNetwork  -> MyCharacterInfo  . mp )
#line 15535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (_S  (320 , "MP가 부족합니다.") , SYSMSG_ERROR );
#line 15542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 15544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = m_nDesiredSkillNum ;
#line 15545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nDesiredSkillNum );
#line 15552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  nSkillLevel ;
#line 15554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . Skill_Data  . job  == PET_JOB )
#line 15555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nSkillLevel  = _pUIMgr  -> GetPetInfo  () -> GetSkillLevel  (_pNetwork  -> _PetTargetInfo  . lIndex  , m_nDesiredSkillNum );
#line 15557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(SkillData  . Skill_Data  . job  == WILDPET_JOB )
#line 15559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nSkillLevel  = _pUIMgr  -> GetWildPetInfo  () -> GetSkillLevel  (m_nDesiredSkillNum );
#line 15561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nSkillLevel  = _pUIMgr  -> GetCharacterInfo  () -> GetSkillLevel  (m_nDesiredSkillNum  , false );
#line 15565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(nSkillLevel  == 0)
#line 15568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetNeedMP  (nSkillLevel  - 1) > _pNetwork  -> MyCharacterInfo  . mp )
#line 15574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (_S  (320 , "MP가 부족합니다.") , SYSMSG_ERROR );
#line 15578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  == this )
#line 15580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 15582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = m_nDesiredSkillNum ;
#line 15583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(GetPlayerWeapons  () -> m_penRayHitTmp  && (GetPlayerWeapons  () -> m_penRayHitTmp  -> IsCharacter  ()))
#line 15587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 15589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = m_nDesiredSkillNum ;
#line 15590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! SkillData  . IsNeedTarget  ())
#line 15596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 15599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = m_nDesiredSkillNum ;
#line 15600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 15601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = TRUE ;
#line 15605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::CheckSkill(void) 
#line 15613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bStuned ){return TRUE ;}
#line 15616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! CheckSkillBuffer  ())
#line 15617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  == - 1)
#line 15622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling  || m_bStartAttack )
#line 15627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 15633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 15634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iFlag  = SkillData  . GetSorcererFlag  ();
#line 15637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bIsTransform )
#line 15638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ((iFlag  & (SSF_USE_HELLOUND  | SSF_USE_ELENEN ))))
#line 15641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 15643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iFlag  && ! (iFlag  & SSF_USE_CHARACTER ))
#line 15651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 15653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  == NULL  && SkillData  . IsNeedTarget  ())
#line 15658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 15660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL  && (penTarget  -> IsFirstExtraFlagOn  (ENF_EX1_NPC )) && SkillData  . IsNeedTarget  ())
#line 15664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 15666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bLostTarget  , bAutoAttack ;
#line 15670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! SkillCondition  (m_nCurrentSkillNum  , penTarget  , bLostTarget  , bAutoAttack ))
#line 15671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , FALSE  , FALSE );
#line 15673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bCannotUseSkill )
#line 15677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (_S  (1450 , "현재 스킬을 사용할 수 없는 상태입니다.") , SYSMSG_ERROR );
#line 15679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 15680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ])
#line 15683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  nUsingWeapon  = 0;
#line 15685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bCanUse  = TRUE ;
#line 15687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . Skill_Data  . useWeaponType0  != - 1 && SkillData  . Skill_Data  . useWeaponType1  == - 1)
#line 15688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nUsingWeapon  = 1;
#line 15690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(SkillData  . Skill_Data  . useWeaponType0  == - 1 && SkillData  . Skill_Data  . useWeaponType1  != - 1)
#line 15692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nUsingWeapon  = 2;
#line 15694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(SkillData  . Skill_Data  . useWeaponType0  != - 1 && SkillData  . Skill_Data  . useWeaponType1  != - 1)
#line 15696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
nUsingWeapon  = 3;
#line 15698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(nUsingWeapon )
#line 15701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 1: 
#line 15703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData  . GetSubType  () != SkillData  . Skill_Data  . useWeaponType0 )
#line 15705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bCanUse  = FALSE ;
#line 15707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 2: 
#line 15711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData  . GetSubType  () != SkillData  . Skill_Data  . useWeaponType1 )
#line 15713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bCanUse  = FALSE ;
#line 15715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 3: 
#line 15719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData  . GetSubType  () != SkillData  . Skill_Data  . useWeaponType0  && 
#line 15721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData  . GetSubType  () != SkillData  . Skill_Data  . useWeaponType1 )
#line 15722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bCanUse  = FALSE ;
#line 15724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 15727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! bCanUse )
#line 15730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (_S  (1451 , "알맞는 무기를 장비해야 사용할 수 있는 스킬입니다.") , SYSMSG_ERROR );
#line 15732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 15733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bStartAttack )
#line 15749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . IsSingleDungeonSkill  ())
#line 15751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 15753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (_S  (404 , "퍼스널 던젼에서만 사용할 수 있는 스킬입니다.") , SYSMSG_ERROR );
#line 15756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 15757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! SkillData  . IsNeedTarget  ())
#line 15763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 15765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bWaitForSkillResponse )
#line 15766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetTargetNum  () > 1)
#line 15768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 15772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Add  (this );
#line 15774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessageInContainer  (m_nCurrentSkillNum  , m_dcEnemies  , FALSE );
#line 15776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const char  chTargetType  = SkillData  . GetTargetType  ();
#line 15779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chTargetType  == CSkill  :: STT_SELF_RANGE )
#line 15780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> FindTargetsInRange  (this  , this  , m_dcEnemies  , 
#line 15782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetAppRange  () , SkillData  . GetTargetNum  () , 360.0f , m_nCurrentSkillNum );
#line 15784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessageInContainer  (m_nCurrentSkillNum  , m_dcEnemies  , TRUE );
#line 15785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = TRUE ;
#line 15788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSendSkillMessage  = _pTimer  -> CurrentTick  ();
#line 15789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , this  , _pNetwork  -> MyCharacterInfo  . index  , FALSE );
#line 15793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = TRUE ;
#line 15794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSendSkillMessage  = _pTimer  -> CurrentTick  ();
#line 15795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 15799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget )
#line 15803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (penTarget  -> IsPlayer  () || penTarget  -> IsEnemy  () || penTarget  -> IsCharacter  () || penTarget  -> IsPet  () || penTarget  -> IsSlave  ()))
#line 15805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! CheckAttackTarget  (m_nCurrentSkillNum  , penTarget  , 0.0f))
#line 15810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 15812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (406 , "잘못된 타겟입니다. %s 스킬을 취소합니다.") , SkillData  . GetName  ());
#line 15814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 15816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 15817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! IsVisibleCheckAll  (penTarget ))
#line 15821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 15823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2086 , "가로막혀서 스킬을 사용할수 없습니다."));
#line 15824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 15825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = penTarget ;
#line 15826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTarget  = NULL ;
#line 15828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 15829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 15833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetPos  (0 , 0 , 0);
#line 15834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDirection  (0 , 0 , 0);
#line 15836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = penTarget ;
#line 15837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentCenter  (((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 15838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 15839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 15840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentPos  = this  -> en_plPlacement  . pl_PositionVector  + vCurrentCenter ;
#line 15841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetCenter  (0 , 0 , 0);
#line 15842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT size  = 0;
#line 15843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  -> GetFlags  () & ENF_ALIVE )
#line 15844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> en_RenderType  == RT_SKAMODEL )
#line 15846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D bbox ;
#line 15849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  -> GetModelInstance  () -> GetCurrentColisionBox  (bbox );
#line 15850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vRadius  = (bbox  . maxvect  - bbox  . minvect ) * 0.5f * 0.4f;
#line 15851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
size  = vRadius  . Length  ();
#line 15852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetCenter  = FLOAT3D (((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 15854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 15855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 15856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  = pen  -> en_plPlacement  . pl_PositionVector  + vTargetCenter ;
#line 15857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  = vTargetPos  - vCurrentPos ;
#line 15858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  . Normalize  ();
#line 15859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  -= vDirection  * size ;
#line 15860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  . Normalize  ();
#line 15863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillDistance  = SkillData  . GetFireRange  ();
#line 15864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(vDelta  . Length  () <= m_fSkillDistance )
#line 15865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ulNewButtons  & PLACT_FIRE  && m_bForward )
#line 15868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 15870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 15876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bWaitForSkillResponse )
#line 15877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((! _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ]) && (SkillData  . Skill_Data  . useState  & SCT_WEAPON ))
#line 15879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage  = _S  (702 , "무기를 장착해야 사용할수 있는 스킬입니다.");
#line 15882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 15884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 15886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . Skill_Data  . useState  & SCT_WEAPON )
#line 15889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ])
#line 15891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iWeaponType  = _pNetwork  -> pMyCurrentWearing  [ WEAR_WEAPON  ] -> ItemData  . GetSubType  ();
#line 15894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iWeaponType  == CItemData  :: ITEM_WEAPON_MINING  || 
#line 15895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWeaponType  == CItemData  :: ITEM_WEAPON_GATHERING  || 
#line 15896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iWeaponType  == CItemData  :: ITEM_WEAPON_CHARGE )
#line 15897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage  = _S  (702 , "무기를 장착해야 사용할수 있는 스킬입니다.");
#line 15900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 15902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 15904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((! _pNetwork  -> pMyCurrentWearing  [ WEAR_SHIELD  ]) && (SkillData  . Skill_Data  . useState  & SCT_SHIELD ))
#line 15909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 15912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2087 , "방패를 장착해야 사용할수 있는 스킬입니다."));
#line 15913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 15915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 15917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SLONG  MobIndex  = - 1;
#line 15921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 15922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MobIndex  = penTarget  -> GetNetworkID  ();
#line 15924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAttackingEnemy  = penTarget ;
#line 15929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(int  i  = UI_SUMMON_START ;i  <= UI_SUMMON_END ;++ i )
#line 15930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUISummon  * pUISummon  = (CUISummon  *) _pUIMgr  -> GetUI  (i );
#line 15932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pSummonEntity  = pUISummon  -> GetSummonEntity  ();
#line 15933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pSummonEntity )
#line 15934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pSummonEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_SLAVE ))
#line 15936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penAttackingEnemy  != ((CSlave  *) pSummonEntity ) -> m_penEnemy )
#line 15938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pSummonEntity  -> SendEvent  (ESlaveKilledEnemy  ());
#line 15940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _WildPetInfo  . bIsActive )
#line 15947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pWildPetEntity  = _pNetwork  -> _WildPetInfo  . pet_pEntity ;
#line 15949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pWildPetEntity )
#line 15950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pWildPetEntity  -> IsFirstExtraFlagOn  (ENF_EX1_CURRENT_WILDPET ) && 
#line 15952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(m_penAttackingEnemy  != ((CWildPet  *) pWildPetEntity ) -> m_penEnemy ))
#line 15953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pWildPetEntity  -> SendEvent  (ESlaveKilledEnemy  ());
#line 15956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetTargetNum  () > 1)
#line 15963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 15966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Add  (m_penAttackingEnemy );
#line 15968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessageInContainer  (m_nCurrentSkillNum  , m_dcEnemies  , FALSE );
#line 15970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const char  chTargetType  = SkillData  . GetTargetType  ();
#line 15971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fAngle  = 360.0f;
#line 15973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(chTargetType  == CSkill  :: STT_TARGET_D120 )
#line 15974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fAngle  = 60.0f;
#line 15976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Add  (m_penAttackingEnemy );
#line 15979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> FindTargetsInRange  (this  , m_penAttackingEnemy  , m_dcEnemies  , 
#line 15980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetAppRange  () , SkillData  . GetTargetNum  () - 1 , fAngle  , m_nCurrentSkillNum  , chTargetType );
#line 15982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessageInContainer  (m_nCurrentSkillNum  , m_dcEnemies  , TRUE );
#line 15983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> m_bSingleMode )
#line 15987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CheckAttackTarget  (m_nCurrentSkillNum  , penTarget  , 0.0f))
#line 15989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , penTarget  , MobIndex  , FALSE );
#line 15991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , penTarget  , MobIndex  , TRUE );
#line 15992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Add  (penTarget );
#line 15993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 15995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 15996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 15997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 15999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(CheckAttackTarget  (m_nCurrentSkillNum  , penTarget  , 0.0f))
#line 16002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  == 436)
#line 16005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerEntity  *) CEntity  :: GetPlayerEntity  (0)) -> UseAction  (ACTION_NUM_WATER_SPREAD );
#line 16007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , penTarget  , MobIndex  , FALSE );
#line 16011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = TRUE ;
#line 16020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSendSkillMessage  = _pTimer  -> CurrentTick  ();
#line 16021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 16023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  == this )
#line 16032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetType  () == CSkill  :: ST_MAGIC )
#line 16034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetTargetType  () == CSkill  :: STT_TARGET_ONE  || 
#line 16037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_TARGET_RANGE  || 
#line 16038 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_TARGET_D120  || 
#line 16039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_TARGET_RECT )
#line 16040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 16042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (406 , "잘못된 타겟입니다. %s 스킬을 취소합니다.") , SkillData  . GetName  ());
#line 16044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 16046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 16047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 16052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bWaitForSkillResponse )
#line 16053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , penTarget  , _pNetwork  -> MyCharacterInfo  . index  , FALSE );
#line 16057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = TRUE ;
#line 16058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSendSkillMessage  = _pTimer  -> CurrentTick  ();
#line 16059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 16062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 16066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (406 , "잘못된 타겟입니다. %s 스킬을 취소합니다.") , SkillData  . GetName  ());
#line 16067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 16069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (FALSE  , g_iAutoAttack  , FALSE );
#line 16071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = TRUE ;
#line 16077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bStartAttack )
#line 16082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("here...\n");
#line 16089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 16094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SpellSkill(INDEX m_nCurrentSkillNum) 
#line 16095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bHardcodingSkill  = HardCodingSkill  (TRUE );
#line 16097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! m_bSendStopMessage )
#line 16098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 16100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 16101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT skillSpeed  = (100 - _pNetwork  -> MyCharacterInfo  . skillSpeed ) / 100.0f;
#line 16105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  == 3 || m_nCurrentSkillNum  == 32 || m_nCurrentSkillNum  == 33 || m_nCurrentSkillNum  == 44 
#line 16106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| m_nCurrentSkillNum  == 64 || m_nCurrentSkillNum  == 123 || m_nCurrentSkillNum  == 125 || m_nCurrentSkillNum  == 129)
#line 16107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillSpeed  = 1.0f;
#line 16109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . bCanCancel )
#line 16117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = SkillData  . idPlayer_Anim_Skill  [ _pNetwork  -> MyCharacterInfo  . bExtension  ] [ 0 ];
#line 16120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_idCurrentSkillAnim  == - 1)
#line 16122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . bCanCancel  = FALSE ;
#line 16124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = SkillData  . idPlayer_Anim_Skill  [ _pNetwork  -> MyCharacterInfo  . bExtension  ] [ 2 ];
#line 16126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_idCurrentSkillAnim  == - 1)
#line 16129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 16138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillAnimTime  = GetModelInstance  () -> GetAnimLength  (m_idCurrentSkillAnim ) * skillSpeed ;
#line 16139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = _pTimer  -> CurrentTick  ();
#line 16140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSkilling  = TRUE ;
#line 16142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = TRUE ;
#line 16146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! SkillData  . bCanCancel )
#line 16148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPreSkill  = FALSE ;
#line 16150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bDoSkill  = FALSE ;
#line 16151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  = TRUE ;
#line 16152 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else {
#line 16154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPreSkill  = TRUE ;
#line 16155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bDoSkill  = FALSE ;
#line 16156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  = FALSE ;
#line 16157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (m_idCurrentSkillAnim  , AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 16160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , skillSpeed );
#line 16161 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16163 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . SetStartTime  ();
#line 16165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOn  (CSF_SKILL );
#line 16166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 16169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::CheckAction() 
#line 16170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nPlayActionNum  == - 1)
#line 16172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling  || m_bStartAttack  || m_bForward )
#line 16177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 16179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 16180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 16184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16185 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction )
#line 16188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 16190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 16191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 16193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 16195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SkillAnimation(void) 
#line 16196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static bEffect  = TRUE ;
#line 16199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static CEntity  * penEntity ;
#line 16202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  _PreSkillTime ;
#line 16203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL bPlayPreSkill  = TRUE ;
#line 16204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL bPlayDoSkill  = FALSE ;
#line 16205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL bPlayPostSkill  = FALSE ;
#line 16206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static INDEX step  = 0;
#line 16210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta ;
#line 16211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 16213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & skill  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skill  . IsNeedTarget  () 
#line 16216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ! (skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_NOTHING  && 
#line 16217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  && 
#line 16218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! m_bReadySendSkillMessage ))
#line 16219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16220 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL  && (penTarget  -> IsEnemy  () || penTarget  -> IsPet  () || penTarget  -> IsSlave  ()))
#line 16221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  = GetPlacement  () . pl_PositionVector  - penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 16223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 16224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Rotate  (- vDelta  , 360.0f , TRUE );
#line 16225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  != NULL  && penTarget  == this )
#line 16227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 16229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  != NULL  && penTarget  -> IsCharacter  ())
#line 16231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bPostSkill )
#line 16233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  = GetPlacement  () . pl_PositionVector  - penTarget  -> GetPlacement  () . pl_PositionVector ;
#line 16235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 16236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Rotate  (- vDelta  , 360.0f , TRUE );
#line 16237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillCancelMessage  ();
#line 16244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 16246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReadySendSkillMessage  = TRUE ;
#line 16247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  = FALSE ;
#line 16248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iSkillEffectStep  = 0;
#line 16249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = - 1;
#line 16250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = 0.0f;
#line 16251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSkilling  = FALSE ;
#line 16252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 16253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 16254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 16255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 16257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  == NULL  && m_pSkillReadyEffect  != NULL  && 
#line 16258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEffectGroupManager  :: Instance  () . IsValidCreated  (m_pSkillReadyEffect ))
#line 16259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pSkillReadyEffect  -> Stop  (0.1f);
#line 16261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pSkillReadyEffect  = NULL ;
#line 16262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bPlayPreSkill  = TRUE ;
#line 16265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
step  = 0;
#line 16267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 16268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 16270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 16272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_SKILL );
#line 16274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_NOTHING  && 
#line 16278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  && 
#line 16279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! m_bReadySendSkillMessage )
#line 16280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 16282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 16287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 16289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT skillSpeed  = (100 - _pNetwork  -> MyCharacterInfo  . skillSpeed ) / 100.0f;
#line 16291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  == 3 || m_nCurrentSkillNum  == 32 || m_nCurrentSkillNum  == 33 || m_nCurrentSkillNum  == 44 
#line 16292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| m_nCurrentSkillNum  == 64 || m_nCurrentSkillNum  == 123 || m_nCurrentSkillNum  == 125 || m_nCurrentSkillNum  == 129)
#line 16293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skillSpeed  = 1.0f;
#line 16295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bPreSkill )
#line 16300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 0)
#line 16302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 16306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pSkillReadyEffect  = StartEffectGroup  (skill  . GetReadyEffect  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  
#line 16308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  ());
#line 16309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > m_fSkillAnimTime  - 0.1f))
#line 16311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPreSkill  = FALSE ;
#line 16313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bDoSkill  = TRUE ;
#line 16314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iSkillEffectStep  = 0;
#line 16316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bPlayPreSkill  = TRUE ;
#line 16318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 16320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillAnimTime  = GetModelInstance  () -> GetAnimLength  (SkillData  . idPlayer_Anim_Skill  [ _pNetwork  -> MyCharacterInfo  . bExtension  ] [ 1 ]) * skillSpeed ;
#line 16323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = _pTimer  -> CurrentTick  ();
#line 16325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (SkillData  . idPlayer_Anim_Skill  [ _pNetwork  -> MyCharacterInfo  . bExtension  ] [ 1 ] , AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 16326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , skillSpeed );
#line 16327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(m_nCurrentSkillNum )
#line 16331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_SELF_HEAL : 
#line 16333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_PARTY_HEAL : 
#line 16334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_HEAL : 
#line 16335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_PreSkillTime  = 0.0f;
#line 16336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > _PreSkillTime  && bPlayPreSkill )
#line 16337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bPlayPreSkill  = FALSE ;
#line 16339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_HEALER_HEAL_PRE ) , SOF_3D  | SOF_VOLUMETRIC );
#line 16340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_DEFENCE_MANA : 
#line 16345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_PreSkillTime  = 0.0f;
#line 16346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > _PreSkillTime  && bPlayPreSkill )
#line 16347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bPlayPreSkill  = FALSE ;
#line 16349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_HEALER_DEFENCE_MANA_PRE ) , SOF_3D  | SOF_VOLUMETRIC );
#line 16350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16351 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16355 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16359 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bDoSkill )
#line 16360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iSkillEffectStep  = 0;
#line 16362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = 0.1f;
#line 16363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > m_fSkillAnimTime ))
#line 16364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bDoSkill  = FALSE ;
#line 16366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  = TRUE ;
#line 16368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fSkillAnimTime  = GetModelInstance  () -> GetAnimLength  (SkillData  . idPlayer_Anim_Skill  [ _pNetwork  -> MyCharacterInfo  . bExtension  ] [ 2 ]) * skillSpeed ;
#line 16371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = _pTimer  -> CurrentTick  ();
#line 16373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 16375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AddAnimation  (SkillData  . idPlayer_Anim_Skill  [ _pNetwork  -> MyCharacterInfo  . bExtension  ] [ 2 ] , AN_NORESTART  , 1.0f , PLAYER_ANIM_GROUP_WHOLEBODY  , 
#line 16376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESKA_MASTER_MODEL_INSTANCE  , skillSpeed );
#line 16377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bPostSkill )
#line 16383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bReadySendSkillMessage )
#line 16387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartPostSkill  = FALSE ;
#line 16390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 16392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL bFire  = FALSE ;
#line 16394 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != KN_DASH )
#line 16395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  == HE_SHINING_ARROW  || 
#line 16397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  == HE_STORM_ARROW  || 
#line 16398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  == HE_DOUBLE_STING )
#line 16399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > m_fSkillAnimTime  - 1.0f)
#line 16401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bFire  = TRUE ;
#line 16403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bFire  = TRUE ;
#line 16408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bFire )
#line 16414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! SkillData  . IsNeedTarget  () && SkillData  . GetTargetNum  () <= 1)
#line 16419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("------%f--SendSkillMessage\n" , _pTimer  -> GetLerpedCurrentTick  ());
#line 16421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , this  , _pNetwork  -> MyCharacterInfo  . index  , TRUE );
#line 16422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReadySendSkillMessage  = FALSE ;
#line 16423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penTarget  != NULL  && SkillData  . IsNeedTarget  ())
#line 16426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAttackingEnemy  = penTarget ;
#line 16428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetPos  (0 , 0 , 0);
#line 16429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDirection  (0 , 0 , 0);
#line 16431 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 16432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentCenter  (((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 16433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 16434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 16435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentPos  = this  -> en_plPlacement  . pl_PositionVector  + vCurrentCenter ;
#line 16436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetCenter  (0 , 0 , 0);
#line 16437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT size  = 0;
#line 16438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  -> GetFlags  () & ENF_ALIVE )
#line 16439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> en_RenderType  == RT_SKAMODEL )
#line 16441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D bbox ;
#line 16444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  -> GetModelInstance  () -> GetCurrentColisionBox  (bbox );
#line 16445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vRadius  = (bbox  . maxvect  - bbox  . minvect ) * 0.5f * 0.4f;
#line 16446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
size  = vRadius  . Length  ();
#line 16447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetCenter  = FLOAT3D (((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 16449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 16450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 16451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  = pen  -> en_plPlacement  . pl_PositionVector  + vTargetCenter ;
#line 16452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  = vTargetPos  - vCurrentPos ;
#line 16453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  . Normalize  ();
#line 16454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  -= vDirection  * size ;
#line 16455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection  . Normalize  ();
#line 16458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetTargetType  () == CSkill  :: STT_SELF_ONE  || 
#line 16460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_TARGET_ONE  || 
#line 16461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_PARTY_ONE  || 
#line 16462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_PARTY_ALL )
#line 16463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 16465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("------%f--SendSkillMessage\n" , _pTimer  -> GetLerpedCurrentTick  ());
#line 16467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillMessage  (m_nCurrentSkillNum  , penTarget  , penTarget  -> GetNetworkID  () , TRUE );
#line 16468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReadySendSkillMessage  = FALSE ;
#line 16471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static std  :: vector  < TagInfo  > vecLastEffectInfo ;
#line 16477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  == - 1)
#line 16478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & skill  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 0 && 
#line 16484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(! skill  . IsNeedTarget  () || (penTarget  != NULL  && penTarget  -> en_pmiModelInstance  != NULL  && penTarget  -> en_RenderType  == RT_SKAMODEL )))
#line 16485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 16488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEffectGroup  * pFireEffect  = StartEffectGroup  (skill  . GetFireEffect1  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en_pmiModelInstance  -> m_tmSkaTagManager  , 
#line 16490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pTimer  -> GetLerpedCurrentTick  ());
#line 16491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pSkillReadyEffect  != NULL  && CEffectGroupManager  :: Instance  () . IsValidCreated  (m_pSkillReadyEffect ))
#line 16492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX i  = 0;i  < m_pSkillReadyEffect  -> GetEffectCount  ();++ i )
#line 16494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEffect  * pEffect  = m_pSkillReadyEffect  -> GetEffectKeyVector  () [ i  ] . m_pCreatedEffect ;
#line 16496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEffect  != NULL  && pEffect  -> GetType  () == ET_SKA )
#line 16497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaEffect  * pSkaEffect  = (CSkaEffect  *) pEffect ;
#line 16499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TagInfo  ti ;
#line 16500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ti  . m_vPos  = pSkaEffect  -> GetInstancePosition  ();
#line 16501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ti  . m_qRot  = FLOATquat3D (1 , 0 , 0 , 0);
#line 16502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vecLastEffectInfo  . push_back  (ti );
#line 16503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16505 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pSkillReadyEffect  -> Stop  (0.1f);
#line 16506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pSkillReadyEffect  = NULL ;
#line 16507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pFireEffect  != NULL )
#line 16509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pFireEffect  -> Process  (_pTimer  -> GetLerpedCurrentTick  ());
#line 16511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX i  = 0;i  < pFireEffect  -> GetEffectCount  ();++ i )
#line 16512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEffect  * pEffect  = pFireEffect  -> GetEffectKeyVector  () [ i  ] . m_pCreatedEffect ;
#line 16514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEffect  != NULL  && pEffect  -> GetType  () == ET_SKA )
#line 16515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaEffect  * pSkaEffect  = (CSkaEffect  *) pEffect ;
#line 16517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TagInfo  ti ;
#line 16518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ti  . m_vPos  = pSkaEffect  -> GetInstancePosition  ();
#line 16519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ti  . m_qRot  = FLOATquat3D (1 , 0 , 0 , 0);
#line 16520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vecLastEffectInfo  . push_back  (ti );
#line 16521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pSkaEffect  -> SetLifeTime  (0);
#line 16522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT skillSpeed  = (100 - _pNetwork  -> MyCharacterInfo  . skillSpeed ) / 100.0f;
#line 16529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (skill  . GetDelay  (m_iSkillEffectStep  - 1 , _pNetwork  -> MyCharacterInfo  . bExtension ) * skillSpeed  < m_fSkillAnimTime  && "SkillAnimTime은 반드시 MissileSpeedFireTime보다 커야합니다.");
#line 16532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  > 0 && m_iSkillEffectStep  <= skill  . GetDelayCount  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& _pTimer  -> CurrentTick  () - m_tmSkillStartTime  > skill  . GetDelay  (m_iSkillEffectStep  - 1 , _pNetwork  -> MyCharacterInfo  . bExtension ) * skillSpeed )
#line 16534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
++ m_iSkillEffectStep ;
#line 16537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_NONE )
#line 16538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitPoint ;
#line 16540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitDir ;
#line 16541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetTargetDirection  (this  , GetPlayerWeapons  () -> m_penRayHitTmp  , vHitPoint  , vHitDir );
#line 16543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_dcEnemies  . Count  () > 0)
#line 16544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DamagedTargetsInRange  (this  , m_dcEnemies  , DMT_EXPLOSION  , 1 , vHitPoint  , TRUE );
#line 16546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 16547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 16551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
this  -> InflictDirectDamage  (penTarget  , this  , DMT_NONE  , 0 , vHitPoint  , vHitDir );
#line 16554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vAxisY  (0 , 1 , 0);
#line 16557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT angle  = acos  (vHitDir  % vAxisY );
#line 16558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D axis  = vAxisY  * vHitDir ;
#line 16559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
axis  . Normalize  ();
#line 16560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATquat3D quat ;
#line 16561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
quat  . FromAxisAngle  (axis  , angle );
#line 16562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  () 
#line 16564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, vHitPoint  , quat );
#line 16565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_ARROW )
#line 16567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (en_pmiModelInstance  != NULL );
#line 16570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_dcEnemies  . Count  () > 0)
#line 16571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ENTITIES_ITERATOR  it  = m_dcEnemies  . vectorSelectedEntities  . begin  ();
#line 16573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  != m_dcEnemies  . vectorSelectedEntities  . end  ();++ it )
#line 16574 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  & en  = * (* it );
#line 16576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en  . IsFlagOn  (ENF_ALIVE ))
#line 16577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fHoriOffset  = 0.0f;
#line 16579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fVertiOffset  = 0.0f;
#line 16580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skill  . GetDelayCount  (_pNetwork  -> MyCharacterInfo  . bExtension ) > 1)
#line 16581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDist  = (penTarget  -> en_plPlacement  . pl_PositionVector  - en_plPlacement  . pl_PositionVector ) . Length  ();
#line 16583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT factor  = 1.3f * fDist  / skill  . GetFireRange  ();
#line 16584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
factor  = Clamp  (factor  , 0.0f , 1.0f);
#line 16585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 2){fHoriOffset  = + 1.0f * factor ;}
#line 16586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 3){fHoriOffset  = - 1.0f * factor ;}
#line 16588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 5){fVertiOffset  = - 1.0f * factor ;}
#line 16589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bExtension  && _pNetwork  -> MyCharacterInfo  . job  != ROGUE )
#line 16591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "STAFF" , & en  , skill  . GetMissileSpeed  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, false  , fHoriOffset  , fVertiOffset  , 1);
#line 16596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , & en  , skill  . GetMissileSpeed  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, false  , fHoriOffset  , fVertiOffset );
#line 16603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 16607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL  && penTarget  -> IsFlagOn  (ENF_ALIVE ))
#line 16611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fHoriOffset  = 0.0f;
#line 16613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fVertiOffset  = 0.0f;
#line 16614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skill  . GetDelayCount  (_pNetwork  -> MyCharacterInfo  . bExtension ) > 1)
#line 16615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDist  = (penTarget  -> en_plPlacement  . pl_PositionVector  - en_plPlacement  . pl_PositionVector ) . Length  ();
#line 16617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT factor  = 1.3f * fDist  / skill  . GetFireRange  ();
#line 16618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
factor  = Clamp  (factor  , 0.0f , 1.0f);
#line 16619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 2){fHoriOffset  = + 1.0f * factor ;}
#line 16620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 3){fHoriOffset  = - 1.0f * factor ;}
#line 16622 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iSkillEffectStep  == 5){fVertiOffset  = - 1.0f * factor ;}
#line 16623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . bExtension  && _pNetwork  -> MyCharacterInfo  . job  != ROGUE )
#line 16625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "STAFF" , penTarget  , skill  . GetMissileSpeed  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, false  , fHoriOffset  , fVertiOffset  , 1);
#line 16630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMissile  (this  , "RHAND" , penTarget  , skill  . GetMissileSpeed  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, false  , fHoriOffset  , fVertiOffset );
#line 16637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_DIRECT )
#line 16642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! skill  . IsNeedTarget  ())
#line 16645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & this  -> en_pmiModelInstance  -> m_tmSkaTagManager  
#line 16648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  ());
#line 16649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL  && penTarget  -> GetFlags  () & ENF_ALIVE  && penTarget  -> en_pmiModelInstance  != NULL )
#line 16654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & penTarget  -> en_pmiModelInstance  -> m_tmSkaTagManager  
#line 16657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  ());
#line 16658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_DIRECTDAMAGE )
#line 16662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_dcEnemies  . Count  () > 0)
#line 16664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ENTITIES_ITERATOR  it  = m_dcEnemies  . vectorSelectedEntities  . begin  ();
#line 16666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  != m_dcEnemies  . vectorSelectedEntities  . end  ();++ it )
#line 16667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  & en  = * (* it );
#line 16669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en  . IsFlagOn  (ENF_ALIVE ) && en  . en_pmiModelInstance  != NULL )
#line 16670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & (en  . en_pmiModelInstance  -> m_tmSkaTagManager ) 
#line 16673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  ());
#line 16674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16678 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_dcEnemies  . Count  () > 0)
#line 16679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitPoint ;
#line 16681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vHitDir ;
#line 16682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetTargetDirection  (this  , GetPlayerWeapons  () -> m_penRayHitTmp  , vHitPoint  , vHitDir );
#line 16683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DamagedTargetsInRange  (this  , m_dcEnemies  , DMT_EXPLOSION  , 1 , vHitPoint  , TRUE );
#line 16684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 16685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 16690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
this  -> InflictDirectDamage  (penTarget  , this  , DMT_NONE  , 0 , FLOAT3D (0 , 0 , 0) , FLOAT3D (0 , 0 , 0));
#line 16693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  -> en_pmiModelInstance  != NULL )
#line 16694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartEffectGroup  (skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & penTarget  -> en_pmiModelInstance  -> m_tmSkaTagManager  
#line 16697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, _pTimer  -> GetLerpedCurrentTick  ());
#line 16698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if((skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_CONTINUE  || 
#line 16703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_MAGECUTTER  || 
#line 16704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_DASH ) 
#line 16705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ! vecLastEffectInfo  . empty  ())
#line 16706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_dcEnemies  . Count  () > 0)
#line 16708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(ENTITIES_ITERATOR  it  = m_dcEnemies  . vectorSelectedEntities  . begin  ();
#line 16710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
it  != m_dcEnemies  . vectorSelectedEntities  . end  ();++ it )
#line 16711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  & en  = * (* it );
#line 16713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en  . IsFlagOn  (ENF_ALIVE ))
#line 16714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vecLastEffectInfo  [ 0 ] . m_vPos  , vecLastEffectInfo  [ 0 ] . m_qRot  
#line 16716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, & en  , skill  . GetMissileSpeed  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, false  , skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ));
#line 16720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 16723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL  && penTarget  -> IsFlagOn  (ENF_ALIVE ))
#line 16727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotMagicContinued  (this  , vecLastEffectInfo  [ 0 ] . m_vPos  , vecLastEffectInfo  [ 0 ] . m_qRot  
#line 16729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, penTarget  , skill  . GetMissileSpeed  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16730 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, false  , skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ));
#line 16733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vecLastEffectInfo  . erase  (vecLastEffectInfo  . begin  ());
#line 16736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_GOWAITBACK )
#line 16738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 16740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotGoWaitBack  (this  , vecLastEffectInfo  [ 0 ] . m_vPos  , vecLastEffectInfo  [ 0 ] . m_qRot  
#line 16742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, penTarget  , skill  . GetMissileSpeed  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetDestDelay  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, false );
#line 16747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vecLastEffectInfo  . erase  (vecLastEffectInfo  . begin  ());
#line 16749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(skill  . GetMissileType  (_pNetwork  -> MyCharacterInfo  . bExtension ) == CSkill  :: MT_CONNECT )
#line 16751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  != NULL )
#line 16753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShotConnect  (this  , penTarget  , skill  . GetDestDelay  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect3  (_pNetwork  -> MyCharacterInfo  . bExtension ) 
#line 16756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
, skill  . GetFireEffect2  (_pNetwork  -> MyCharacterInfo  . bExtension ));
#line 16757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > m_fSkillAnimTime  - 0.1f))
#line 16762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1)
#line 16765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & skill  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . GetTargetType  () == CSkill  :: STT_SELF_ONE  || 
#line 16770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_TARGET_ONE  || 
#line 16771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SkillData  . GetTargetType  () == CSkill  :: STT_PARTY_ALL )
#line 16772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 16774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReadySendSkillMessage  = TRUE ;
#line 16779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  = FALSE ;
#line 16781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iSkillEffectStep  = 0;
#line 16782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vecLastEffectInfo  . clear  ();
#line 16784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = - 1;
#line 16785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = 0.0f;
#line 16786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSkilling  = FALSE ;
#line 16787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 16789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartPostSkill  = TRUE ;
#line 16791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bPlayPreSkill  = TRUE ;
#line 16792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
step  = 0;
#line 16793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 16796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
NewClearState  (CLEAR_STATE_LENGTH );
#line 16797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 16799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nReservedSkillNum  != - 1)
#line 16800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = m_nReservedSkillNum ;
#line 16802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 16803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1)
#line 16807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & skill  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 16809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skill  . GetFlag  () & SF_FORHELP  
#line 16810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& (skill  . GetTargetType  () != CSkill  :: STT_SELF_ONE  
#line 16811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| skill  . GetTargetType  () != CSkill  :: STT_SELF_RANGE  
#line 16812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| skill  . GetTargetType  () != CSkill  :: STT_PARTY_ALL ))
#line 16813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 16815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! g_iAutoAttack )
#line 16820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 16822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 16827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_SKILL );
#line 16828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16829 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetPos  (0 , 0 , 0);
#line 16833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDirection  (0 , 0 , 0);
#line 16834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetTargetDirection  (this  , GetPlayerWeapons  () -> m_penRayHitTmp  , vTargetPos  , vDirection );
#line 16836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(m_nCurrentSkillNum )
#line 16837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_SELF_HEAL : 
#line 16839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_PARTY_HEAL : 
#line 16840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_HEAL : 
#line 16841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_PreSkillTime  = 0.0f;
#line 16842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > _PreSkillTime  && bPlayPreSkill )
#line 16843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bPlayPreSkill  = FALSE ;
#line 16845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_HEALER_HEAL_DO ) , SOF_3D  | SOF_VOLUMETRIC );
#line 16846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case HE_DEFENCE_MANA : 
#line 16851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_PreSkillTime  = 0.0f;
#line 16852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pTimer  -> CurrentTick  () - m_tmSkillStartTime  > _PreSkillTime  && bPlayPreSkill )
#line 16853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bPlayPreSkill  = FALSE ;
#line 16855 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlaySound  (m_soMessage  , GenderSound  (SOUND_HEALER_DEFENCE_MANA_DO ) , SOF_3D  | SOF_VOLUMETRIC );
#line 16856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 16859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::UseSkill(int skillIndex) 
#line 16865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 16868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction  || m_bMobChange )
#line 16872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (skillIndex );
#line 16878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(skillIndex  == - 1)
#line 16879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1 && m_bSkilling )
#line 16883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  == skillIndex  || m_nReservedSkillNum  == skillIndex )
#line 16885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DOUBLE  dDelayTime  = DOUBLE  (SkillData  . GetReUseTime  () + _pNetwork  -> MyCharacterInfo  . magicspeed ) / 10.0;
#line 16892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DOUBLE  dElapsedTime  = _pTimer  -> GetHighPrecisionTimer  () . GetSeconds  () - SkillData  . Skill_Data  . Skill_StartTime ;
#line 16894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  nCoolTimeReductionRate  = _pUIMgr  -> GetCoolTimeReductionRate  ();
#line 16896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(nCoolTimeReductionRate  > 0)
#line 16897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
dDelayTime  *= DOUBLE  (100 - nCoolTimeReductionRate ) / 100.0f;
#line 16899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dElapsedTime  <= dDelayTime )
#line 16902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = skillIndex ;
#line 16909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling  || m_bStartAttack )
#line 16910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! SkillData  . IsNeedTarget  ())
#line 16930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 16936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget )
#line 16937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = penTarget ;
#line 16939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::UsePetPickItem() 
#line 16944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _PetTargetInfo  . pen_pEntity )
#line 16946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPetBase  *) _pNetwork  -> _PetTargetInfo  . pen_pEntity ) -> SearchNearItem  ();
#line 16948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPetBase  *) _pNetwork  -> _PetTargetInfo  . pen_pEntity ) -> FindNewItemTarget  ();
#line 16949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::UsePetSkill(int skillIndex) 
#line 16954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction  || m_bMobChange )
#line 16956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (skillIndex );
#line 16962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iSkillType  = SkillData  . GetType  ();
#line 16965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iSkillType  != CSkill  :: ST_PET_SKILL_ACTIVE )
#line 16966 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = skillIndex ;
#line 16972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling  || m_bStartAttack )
#line 16973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 16975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! SkillData  . IsNeedTarget  ())
#line 16979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 16983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 16985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget )
#line 16986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = penTarget ;
#line 16988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 16990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::UseSlaveSkill(CEntity * pEntity,int skillIndex) 
#line 16993 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CSlave  *) pEntity ) -> UseSkill  (skillIndex );
#line 16995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::UseWildSkill(CEntity * pEntity,int skillIndex) 
#line 16998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 16999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CWildPet  *) pEntity ) -> UseSkill  (skillIndex );
#line 17000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::UseAction(int ActionIndex) 
#line 17003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(ActionIndex )
#line 17005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_SITDOWN : 
#line 17007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMobChange  || m_bRide )
#line 17008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 17010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 17011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 17012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction  && 
#line 17015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  != - 1 && 
#line 17016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  != ACTION_NUM_SITDOWN )
#line 17017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nActionSit  == 0)
#line 17022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 1;
#line 17024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_nActionSit  == 2)
#line 17026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 3;
#line 17028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = TRUE ;
#line 17034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = ActionIndex ;
#line 17035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bPersonalShop  = FALSE ;
#line 17037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_WALK_RUN : 
#line 17040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRunningMode  = ! m_bRunningMode ;
#line 17041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRunningMode )
#line 17044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fSpeed  = _pNetwork  -> MyCharacterInfo  . runspeed ;
#line 17046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plr_fSpeed  = _pNetwork  -> MyCharacterInfo  . walkspeed ;
#line 17050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendActionMessage  (0 , ACTION_NUM_WALK_RUN  , 0);
#line 17053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_PK : 
#line 17055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 17056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . sbAttributePos  == ATTC_WAR  || 
#line 17061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . level  > 15)
#line 17063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nLegit  != 0)
#line 17065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 17067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (858 , "현재 당신에게 정당방위가 발동되어 있어서 PVP 해제가 불가능합니다."));
#line 17068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage );
#line 17069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendActionMessage  (0 , ACTION_NUM_PK  , 0);
#line 17073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (_S  (806 , "15레벨 이하는 PVP를 할 수가 없습니다.") , SYSMSG_ERROR );
#line 17078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_GREET : 
#line 17082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_SMILE : 
#line 17083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_CRY : 
#line 17084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_NUMBER_ONE : 
#line 17085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_HANDCLAP : 
#line 17086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_REFUSE : 
#line 17087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_GOOD_LOOKS : 
#line 17088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_GOOD_LOOKS2 : 
#line 17089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_BANTER : 
#line 17090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_CHEER : 
#line 17091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_COMBAT : 
#line 17092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_SUBMISSION : 
#line 17093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case ACTION_NUM_WATER_SPREAD : 
#line 17094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 17095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction  && (m_nPlayActionNum  == ActionIndex  
#line 17100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| m_nPlayActionNum  == ACTION_NUM_WATER_SPREAD )
#line 17101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 17102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17106 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMobChange  || m_bIsTransform )
#line 17107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 17109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 17110 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 17111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bSkilling  || m_bStartAttack  || m_bForward )
#line 17114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 17116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 17117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 17121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_nActionSit  != 2 && m_nActionSit  != 1 && m_nActionSit  != 3)
#line 17124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = ActionIndex ;
#line 17126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = TRUE ;
#line 17127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeleteWearingWeapon  (FALSE );
#line 17128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendActionMessage  (0 , ActionIndex  , 0 , GetPlayerWeapons  () -> m_penRayHitTmp );
#line 17129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
default  : 
#line 17132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ClearMultiTargets() 
#line 17137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 17139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsLegit() 
#line 17142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nLegit  != 0)
#line 17144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 17146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (858 , "현재 당신에게 정당방위가 발동되어 있어서 PVP 해제가 불가능합니다."));
#line 17147 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage );
#line 17148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 17149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 17151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 17153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetTargetNull() 
#line 17154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 17156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = NULL ;
#line 17158 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 17159 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetTargetMe() 
#line 17162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17165 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 17166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetReserve  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 17168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bWaitForSkillTarget )
#line 17169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = this ;
#line 17171 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = this ;
#line 17172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = this ;
#line 17176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
this  -> SetTargetInfo  (_pNetwork  -> MyCharacterInfo  . maxHP  , _pNetwork  -> MyCharacterInfo  . hp  , TRUE  , 0);
#line 17179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsSameTarget(CEntity * penEntity) 
#line 17181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return _pNetwork  -> _TargetInfo  . pen_pEntity  == penEntity ;
#line 17183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetTarget(CEntity * penEntity) 
#line 17186 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bWaitForSkillTarget )
#line 17189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = penEntity ;
#line 17192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17195 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = penEntity ;
#line 17196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17197 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penEntity  -> SetTargetInfo  (0 , 0 , FALSE  , 0);
#line 17198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetMobData(CEntity * penEntity,SLONG hp,SLONG maxHp,int level,BOOL bNpc,int mobIdx) 
#line 17201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17202 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMaxiHealth  = maxHp ;
#line 17203 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentHealth  = hp ;
#line 17204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMobLevel  = level ;
#line 17205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CEnemyBase  *) penEntity ) -> m_bNpc  = bNpc ;
#line 17206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMobDBIndex  = mobIdx ;
#line 17207 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetPetData(CEntity * penEntity,SLONG hp,SLONG maxHP) 
#line 17210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMaxiHealth  = maxHP ;
#line 17212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentHealth  = hp ;
#line 17213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetWildPetData(CEntity * penEntity,SLONG hp,SLONG maxHP) 
#line 17216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMaxiHealth  = maxHP ;
#line 17218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentHealth  = hp ;
#line 17219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetElementalData(CEntity * penEntity,SLONG hp,SLONG maxHP) 
#line 17222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nMaxiHealth  = maxHP ;
#line 17224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_nCurrentHealth  = hp ;
#line 17225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetElementalStatus(CEntity * penEntity,SBYTE sbAttackSpeed,SBYTE sbMagicSpeed,LONG lSkillSpeed,FLOAT fWalkSpeed,FLOAT fRunSpeed,FLOAT fAttackRange) 
#line 17228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fWalkSpeed  = fWalkSpeed ;
#line 17230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fAttackRunSpeed  = fRunSpeed ;
#line 17231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fCloseRunSpeed  = fRunSpeed ;
#line 17232 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fAttackDistance  = fAttackRange ;
#line 17233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fCloseDistance  = fAttackRange ;
#line 17234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fStopDistance  = fAttackRange ;
#line 17235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penEntity ) -> m_fSkillSpeed  = (100 - lSkillSpeed ) / 100.0f;
#line 17236 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL bHardCode  = FALSE ;
#line 17237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static FLOAT AttackSpeed  = 10.0f;
#line 17238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bHardCode )
#line 17239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
sbAttackSpeed  = AttackSpeed ;
#line 17241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CSlave  *) penEntity ) -> SetAttackSpeed  (sbAttackSpeed );
#line 17244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::CommandAttack() 
#line 17247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17248 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penRayHitTmp ;
#line 17249 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetReserve  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 17250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penReservedTarget  && GetPlayerWeapons  () -> m_penReservedTarget  -> GetFlags  () & ENF_ALIVE )
#line 17251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 17253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::CommandAction() 
#line 17257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17258 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTarget  = GetPlayerWeapons  () -> m_penReservedTarget ;
#line 17260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  == this )
#line 17261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 17263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTarget  && (penTarget  -> GetFlags  () & ENF_ALIVE  && penTarget  -> IsCharacter  ()))
#line 17266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((! IsPvp  () || (IsPvp  () && _pUIMgr  -> GetParty  () -> IsPartyMember  (penTarget  -> GetNetworkID  ()))) && 
#line 17268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! _pUIMgr  -> GetGuildBattle  () -> IsEnemy  (penTarget  -> en_ulID )
#line 17269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 17270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 17272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 17276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 17281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 17284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::InflictDirectDamage(CEntity * penToDamage,CEntity * penInflictor,enum DamageType dmtType,
#line 17285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDamageAmmount,const FLOAT3D & vHitPoint,const FLOAT3D & vDirection) 
#line 17286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penToDamage  == NULL ){return ;}
#line 17289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (penToDamage  -> GetFlags  () & ENF_ALIVE )){return ;}
#line 17291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pen  = penToDamage ;
#line 17292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentCenter  (((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 17293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 17294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (this  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 17295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vCurrentPos  = this  -> en_plPlacement  . pl_PositionVector  + vCurrentCenter ;
#line 17296 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetCenter  (0 , 0 , 0);
#line 17297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vTargetPos  (0 , 0 , 0);
#line 17298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDirection2  (0 , 0 , 0);
#line 17299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT size  = 0;
#line 17300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  -> GetFlags  () & ENF_ALIVE )
#line 17301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  -> en_RenderType  == RT_SKAMODEL )
#line 17303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D bbox ;
#line 17306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pen  -> GetModelInstance  () -> GetCurrentColisionBox  (bbox );
#line 17307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vRadius  = (bbox  . maxvect  - bbox  . minvect ) * 0.5f * 0.4f;
#line 17308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
size  = vRadius  . Length  ();
#line 17309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetCenter  = FLOAT3D (((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 0 ] , 
#line 17311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 1 ] , 
#line 17312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((EntityInfo  *) (pen  -> GetEntityInfo  ())) -> vTargetCenter  [ 2 ]);
#line 17313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  = pen  -> en_plPlacement  . pl_PositionVector  + vTargetCenter ;
#line 17314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection2  = vTargetPos  - vCurrentPos ;
#line 17315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection2  . Normalize  ();
#line 17316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTargetPos  -= vDirection2  * size ;
#line 17317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17318 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection2  . Normalize  ();
#line 17321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penToDamage )
#line 17322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("------%f--InflictDirectDamage\n" , _pTimer  -> GetLerpedCurrentTick  ());
#line 17324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX preHealth  , curHealth ;
#line 17325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
preHealth  = ((CUnit  *) penToDamage ) -> m_nPreHealth ;
#line 17326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
curHealth  = ((CUnit  *) penToDamage ) -> m_nCurrentHealth ;
#line 17328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(preHealth  != - 1)
#line 17329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 17332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  = 1;
#line 17334 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penToDamage ) -> m_nCurrentHealth  = ((CUnit  *) penToDamage ) -> m_nPreHealth ;
#line 17336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else fDamageAmmount  = 0;
#line 17339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _TargetInfo  . pen_pEntity  == penToDamage )
#line 17340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17341 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> UpdateTargetInfo  (((CUnit  *) penToDamage ) -> m_nMaxiHealth  , ((CUnit  *) penToDamage ) -> m_nCurrentHealth );
#line 17342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CUnit  *) penToDamage ) -> m_nCurrentHealth  == 0)
#line 17345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17346 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penToDamage  == _pNetwork  -> _TargetInfo  . pen_pEntity )
#line 17347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 17349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) penToDamage ) -> m_nPreHealth  = - 1;
#line 17353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penToDamage  -> IsEnemy  ())
#line 17357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const INDEX iMobIndex  = ((CEnemy  *) penToDamage ) -> m_nMobDBIndex ;
#line 17360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 17361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> m_bSingleMode )
#line 17362 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17363 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (iMobIndex );
#line 17365 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . IsLordSymbol  () || MD  . IsCastleTower  ())
#line 17366 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17367 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , dmtType  , 
#line 17368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  , vTargetPos  , vDirection2 );
#line 17369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if((iJob  == TITAN  || 
#line 17371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iJob  == KNIGHT  || 
#line 17372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(iJob  == ROGUE  && ! _pNetwork  -> MyCharacterInfo  . bExtension ) || 
#line 17373 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! (iJob  == SORCERER  && m_iTransformType  == CTransformInfo  :: TYPE_1 )) && 
#line 17374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penToDamage )) -> m_nCurrentHealth  <= 0 && penToDamage  != this )
#line 17375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , DMT_EXPLOSION  , 
#line 17377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
15.0f , vTargetPos  , vDirection2 );
#line 17378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17381 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , dmtType  , 
#line 17382 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  , vTargetPos  , vDirection2 );
#line 17383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17388 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == EXTREAM_SINGLEDUNGEON )
#line 17392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(dmtType  == DMT_EXPLOSION )
#line 17396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 17398 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDamageAmount  = 40;
#line 17399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! ((CEnemy  *) penToDamage ) -> m_bBoss )
#line 17400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iJob  == TITAN )
#line 17402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmount  = 70;
#line 17404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iJob  == KNIGHT )
#line 17406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17407 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmount  = 60;
#line 17408 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmount  = 15;
#line 17413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection2  (1) = 0.0f;
#line 17415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDirection2  . Normalize  ();
#line 17416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , DMT_EXPLOSION  , 
#line 17417 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmount  , vTargetPos  , vDirection2 );
#line 17418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , DMT_EXPLOSION  , 
#line 17422 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  , vTargetPos  , vDirection2 );
#line 17423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17424 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , DMT_EXPLOSION  , 
#line 17428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  , vTargetPos  , vDirection2 );
#line 17429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iMobIndex  == LORD_SYMBOL_INDEX )
#line 17434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (iMobIndex );
#line 17436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iCurHealth  = ((CUnit  *) ((CEntity  *) penToDamage )) -> m_nCurrentHealth ;
#line 17437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static INDEX iType  = 0;
#line 17438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
float  fMaxHealth  = MD  . GetHealth  ();
#line 17439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iCurHealth  <= fMaxHealth  * 0.25f)
#line 17440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iType  != 1)
#line 17442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iType  = 1;
#line 17444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> SetSkaModel  ("data\\npc\\Gguard\\sword04.smc");
#line 17445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> GetModelInstance  () -> RefreshTagManager  ();
#line 17446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iCurHealth  <= fMaxHealth  * 0.50f)
#line 17449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iType  != 2)
#line 17451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17452 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iType  = 2;
#line 17453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> SetSkaModel  ("data\\npc\\Gguard\\sword03.smc");
#line 17454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> GetModelInstance  () -> RefreshTagManager  ();
#line 17455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(iCurHealth  <= fMaxHealth  * 0.75f)
#line 17458 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17459 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iType  != 3)
#line 17460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iType  = 3;
#line 17462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> SetSkaModel  ("data\\npc\\Gguard\\sword02.smc");
#line 17463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> GetModelInstance  () -> RefreshTagManager  ();
#line 17464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iType  != 0)
#line 17469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iType  = 0;
#line 17471 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> SetSkaModel  (MD  . GetMobSmcFileName  ());
#line 17472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> GetModelInstance  () -> RefreshTagManager  ();
#line 17473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17477 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(penToDamage  -> IsCharacter  ())
#line 17478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ShowDamage  (penToDamage  -> en_ulID );
#line 17480 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , dmtType  , 
#line 17481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  , vTargetPos  , vDirection2 );
#line 17482 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
const int  iJob  = en_pcCharacter  . pc_iPlayerType ;
#line 17488 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((iJob  == TITAN  || iJob  == KNIGHT  || 
#line 17489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
! (iJob  == SORCERER  && m_iTransformType  == CTransformInfo  :: TYPE_1 ) || 
#line 17490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(iJob  == ROGUE  && ! _pNetwork  -> MyCharacterInfo  . bExtension )) && 
#line 17491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penToDamage )) -> m_nCurrentHealth  <= 0 && penToDamage  != this )
#line 17492 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , DMT_EXPLOSION  , 
#line 17494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
15.0f , vTargetPos  , vDirection2 );
#line 17495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17496 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17498 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  :: InflictDirectDamage  (penToDamage  , penInflictor  , dmtType  , 
#line 17499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDamageAmmount  , vTargetPos  , vDirection2 );
#line 17500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CLiveEntity  *) ((CEntity  *) penToDamage )) -> SetHealth  (1000.0f);
#line 17507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penToDamage  -> IsEnemy  ())
#line 17508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CUnit  *) ((CEntity  *) penToDamage )) -> m_nCurrentHealth  <= 0 && penToDamage  != this )
#line 17510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CMobData  & MD  = _pNetwork  -> GetMobData  (((CEnemy  *) penToDamage ) -> m_nMobDBIndex );
#line 17512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! MD  . IsCastleTower  ())
#line 17513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penToDamage )) -> DeathNow  ();
#line 17515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(MD  . GetMobIndex  () >= 352 && MD  . GetMobIndex  () <= 399)
#line 17521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penToDamage )) -> DeathNow  ();
#line 17523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penToDamage  -> SetFlagOff  (ENF_ALIVE );
#line 17527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17528 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17530 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penToDamage  == _pNetwork  -> _TargetInfo  . pen_pEntity )
#line 17531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 17533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17536 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CUnit  *) ((CEntity  *) penToDamage )) -> m_nCurrentHealth  <= 0 && penToDamage  != this )
#line 17539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CUnit  *) ((CEntity  *) penToDamage )) -> DeathNow  ();
#line 17542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penToDamage  == _pNetwork  -> _TargetInfo  . pen_pEntity )
#line 17543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17544 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 17545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::CancelSkill(BOOL bLostTarget,BOOL bAutoAttack,BOOL bSkillError) 
#line 17551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17552 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartPostSkill  = TRUE ;
#line 17554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bPostSkill  && _pNetwork  -> _TargetInfo  . pen_pEntity  != NULL )
#line 17555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(g_bPostSkill  && _pNetwork  -> _TargetInfo  . pen_pEntity  == NULL )
#line 17559 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17560 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPostSkill  = FALSE ;
#line 17561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 17562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bLockSkillCancel  || (m_bWaitForSkillResponse  && ! bSkillError ))
#line 17565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17569 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . statusEffect  . IsState  (EST_ASSIST_FAKEDEATH ) && 
#line 17570 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack )
#line 17571 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 17573 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17575 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bStartAttack )
#line 17576 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 17578 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReservedCancel  = ! bAutoAttack ;
#line 17579 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17581 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1)
#line 17584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkill  & SkillData  = _pNetwork  -> GetSkillData  (m_nCurrentSkillNum );
#line 17586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(SkillData  . bCanCancel )
#line 17587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if((g_bPreSkill  || g_bDoSkill ) && ! g_bPostSkill )
#line 17589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillCancelMessage  ();
#line 17591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 17592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReservedCancel  = ! bAutoAttack ;
#line 17597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 17598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((g_bPreSkill  || g_bDoSkill ) && ! g_bPostSkill ) || ! (g_bPreSkill  || g_bDoSkill  || g_bPostSkill ))
#line 17607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = - 1;
#line 17610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = 0.0f;
#line 17611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSkilling  = FALSE ;
#line 17612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 17613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 17615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 17617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 17619 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 17621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 17623 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 17625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  != NULL  
#line 17626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& ((! bLostTarget  && ! bAutoAttack ) || bLostTarget )
#line 17627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
)
#line 17628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 17631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bLostTarget )
#line 17634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 17638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitClick  != NULL )
#line 17639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitClick  = NULL ;
#line 17641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penReservedTarget  != NULL )
#line 17643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = NULL ;
#line 17645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_SKILL );
#line 17651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pSkillReadyEffect  != NULL  && CEffectGroupManager  :: Instance  () . IsValidCreated  (m_pSkillReadyEffect ))
#line 17652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pSkillReadyEffect  -> Stop  (0.1f);
#line 17654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pSkillReadyEffect  = NULL ;
#line 17655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iSkillEffectStep  = 0;
#line 17659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPreSkill  = g_bDoSkill  = g_bPostSkill  = FALSE ;
#line 17660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::Rebirth() 
#line 17666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDeathChk  = FALSE ;
#line 17668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDying  = FALSE ;
#line 17669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_fHealth  = 1000000.0f;
#line 17670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRcvAtMsg  = TRUE ;
#line 17671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 17674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CloseMessageBox  (MSGCMD_PC_DEATH );
#line 17676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (EEnd  ());
#line 17677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 17679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::CheckField() 
#line 17680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == 0)
#line 17682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . x  <= AREA_CASTLE_X0  + 100 || _pNetwork  -> MyCharacterInfo  . x  >= AREA_CASTLE_X1  + 100 
#line 17684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pNetwork  -> MyCharacterInfo  . z  <= AREA_CASTLE_Z0  - 100 || _pNetwork  -> MyCharacterInfo  . z  >= AREA_CASTLE_Z1  + 100)
#line 17685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bEnvironmentSound  = FALSE ;
#line 17687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bEnvironmentSound  = FALSE ;
#line 17691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . x  >= AREA_CASTLE_X0  && _pNetwork  -> MyCharacterInfo  . x  <= AREA_CASTLE_X1  
#line 17694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& _pNetwork  -> MyCharacterInfo  . z  >= AREA_CASTLE_Z0  && _pNetwork  -> MyCharacterInfo  . z  <= AREA_CASTLE_Z1 )
#line 17695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bFieldArea  = FALSE ;
#line 17697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17699 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bFieldArea  = TRUE ;
#line 17701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(g_slZone  == 4)
#line 17704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . x  <= AREA_CASTLE_DRATAN_X0  + 100 || _pNetwork  -> MyCharacterInfo  . x  >= AREA_CASTLE_DRATAN_X1  + 100 
#line 17706 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
|| _pNetwork  -> MyCharacterInfo  . z  <= AREA_CASTLE_DRATAN_Z0  - 100 || _pNetwork  -> MyCharacterInfo  . z  >= AREA_CASTLE_DRATAN_Z1  + 100)
#line 17707 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bEnvironmentSound  = FALSE ;
#line 17709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bEnvironmentSound  = FALSE ;
#line 17713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . x  >= AREA_CASTLE_DRATAN_X0  && _pNetwork  -> MyCharacterInfo  . x  <= AREA_CASTLE_DRATAN_X1  
#line 17716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
&& _pNetwork  -> MyCharacterInfo  . z  >= AREA_CASTLE_DRATAN_Z0  && _pNetwork  -> MyCharacterInfo  . z  <= AREA_CASTLE_DRATAN_Z1 )
#line 17717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bFieldArea  = FALSE ;
#line 17719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17720 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bFieldArea  = TRUE ;
#line 17723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::PlayBGM(CTFileName fnFileName) 
#line 17732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penMusicHolder  = _pNetwork  -> GetEntityWithName  ("MusicHolder" , 0);
#line 17734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penMusicHolder  != NULL  && "Cannot find Music-Holder!");
#line 17736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EChangeMusic  ecm ;
#line 17737 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fVolume  = m_fVolume ;
#line 17738 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . mtType  = m_mtType ;
#line 17739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . bForceStart  = TRUE ;
#line 17740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = fnFileName ;
#line 17741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penMusicHolder  -> SendEvent  (ecm );
#line 17742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 17744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::PlayMusic() 
#line 17745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  != 0 && g_slZone  != 4)
#line 17747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17751 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penMusicHolder  = _pNetwork  -> GetEntityWithName  ("MusicHolder" , 0);
#line 17752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penMusicHolder  != NULL  && "Cannot find Music-Holder!");
#line 17754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EChangeMusic  ecm ;
#line 17755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fVolume  = m_fVolume ;
#line 17756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . mtType  = m_mtType ;
#line 17757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . bForceStart  = TRUE ;
#line 17759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL _bEnviron  = FALSE ;
#line 17761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bEnvironmentSound )
#line 17762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(g_slZone )
#line 17764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 0: 
#line 17766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_FIELD_ENVIRON ;
#line 17767 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 1: 
#line 17769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_DUNGEON_ENVIRON ;
#line 17770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 3: 
#line 17772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_DUNGEON_ENVIRON ;
#line 17773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 4: 
#line 17775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_DRATAN_ENVIRON ;
#line 17776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 7: 
#line 17778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_MERAC_FIELD ;
#line 17779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 9: 
#line 17781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_DUNGEON_ENVIRON ;
#line 17782 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case 15: 
#line 17784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_EGEHA_PEASE ;
#line 17785 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 17786 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penMusicHolder  -> SendEvent  (ecm );
#line 17789 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
static BOOL _bField  = FALSE ;
#line 17795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bField  != m_bFieldArea )
#line 17796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_bField  = m_bFieldArea ;
#line 17798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bFieldArea )
#line 17799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == 0)
#line 17801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17802 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_FIELD_AREA ;
#line 17804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(g_slZone  == 4)
#line 17806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_FIELD_AREA ;
#line 17809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(g_slZone  == 15)
#line 17811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_FIELD_AREA ;
#line 17813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 17816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ecm  . fnMusic  = MUSIC_CASTLE_AREA ;
#line 17818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penMusicHolder  -> SendEvent  (ecm );
#line 17820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::AddDeathItem(CEntity * penEnemy,FLOAT3D pos,class CItemTarget * pItemTarget,class CItemData * pItemData) 
#line 17825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penEnemy  != NULL  && pItemTarget  != NULL );
#line 17827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CEnemy  *) penEnemy ) -> AddDeathItem  (pos  , pItemTarget  , pItemData );
#line 17828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::DropDeathItem(CEntity * penEnemy) 
#line 17833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penEnemy  != NULL );
#line 17835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CEnemy  *) penEnemy ) -> DropDeathItem  ();
#line 17836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 17838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
bool CPlayer::IsTestClient() 
#line 17839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  UINT  g_uiEntityVersion ;
#line 17841 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  ENGINE_API  INDEX g_bTestClient ;
#line 17842 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bTestClient  && g_uiEntityVersion  >= 10000)
#line 17843 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return true ;
#line 17845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17846 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return false ;
#line 17847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SearchNearItem() 
#line 17850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fDistance  = 1000.0f;
#line 17852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fTmpDistance  = - 1.0f;
#line 17853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * pItemEntity  = NULL ;
#line 17854 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iItemID  = - 1;
#line 17856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 17857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bPlayAction )
#line 17862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl  = 0;ipl  < _pNetwork  -> ga_srvServer  . srv_aitItem  . Count  ();ipl  ++)
#line 17867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CItemTarget  & it  = _pNetwork  -> ga_srvServer  . srv_aitItem  [ ipl  ];
#line 17869 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(it  . item_pEntity  && (it  . item_yLayer  == _pNetwork  -> MyCharacterInfo  . yLayer ))
#line 17870 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17871 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  myLayer  = _pNetwork  -> MyCharacterInfo  . yLayer ;
#line 17872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vDelta  = GetPlacement  () . pl_PositionVector  - it  . item_place ;
#line 17873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vDelta  (2) = 0.0f;
#line 17874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fTmpDistance  = vDelta  . Length  ();
#line 17876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDistance  > fTmpDistance )
#line 17877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fDistance  = fTmpDistance ;
#line 17879 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pItemEntity  = it  . item_pEntity ;
#line 17880 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
iItemID  = it  . item_Index ;
#line 17881 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17882 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17883 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17884 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  ("Near Item Distance : %f \n" , fDistance );
#line 17885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDistance  != 1000.0f && pItemEntity  != NULL  && fDistance  <= 20.0f)
#line 17886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(fDistance  <= 2.0f && iItemID  != - 1)
#line 17889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_UIAutoHelp  -> SetInfo  (AU_PICK_ITEM );
#line 17891 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = TRUE ;
#line 17892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = ACTION_NUM_PICKITEM ;
#line 17893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendPickMessage  (this  , iItemID  , FALSE );
#line 17894 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bLockMove )
#line 17898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 17900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_vRayHitTmp  = pItemEntity  -> en_plPlacement  . pl_PositionVector ;
#line 17903 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = pItemEntity ;
#line 17905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this ))
#line 17906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = TRUE ;
#line 17908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17910 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = FLOAT3D (GetPlayerWeapons  () -> m_vRayHitTmp  (1) , GetPlayerWeapons  () -> m_vRayHitTmp  (2) , GetPlayerWeapons  () -> m_vRayHitTmp  (3));
#line 17912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 17913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 17916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsNotPersnalDungeon() 
#line 17917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  != PD_STRAIA  && g_slZone  != PD_MINOC  && 
#line 17919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_slZone  != T_STRAIA  && g_slZone  != PD_AJAKA  && g_slZone  != PD_GATEofDIMENSION )
#line 17920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 17922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 17925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::DeathYou() 
#line 17928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ClearDamageData  ();
#line 17931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSendStopMessage  = TRUE ;
#line 17932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iSkillEffectStep  = 0;
#line 17933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDying  = TRUE ;
#line 17934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nLegit  = 0;
#line 17935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStuned  = FALSE ;
#line 17936 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bHold  = FALSE ;
#line 17937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDeathChk  = TRUE ;
#line 17939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bChanging  = FALSE ;
#line 17940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bTransforming  = FALSE ;
#line 17943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMobChange )
#line 17944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ReturnChange  (TRUE );
#line 17946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bIsTransform )
#line 17948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ReturnSorcerer  ();
#line 17950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iTransformType  = 0;
#line 17951 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EvocationStop  (_pNetwork  -> MyCharacterInfo  . index );
#line 17952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AppearWearingWeapon  ();
#line 17956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  != NULL )
#line 17957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 17959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 17961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 17962 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitNow  != NULL )
#line 17963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitNow  = NULL ;
#line 17965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAttackingEnemy  = NULL ;
#line 17968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 17970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 17971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 17973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nCurrentSkillNum  != - 1)
#line 17974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17975 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_bPreSkill  || g_bDoSkill  || g_bPostSkill )
#line 17976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SendSkillCancelMessage  ();
#line 17978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 17981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_bPreSkill  = g_bDoSkill  = g_bPostSkill  = FALSE ;
#line 17982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (TRUE  , g_iAutoAttack  , FALSE );
#line 17983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeathInit  ();
#line 17985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . hp  = 0;
#line 17986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . pk_mode  = 0;
#line 17987 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRcvAtMsg  = FALSE ;
#line 17990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bPlayAction  = FALSE ;
#line 17991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nPlayActionNum  = - 1;
#line 17992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nActionSit  = 0;
#line 17994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bProduction  = FALSE ;
#line 17995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nProductionNum  = - 1;
#line 17997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  ())
#line 17998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 17999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetPvpMode  ();
#line 18000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . statusEffect  . Reset  ();
#line 18010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CloseMessageBox  (MSGCMD_PC_DEATH );
#line 18012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strTitle  , strMessage ;
#line 18014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsNotPersnalDungeon  ())
#line 18015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> GetSiegeWarfareNew  () -> GetWarState  () && 
#line 18022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbAttributePos  == ATTC_WAR  && 
#line 18023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbJoinFlagDratan  != WCJF_NONE )
#line 18024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetSiegeWarfareNew  () -> SetTimeReply  (FALSE );
#line 18027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUISWDoc  -> SetUIState  (SWS_WAIT_REBIRTH );
#line 18028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> RearrangeOrder  (UI_SIEGE_WARFARE_NEW  , TRUE );
#line 18029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerDeath  ePLDeath ;
#line 18030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (ePLDeath );
#line 18031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIBuff  -> IsBuff  (RECOVER_HEXP_ITEM ) || _pUIBuff  -> IsBuff  (RECOVER_HEXP_ITEM_LUCKY ))
#line 18035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strTitle  = _S  (2088 , "사용 확인");
#line 18037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMessage  = _S  (2137 , "죽었습니다.\n경험치 복구 주문서를 \n사용하시겠습니까? \n취소시 마을로 이동합니다.");
#line 18039 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUIMsgBox_Info  MsgBoxInfo ;
#line 18040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIBuff  -> IsBuff  (RECOVER_HEXP_ITEM ))
#line 18041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18042 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . SetMsgBoxInfo  (strTitle  , UMBS_YESNO  , UI_NONE  , MSGCMD_USE_CONFIRM_HEXP );
#line 18043 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . SetMsgBoxInfo  (strTitle  , UMBS_YESNO  , UI_NONE  , MSGCMD_USE_CONFIRM_HEXP_LUCKY );
#line 18047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . AddString  (strMessage );
#line 18049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CreateMessageBox  (MsgBoxInfo );
#line 18050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerDeath  ePLDeath ;
#line 18051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (ePLDeath );
#line 18052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIBuff  -> IsBuff  (RECOVER_AEXP_ITEM ) || _pUIBuff  -> IsBuff  (RECOVER_AEXP_ITEM_LUCKY ))
#line 18057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strTitle  = _S  (2088 , "사용 확인");
#line 18059 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMessage  = _S  (2138 , "죽었습니다.\n숙련도 북구 주문서를\n사용하시겠습니까? \n취소시 마을로 이동합니다.");
#line 18061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUIMsgBox_Info  MsgBoxInfo ;
#line 18062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIBuff  -> IsBuff  (RECOVER_AEXP_ITEM ))
#line 18063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . SetMsgBoxInfo  (strTitle  , UMBS_YESNO  , UI_NONE  , MSGCMD_USE_CONFIRM_AEXP );
#line 18065 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18067 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18068 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . SetMsgBoxInfo  (strTitle  , UMBS_YESNO  , UI_NONE  , MSGCMD_USE_CONFIRM_AEXP_LUCKY );
#line 18069 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18070 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . AddString  (strMessage );
#line 18071 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CreateMessageBox  (MsgBoxInfo );
#line 18072 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerDeath  ePLDeath ;
#line 18073 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (ePLDeath );
#line 18074 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18077 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIBuff  -> IsBuff  (REBIRTH_ITEM ) || _pUIBuff  -> IsBuff  (REBIRTH_ITEM_NEWBIE ))
#line 18078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strTitle  = _S  (2088 , "사용 확인");
#line 18080 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMessage  = _S  (2139 , "죽었습니다.\n부활 주문서를\n사용하시겠습니까? \n취소시 마을로 이동합니다.");
#line 18082 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUIMsgBox_Info  MsgBoxInfo ;
#line 18083 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . SetMsgBoxInfo  (strTitle  , UMBS_YESNO  , UI_NONE  , MSGCMD_USE_CONFIRM_REBIRTH );
#line 18084 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . AddString  (strMessage );
#line 18085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CreateMessageBox  (MsgBoxInfo );
#line 18086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerDeath  ePLDeath ;
#line 18087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (ePLDeath );
#line 18088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18089 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIBuff  -> IsBuff  (REBIRTH_ITEM_PHOENIX ))
#line 18092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18093 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strTitle  = _S  (2088 , "사용 확인");
#line 18094 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMessage  = _S  (4262 , "죽었습니다.\n피닉스의부활을\n사용하시겠습니까? \n취소시 마을로 이동합니다.");
#line 18096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUIMsgBox_Info  MsgBoxInfo ;
#line 18097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . SetMsgBoxInfo  (strTitle  , UMBS_YESNO  , UI_NONE  , MSGCMD_USE_CONFIRM_REBIRTH );
#line 18098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . AddString  (strMessage );
#line 18099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CreateMessageBox  (MsgBoxInfo );
#line 18100 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerDeath  ePLDeath ;
#line 18101 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (ePLDeath );
#line 18102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18105 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(g_slZone  == 0)
#line 18116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMessage  = _S  (402 , "죽었습니다. 마을로 이동하시겠습니까?");
#line 18118 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18121 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strMessage  = _S  (403 , "죽었습니다. 시작지점으로 이동하시겠습니까?");
#line 18122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CloseMessageBox  (MSGCMD_PC_DEATH );
#line 18127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CUIMsgBox_Info  MsgBoxInfo ;
#line 18128 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . SetMsgBoxInfo  (_S  (299 , "시스템") , UMBS_OK  , 
#line 18129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UI_NONE  , MSGCMD_PC_DEATH );
#line 18130 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
MsgBoxInfo  . AddString  (strMessage );
#line 18131 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> CreateMessageBox  (MsgBoxInfo );
#line 18133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerDeath  ePLDeath ;
#line 18134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (ePLDeath );
#line 18135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsAlreadyDie() 
#line 18138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_bDying ;
#line 18140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetDie() 
#line 18143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18144 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDying  = TRUE ;
#line 18145 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::DeathInit() 
#line 18148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18149 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bStartAttack  = FALSE ;
#line 18150 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockSkillCancel  = FALSE ;
#line 18151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillResponse  = FALSE ;
#line 18153 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_idCurrentSkillAnim  = - 1;
#line 18154 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSkillStartTime  = 0.0f;
#line 18155 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSkilling  = FALSE ;
#line 18156 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nCurrentSkillNum  = - 1;
#line 18157 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nDesiredSkillNum  = - 1;
#line 18160 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 18162 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nReservedSkillNum  = - 1;
#line 18164 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bWaitForSkillTarget  = FALSE ;
#line 18166 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vDesiredPosition  = GetPlacement  () . pl_PositionVector ;
#line 18167 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  != NULL )
#line 18168 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18169 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 18170 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 18173 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitClick  != NULL )
#line 18174 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitClick  = NULL ;
#line 18176 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penReservedTarget  != NULL )
#line 18178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18179 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = NULL ;
#line 18180 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18182 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOff  (ENF_HIDDEN );
#line 18183 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_SKILL );
#line 18184 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_TELEPORT );
#line 18187 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> IsCSFlagOn  (CSF_PERSONALSHOP ))
#line 18188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18189 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_PERSONALSHOP );
#line 18190 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . sbShopType  = PST_NOSHOP ;
#line 18191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . ShopMsg  . Reset  ();
#line 18192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> GetPersonalShop  () -> ResetShop  ();
#line 18193 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18196 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18198 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsPvp() 
#line 18199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18200 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return _pNetwork  -> m_bIsPvp ;
#line 18201 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsMoving() 
#line 18204 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_bForward ;
#line 18206 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ClearTargetInfo(CEntity * penEntity) 
#line 18209 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18210 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  != NULL )
#line 18211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  == _pNetwork  -> _TargetInfo  . pen_pEntity )
#line 18213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 18215 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  == _pNetwork  -> _TargetInfoReal  . pen_pEntity )
#line 18217 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18218 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 18219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18221 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  == penEntity )
#line 18222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18223 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 18224 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18225 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penReservedTarget  == penEntity )
#line 18226 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18227 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = NULL ;
#line 18228 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18229 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18230 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsSkilling() 
#line 18233 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_bSkilling ;
#line 18235 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsPetActing() 
#line 18238 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _PetTargetInfo  . pen_pEntity )
#line 18240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CPet  *) _pNetwork  -> _PetTargetInfo  . pen_pEntity ) -> IsCommandAnimationPlaying  ())
#line 18242 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18243 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsActionSitting() 
#line 18250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nActionSit  == 1 || m_nActionSit  == 3)
#line 18252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18253 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsSitting() 
#line 18259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_nActionSit  == 2)
#line 18261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18263 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_nActionSit  == 1 || m_nActionSit  == 3)
#line 18265 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18266 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18268 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18270 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18274 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::LostTarget() 
#line 18275 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18276 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 18278 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitTmp  != NULL )
#line 18279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18280 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitTmp  = NULL ;
#line 18281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penRayHitClick  != NULL )
#line 18283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penRayHitClick  = NULL ;
#line 18285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18286 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_penReservedTarget  != NULL )
#line 18287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> m_penReservedTarget  = NULL ;
#line 18289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsIdle() 
#line 18293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsSitting  () || IsSkilling  () || IsMoving  () || IsAlreadyDie  ())
#line 18295 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18300 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetSpeedUp(BOOL bMe,INDEX index,BOOL bSpeedup) 
#line 18303 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18304 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bMe )
#line 18305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18306 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bSpeedUp  = bSpeedup ;
#line 18307 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18308 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penCharacter ;
#line 18310 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (index  , penCharacter ))
#line 18311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18312 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penCharacter  -> IsCharacter  ())
#line 18313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacterBase  *) penCharacter ) -> m_bSpeedUp  = bSpeedup ;
#line 18315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18319 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::IsRidePet(CEntity * pCharacter) 
#line 18322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pCharacter  -> IsPlayer  ())
#line 18324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return m_bRide ;
#line 18326 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18327 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pCharacter  -> IsCharacter  ())
#line 18328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) pCharacter ) -> m_bRide ;
#line 18330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18331 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::RidingPet(CEntity * pCharacter,INDEX iPetType) 
#line 18335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18336 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbPetType  = iPetType  & 0xFF;
#line 18337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SBYTE  sbPetColor  = iPetType  >> 8;
#line 18339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pCharacter  -> IsPlayer  () && ! m_bRide )
#line 18340 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> _PetTargetInfo  . fHungry  <= 0)
#line 18343 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18344 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOn  (CSF_MOUNT_HUNGRY );
#line 18345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18347 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 18348 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (TRUE  , g_iAutoAttack  , FALSE );
#line 18349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 18350 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 18352 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mi_qvOffset  = pCharacter  -> GetModelInstance  () -> mi_qvOffset ;
#line 18353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
mi_iParentBoneID  = pCharacter  -> GetModelInstance  () -> mi_iParentBoneID ;
#line 18356 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . bPetRide  = TRUE ;
#line 18357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRide  = TRUE ;
#line 18358 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iRideType  = sbPetType ;
#line 18360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vPos ;
#line 18361 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ANGLE3D vAngle ;
#line 18364 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pRiderModelInstance  = ObtainModelInstance_t  (PetInfo  () . GetFileName  (sbPetType  , 2));
#line 18368 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(sbPetColor  > 0)
#line 18369 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18370 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strTexFile  = PetInfo  () . GetColoredTexFileName  (sbPetType  , 2 , sbPetColor );
#line 18371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pRiderModelInstance  -> mi_aMeshInst  [ 0 ] . mi_tiTextures  [ 0 ] . ti_toTexture  . SetData_t  (strTexFile );
#line 18372 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ctmi  = m_pRiderModelInstance  -> mi_cmiChildren  . Count  ();
#line 18375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ctmi  > 0)
#line 18376 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18378 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance & cmi  = m_pRiderModelInstance  -> mi_cmiChildren  [ 0 ];
#line 18379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> mi_qvOffset  = cmi  . mi_qvOffset ;
#line 18380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> mi_iParentBoneID  = cmi  . mi_iParentBoneID ;
#line 18383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmi  . Copy  (* pCharacter  -> GetModelInstance  ());
#line 18384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> Copy  (* m_pRiderModelInstance );
#line 18389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> NewClearState  (0.0f);
#line 18390 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ctmi  = pCharacter  -> GetModelInstance  () -> mi_cmiChildren  . Count  ();
#line 18392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ctmi  > 0)
#line 18393 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance & cmi  = pCharacter  -> GetModelInstance  () -> mi_cmiChildren  [ 0 ];
#line 18396 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& cmi  . m_tmSkaTagManager  , 1);
#line 18397 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . statusEffect  . Refresh  (& cmi  . m_tmSkaTagManager  , CStatusEffect  :: R_NONE );
#line 18399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18400 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
IdleAnim  ();
#line 18401 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pCharacter  -> IsCharacter  ())
#line 18403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) pCharacter ) -> RidingPet  (pCharacter  , iPetType );
#line 18405 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::LeavingPet(CEntity * pCharacter) 
#line 18409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18410 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pCharacter  -> IsPlayer  () && m_bRide )
#line 18411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18413 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> IsCSFlagOn  (CSF_MOUNT_HUNGRY ))
#line 18414 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18415 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> SetCSFlagOff  (CSF_MOUNT_HUNGRY );
#line 18416 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18418 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bForward  = FALSE ;
#line 18419 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (TRUE  , g_iAutoAttack  , FALSE );
#line 18420 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 18421 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 18423 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pRiderModelInstance  -> Clear  ();
#line 18425 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX ctmi  = pCharacter  -> GetModelInstance  () -> mi_cmiChildren  . Count  ();
#line 18426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ctmi  > 0)
#line 18427 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance & cmi  = pCharacter  -> GetModelInstance  () -> mi_cmiChildren  [ 0 ];
#line 18430 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pRiderModelInstance  -> Copy  (cmi );
#line 18433 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> Copy  (* m_pRiderModelInstance );
#line 18434 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DeleteModelInstance  (m_pRiderModelInstance );
#line 18435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> mi_qvOffset  = mi_qvOffset ;
#line 18436 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> mi_iParentBoneID  = mi_iParentBoneID ;
#line 18437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
pCharacter  -> GetModelInstance  () -> NewClearState  (0.0f);
#line 18439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . Refresh  (& pCharacter  -> GetModelInstance  () -> m_tmSkaTagManager  , 1);
#line 18440 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . statusEffect  . Refresh  (& pCharacter  -> GetModelInstance  () -> m_tmSkaTagManager  , CStatusEffect  :: R_NONE );
#line 18441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18442 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . bPetRide  = FALSE ;
#line 18443 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bRide  = FALSE ;
#line 18444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iRideType  = - 1;
#line 18445 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18446 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(pCharacter  -> IsCharacter  ())
#line 18447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18448 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) pCharacter ) -> LeavingPet  (pCharacter );
#line 18449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetBodyAnimTime(float fAnimTime) 
#line 18454 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18455 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  * penAnimator  = (CPlayerAnimator  *) ((CEntity  *) m_penAnimator );
#line 18456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penAnimator  -> m_fBodyAnimTime  = fAnimTime ;
#line 18457 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetRepairLegit(SLONG chainex,CCharacterTarget * Ct) 
#line 18460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18461 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity ;
#line 18463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (Ct  -> cha_iClientIndex  , penTargetEntity ))
#line 18464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTargetEntity  -> SetSecondExtraFlagOn  (ENF_EX2_LEGIT );
#line 18466 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Ct  -> SetLegitimate  (TRUE );
#line 18467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penTargetEntity ) -> m_nLegit  = 1;
#line 18468 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penTargetEntity ) -> m_nPkMode  = 3;
#line 18469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18470 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::SetLegit(UBYTE ubType,SLONG chaindex) 
#line 18473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . index  == chaindex )
#line 18475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18476 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 18478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ubType  == MSG_RIGHT_ATTACK_ADD )
#line 18479 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSecondExtraFlagOn  (ENF_EX2_LEGIT );
#line 18483 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nLegit  = 1;
#line 18485 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18486 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(ubType  == MSG_RIGHT_ATTACK_DELAY )
#line 18487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18489 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSecondExtraFlagOn  (ENF_EX2_LEGIT );
#line 18491 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nLegit  = 2;
#line 18493 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(ubType  == MSG_RIGHT_ATTACK_DEL )
#line 18495 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetSecondExtraFlagOff  (ENF_EX2_LEGIT );
#line 18499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_nLegit  = 0;
#line 18501 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18502 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage );
#line 18503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18504 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX ipl2  = 0;ipl2  < _pNetwork  -> ga_srvServer  . srv_actCha  . Count  ();ipl2  ++)
#line 18507 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ ipl2  ];
#line 18509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ct  . cha_Index  == chaindex )
#line 18510 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity ;
#line 18512 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> ga_World  . EntityExists  (ct  . cha_iClientIndex  , penTargetEntity ))
#line 18513 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 18516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ubType  == MSG_RIGHT_ATTACK_ADD )
#line 18517 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18519 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTargetEntity  -> SetSecondExtraFlagOn  (ENF_EX2_LEGIT );
#line 18520 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> AddLegitList  (chaindex );
#line 18521 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . SetLegitimate  (TRUE );
#line 18522 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penTargetEntity ) -> m_nLegit  = 1;
#line 18523 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penTargetEntity ) -> m_nPkMode  = 3;
#line 18524 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (833 , "%s 에 대하여 정당방위가 성립되었습니다.") , ct  . cha_strName );
#line 18525 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18526 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(ubType  == MSG_RIGHT_ATTACK_DELAY )
#line 18527 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18529 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTargetEntity  -> SetSecondExtraFlagOn  (ENF_EX2_LEGIT );
#line 18531 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penTargetEntity ) -> m_nLegit  = 2;
#line 18532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (834 , "%s 에 대한 정당방위가 5초후 해제됩니다.") , ct  . cha_strName );
#line 18533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(ubType  == MSG_RIGHT_ATTACK_DEL )
#line 18535 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18537 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTargetEntity  -> SetSecondExtraFlagOff  (ENF_EX2_LEGIT );
#line 18538 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> DelLegitList  (chaindex );
#line 18539 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . SetLegitimate  (FALSE );
#line 18540 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penTargetEntity ) -> m_nLegit  = 0;
#line 18541 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) penTargetEntity ) -> m_nPkMode  = 2;
#line 18542 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (835 , "%s 에 대한 정당방위가 해제되었습니다.") , ct  . cha_strName );
#line 18543 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18545 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage );
#line 18546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18547 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return ;
#line 18548 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18549 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18550 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18553 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsLegitTarget(CEntity * penEntity) 
#line 18554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18555 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  == NULL  || ! (penEntity  -> GetFlags  () & ENF_ALIVE ) || ! (penEntity  -> IsCharacter  ()))
#line 18556 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18557 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18558 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18561 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penEntity  -> IsSecondExtraFlagOn  (ENF_EX2_LEGIT ))
#line 18562 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18563 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18564 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18565 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18580 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18583 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::DisplayChangeErr(SBYTE err) 
#line 18584 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18585 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 18586 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
switch(err )
#line 18587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18588 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_DEAD : 
#line 18589 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1015 , "죽은 상태에서는 변신할 수 없습니다."));
#line 18590 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_SITDOWN : 
#line 18592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1016 , "앉은 상태에서는 변신할 수 없습니다."));
#line 18593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_WRAP : 
#line 18595 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1017 , "이동장치 사용 중에는 변신할 수 없습니다."));
#line 18596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18597 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_SKILL : 
#line 18598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1018 , "스킬 사용 중에는 변신할 수 없습니다."));
#line 18599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_EXCHANGE : 
#line 18601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1019 , "교환 중에는 변신할 수 없습니다."));
#line 18602 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18603 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_PARTY : 
#line 18604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1020 , "파티 신청 중에는 변신할 수 없습니다."));
#line 18605 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18606 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_PK : 
#line 18607 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1021 , "PK 중에는 변신할 수 없습니다."));
#line 18608 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_LEVEL : 
#line 18610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1022 , "변신할 수 있는 레벨이 아닙니다."));
#line 18611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_ZONE : 
#line 18613 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1023 , "현재의 지역에서는 사용할 수 없습니다."));
#line 18614 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18615 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
case MSG_CHANGE_ERR_BATTLE : 
#line 18616 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1024 , "전투 중에는 변신할 수 없습니다."));
#line 18617 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
break ;
#line 18618 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18620 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 18621 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  BOOL CPlayer::CheckChangeCondition(INDEX level,INDEX zone) 
#line 18624 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18625 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsAlreadyDie  ())
#line 18626 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18627 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_DEAD );
#line 18628 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18629 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18630 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsSitting  ())
#line 18631 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18632 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_SITDOWN );
#line 18633 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_pUIMgr  -> IsCSFlagOn  (CSF_TELEPORT ))
#line 18636 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18637 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_WRAP );
#line 18638 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18639 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsSkilling  ())
#line 18641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18642 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_SKILL );
#line 18643 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18644 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18645 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsPvp  ())
#line 18646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18647 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_PK );
#line 18648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18649 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(IsAttacking  ())
#line 18651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_BATTLE );
#line 18653 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18654 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18655 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(level  > _pNetwork  -> MyCharacterInfo  . level )
#line 18656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_LEVEL );
#line 18658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(zone  != g_slZone )
#line 18661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18662 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DisplayChangeErr  (MSG_CHANGE_ERR_ZONE );
#line 18663 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18664 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18665 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bPlayAction )
#line 18666 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 18668 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1013 , "사교동작 또는 액션 중에는 변신할 수 없습니다."));
#line 18669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 18670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bForward )
#line 18673 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 18675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (1014 , "이동 중에는 변신할 수 없습니다."));
#line 18676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 18677 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18679 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18680 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(m_bRide )
#line 18681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 18683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2584 , "애완동물을 타고 있는 중에는 변신할 수 없습니다."));
#line 18684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 18685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(_pNetwork  -> MyCharacterInfo  . sbEvocationType  != - 1)
#line 18688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strSysMessage ;
#line 18690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
strSysMessage  . PrintF  (_S  (2585 , "강신 중에는 변신할 수 없습니다."));
#line 18691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ClientSystemMessage  (strSysMessage  , SYSMSG_ERROR );
#line 18692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE ;
#line 18693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18695 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18696 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::AppearChaPolymoph(CEntity * pentity,INDEX mobindex) 
#line 18700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pentity  && pentity  -> IsCharacter  ())
#line 18702 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18703 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) pentity ) -> MonsterChange  (mobindex  , TRUE );
#line 18704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::TransfromPet(CEntity * pentity,INDEX mobIndex,INDEX mobSize) 
#line 18709 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18710 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pentity  && pentity  -> IsPet  ())
#line 18711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18712 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mobIndex  > 0)
#line 18713 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT fmobSize  = 1.0f;
#line 18716 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(mobSize  > 0)
#line 18717 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
fmobSize  = mobSize  * 0.1f;
#line 18719 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18721 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPet  *) pentity ) -> TransformPetModel  (mobIndex  , fmobSize );
#line 18722 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18724 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPet  *) pentity ) -> ReturnPetModel  ();
#line 18726 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18728 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::ReturnTransformPet(CEntity * pentity) 
#line 18731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pentity  && pentity  -> IsPet  ())
#line 18733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18734 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPet  *) pentity ) -> ReturnPetModel  ();
#line 18735 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::AppearChaTransform(CEntity * pEntity,INDEX iTransformType) 
#line 18740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pEntity  && pEntity  -> IsCharacter  ())
#line 18742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCharacter  *) pEntity ) -> TransformSorcerer  (iTransformType  , TRUE );
#line 18744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18747 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::StopPlayer() 
#line 18748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 18750 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
BOOL CPlayer::IsVisibleCheckAll(CEntity * penEntity) 
#line 18753 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (penEntity  != NULL );
#line 18757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT3D vSource  , vTarget ;
#line 18758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPositionCastRay  (this  , penEntity  , vSource  , vTarget );
#line 18760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vSource  (2) += 1.8f;
#line 18761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
vTarget  (2) += 1.0f;
#line 18763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCastRay  crRay  (this  , vSource  , vTarget );
#line 18764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_ttHitModels  = CCastRay  :: TT_COLLISIONBOX ;
#line 18765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_bHitTranslucentPortals  = FALSE ;
#line 18766 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_pwoWorld  -> CastRay  (crRay );
#line 18768 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(crRay  . cr_penHit  == NULL )
#line 18769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18770 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(crRay  . cr_penHit  != NULL  && 
#line 18773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(crRay  . cr_penHit  -> IsCharacter  () || 
#line 18774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_penHit  -> IsEnemy  () || 
#line 18775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_penHit  -> IsPet  () || 
#line 18776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_penHit  -> IsSlave  () || 
#line 18777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_penHit  -> GetFlags  () & ENF_ALIVE  || 
#line 18778 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
crRay  . cr_penHit  -> GetFlags  () & ENF_ITEM ))
#line 18779 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE ;
#line 18781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return crRay  . cr_penHit  == penEntity ;
#line 18784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  void CPlayer::PlAddAccessoryEffect(INDEX iCt,CEntity * penEntity,BOOL bIsMe) 
#line 18787 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18788 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strEffectName  = CTString ("Item_support");
#line 18790 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(bIsMe )
#line 18791 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18792 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = ((CCharacter  *) penEntity ) -> GetCurrentPlayerModelInstance  ();
#line 18793 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . itemEffect  . AddAccessoryEffect  (strEffectName  , & pMI  -> m_tmSkaTagManager );
#line 18794 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18795 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18796 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18797 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CCharacterTarget  & ct  = _pNetwork  -> ga_srvServer  . srv_actCha  [ iCt  ];
#line 18798 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelInstance * pMI  = ((CCharacter  *) penEntity ) -> GetCurrentPlayerModelInstance  ();
#line 18799 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ct  . cha_itemEffect  . AddAccessoryEffect  (strEffectName  , & pMI  -> m_tmSkaTagManager );
#line 18800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18801 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
  
#line 18804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
void CPlayer::SetTarget(SLONG targetID,SBYTE targetType) 
#line 18805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penTargetEntity ;
#line 18807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penPlEntity  = CEntity  :: GetPlayerEntity  (0);
#line 18808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerEntity  * penPlayerEntity  = static_cast  < CPlayerEntity  * > (penPlEntity );
#line 18809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> SearchEntityByNetworkID  (targetID  , targetType  , penTargetEntity ))
#line 18810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT MaxHealth  = ((CUnit  *) penTargetEntity ) -> m_nMaxiHealth ;
#line 18812 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOAT CurrentHealth  = ((CUnit  *) penTargetEntity ) -> m_nCurrentHealth ;
#line 18813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  Level  = ((CUnit  *) penTargetEntity ) -> m_nMobLevel ;
#line 18814 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  mobIdx  = ((CUnit  *) penTargetEntity ) -> m_nMobDBIndex ;
#line 18816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkMode  = - 1;
#line 18817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkState ;
#line 18818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
int  PkLegit ;
#line 18819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penTargetEntity  -> IsCharacter  ())
#line 18820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Level  = 0;
#line 18822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkMode  = ((CCharacter  *) ((CEntity  *) penTargetEntity )) -> m_nPkMode ;
#line 18823 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkState  = ((CCharacter  *) ((CEntity  *) penTargetEntity )) -> m_nPkState ;
#line 18824 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PkLegit  = ((CCharacter  *) ((CEntity  *) penTargetEntity )) -> m_nLegit ;
#line 18825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penPlayerEntity  -> SetTarget  (penTargetEntity );
#line 18828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 18830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(PkMode  != - 1)
#line 18831 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTargetEntity  -> SetTargetInfo  (MaxHealth  , CurrentHealth  , FALSE  , Level  , PkMode  , PkState  , PkLegit );
#line 18833 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18834 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 18835 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penTargetEntity  -> SetTargetInfo  (MaxHealth  , CurrentHealth  , FALSE  , Level  , 0 , 0 , 0 , mobIdx );
#line 18838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18839 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
BOOL CPlayer::
#line 18848 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Wounded(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_Wounded
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EDamage, "CPlayer::Wounded expects 'EDamage' as input!");  const EDamage &eDamage = (const EDamage &)__eeInput;
#line 18849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EVoid());
#line 18849 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 18856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
WorldChange(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_WorldChange
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::WorldChange expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 18858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_dcEnemies  . Clear  ();
#line 18859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  ())
#line 18860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetPvpMode  ();
#line 18862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 18864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 18875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FindMusicHolder  ();
#line 18877 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_strGroup  = _SwcWorldChange  . strGroup ;
#line 18878 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TeleportPlayer  ((WorldLinkType ) _SwcWorldChange  . iType  , TPC_WORLDCHANGED );
#line 18893 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soWeaponAmbient  . Stop  ();
#line 18895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerAnimator  () -> InitializeProperties  ();
#line 18898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateLevelStats  ();
#line 18899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_INITIALIZED ;
#line 18900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_CHANGINGLEVEL ;
#line 18913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ShowCursor  (TRUE );
#line 18914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfo  . Init  ();
#line 18915 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> _TargetInfoReal  . Init  ();
#line 18919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  ENGINE_API  FLOAT g_fFramePerSecond ;
#line 18920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
g_fFramePerSecond  = FLT_MAX ;
#line 18923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  && _pNetwork  -> m_bSingleMode  && _pNetwork  -> ga_World  . wo_iNumOfNPC )
#line 18924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntity  * penPlayer  = CEntity  :: GetPlayerEntity  (0);
#line 18926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(std  :: find  (_pNetwork  -> ga_World  . m_vectorTargetNPC  . begin  () , 
#line 18927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ga_World  . m_vectorTargetNPC  . end  () , 
#line 18928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penPlayer ) 
#line 18929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
== _pNetwork  -> ga_World  . m_vectorTargetNPC  . end  ())
#line 18930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18931 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> ga_World  . m_vectorTargetNPC  . push_back  (penPlayer );
#line 18932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EVoid());
#line 18934 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 18937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
WorldChangeDead(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_WorldChangeDead
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::WorldChangeDead expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 18939 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(IsPvp  ())
#line 18940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 18941 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> SetPvpMode  ();
#line 18942 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_RESPAWNINPLACE ;
#line 18956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FindMusicHolder  ();
#line 18959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_Rebirth, TRUE;
Jump(STATE_CURRENT, 0x01910011, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910011_WorldChangeDead_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910011
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_Rebirth, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x01910012, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910012_WorldChangeDead_02(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910012
const EReturn&__e= (EReturn&)__eeInput;
;
#line 18967 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateLevelStats  ();
#line 18968 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_INITIALIZED ;
#line 18969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_CHANGINGLEVEL ;
#line 18970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bLockMove  = FALSE ;
#line 18971 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bReserveMove  = FALSE ;
#line 18972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EVoid());
#line 18972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 18979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Death(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_Death
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EPlayerDeath, "CPlayer::Death expects 'EPlayerDeath' as input!");  const EPlayerDeath &ePLDeath = (const EPlayerDeath &)__eeInput;
#line 18981 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerSource  * ppls  = _pNetwork  -> GetPlayerSource  (this );
#line 18982 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ppls  != NULL ){
#line 18983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iAction  = 0;iAction  < PLS_MAXLASTACTIONS ;iAction  ++){
#line 18984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ppls  -> pls_apaLastActions  [ iAction  ] . Clear  ();
#line 18985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18986 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 18989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iLastViewState  = m_iViewState ;
#line 18992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlags  (GetFlags  () & ~ ENF_ALIVE );
#line 18994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredTranslation  (FLOAT3D (0.0f , 0.0f , 0.0f));
#line 18995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (0.0f , 0.0f , 0.0f));
#line 18997 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  = ANGLE3D (0 , 0 , 0);
#line 18999 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> MyCharacterInfo  . bExtension  || m_bMobChange )
#line 19000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 19002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 19005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeWholeAnim  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_DIE  ] , AN_NORESTART  , 1.0f , 0.2f , 1.0f);
#line 19007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19008 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeWholeAnim  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_DIE  ] , AN_NORESTART  , 1.0f , 0.2f , 1.0f);
#line 19011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19012 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeWholeAnim  (idPlayerWhole_Animation  [ ANIM_DIE  ] , AN_NORESTART  , 1.0f , 0.2f , 1.0f);
#line 19017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bRide )
#line 19022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_iRideType  % 2 == CPetInfo  :: PET_HORSE )
#line 19025 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19026 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeWholeAnim  (idPlayerWhole_Animation  [ ANIM_RIDE_HORSE_DIE  ] , AN_NORESTART  , 1.0f , 0.2f , 1.0f);
#line 19027 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19028 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19029 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19030 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeWholeAnim  (idPlayerWhole_Animation  [ ANIM_RIDE_DRAGON_DIE  ] , AN_NORESTART  , 1.0f , 0.2f , 1.0f);
#line 19031 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19032 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19033 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19034 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19035 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ChangeWholeAnim  (idPlayerWhole_Animation  [ ANIM_EXT_DIE  ] , AN_NORESTART  , 1.0f , 0.2f , 1.0f);
#line 19036 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19037 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19040 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (EPF_MODEL_CORPSE );
#line 19041 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetCollisionFlags  (ECF_CORPSE );
#line 19044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_fDensity  = 400.0f;
#line 19047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pstState  == PST_DIVE ){
#line 19048 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDefaultMouthPitch  ();
#line 19050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this )){IFeel_PlayEffect  ("DeathWater");}
#line 19051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDefaultMouthPitch  ();
#line 19054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this )){IFeel_PlayEffect  ("Death");}
#line 19055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19078 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOn  (ENF_CLIENTHANDLING );
#line 19079 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iMayRespawn  = 0;
#line 19081 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(1.2f);
Jump(STATE_CURRENT, 0x01910014, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910014_Death_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910014
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;

#line 19085 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19086 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_ETimer):{const ETimer&e= (ETimer&)__eeInput;

#line 19090 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iMayRespawn  = 1;
#line 19091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19092 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EDamage):{const EDamage&eDamage= (EDamage&)__eeInput;

#line 19095 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(eDamage  . dmtType  == DMT_ABYSS ){
#line 19096 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penView  != NULL ){
#line 19097 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  *) & * m_penView ) -> m_bFixed  = TRUE ;
#line 19098 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19099 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19107 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19108 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EDeath):{const EDeath&e= (EDeath&)__eeInput;
return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_EEnd):{const EEnd&e= (EEnd&)__eeInput;

#line 19112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UnsetTimer();Jump(STATE_CURRENT,0x01910015, FALSE, EInternal());return TRUE;
#line 19113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EAutoAction):{const EAutoAction&eAutoAction= (EAutoAction&)__eeInput;

#line 19117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bCooperative  && ! GetSP  () -> sp_bSinglePlayer ){
#line 19119 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(((CEntity  *) eAutoAction  . eidFirstMarker ) != NULL  && 
#line 19120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerActionMarker  *) (CEntity  *) eAutoAction  . eidFirstMarker ) -> m_paaAction  == PAA_TELEPORT ){
#line 19122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TeleportToAutoMarker  ((CPlayerActionMarker  *) (CEntity  *) eAutoAction  . eidFirstMarker );
#line 19123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19127 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EDisconnected):{const EDisconnected&e= (EDisconnected&)__eeInput;
return FALSE;}ASSERT(FALSE);break;case(EVENTCODE_EKilledEnemy):{const EKilledEnemy&e= (EKilledEnemy&)__eeInput;
return FALSE;}ASSERT(FALSE);break;case(EVENTCODE_EPlayerKilledEnemy):{const EPlayerKilledEnemy&e= (EPlayerKilledEnemy&)__eeInput;
return FALSE;}ASSERT(FALSE);break;case(EVENTCODE_EPreLevelChange):{const EPreLevelChange&e= (EPreLevelChange&)__eeInput;
return FALSE;}ASSERT(FALSE);break;case(EVENTCODE_EPostLevelChange):{const EPostLevelChange&e= (EPostLevelChange&)__eeInput;
return FALSE;}ASSERT(FALSE);break;case(EVENTCODE_ERebirth):{const ERebirth&e= (ERebirth&)__eeInput;
UnsetTimer();Jump(STATE_CURRENT,0x01910015, FALSE, EInternal());return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_EPlayerRebirth):{const EPlayerRebirth&epr= (EPlayerRebirth&)__eeInput;

#line 19136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOff  (ENF_CLIENTHANDLING );
#line 19137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(epr  . iRespawnInPlace ){
#line 19138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_RESPAWNINPLACE ;
#line 19139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_RESPAWNINPLACE ;
#line 19141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19142 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Call(STATE_CURRENT, STATE_CPlayer_Rebirth, TRUE, EVoid());return TRUE;UnsetTimer();Jump(STATE_CURRENT,0x01910015, FALSE, EInternal());return TRUE;
#line 19143 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EReturn):{const EReturn&e= (EReturn&)__eeInput;
UnsetTimer();Jump(STATE_CURRENT,0x01910015, FALSE, EInternal());return TRUE;}ASSERT(FALSE);break;default:{return TRUE;}ASSERT(FALSE);break;
#line 19146 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE;}BOOL CPlayer::H0x01910015_Death_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910015

#line 19148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,ERebirth  ());
#line 19148 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19151 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TheEnd(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_TheEnd
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::TheEnd expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19172 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerWeapons  &) * m_penWeapons ) . SendEvent  (EReleaseWeapon  ());
#line 19175 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlags  (GetFlags  () & ~ ENF_ALIVE );
#line 19177 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredTranslation  (FLOAT3D (0.0f , 0.0f , 0.0f));
#line 19178 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (0.0f , 0.0f , 0.0f));
#line 19181 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_STAND  , 0);
#line 19188 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  = ANGLE3D (0 , 0 , 0);
#line 19191 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bEndOfGame  = TRUE ;
#line 19192 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetGameEnd  ();
#line 19194 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAt(THINKTIME_NEVER);
Jump(STATE_CURRENT, 0x01910017, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910017_TheEnd_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910017
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;
return TRUE;}ASSERT(FALSE);break;default:{return TRUE;}ASSERT(FALSE);break;
#line 19199 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE;}BOOL CPlayer::H0x01910018_TheEnd_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910018
 ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19205 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FirstInit(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_FirstInit
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::FirstInit expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19208 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iViewState  = m_iLastViewState ;
#line 19211 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penView  != NULL ){
#line 19212 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_penView ) . SendEvent  (EEnd  ());
#line 19213 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penView  = NULL ;
#line 19214 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19216 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FindMusicHolder  ();
#line 19219 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UpdateLevelStats  ();
#line 19222 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
InitializePlayer  (TRUE );
#line 19231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EVoid());
#line 19231 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19234 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Rebirth(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_Rebirth
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::Rebirth expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19237 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iViewState  = m_iLastViewState ;
#line 19239 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! (m_ulFlags  & PLF_RESPAWNINPLACE )){
#line 19240 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlayerWeapons  () -> ClearWeapons  ();
#line 19241 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19244 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penView  != NULL ){
#line 19245 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_penView ) . SendEvent  (EEnd  ());
#line 19246 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penView  = NULL ;
#line 19247 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19250 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CEntityPointer penFlame  = GetChildOfClass  ("Flame");
#line 19251 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penFlame  != NULL )
#line 19252 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19254 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EStopFlaming  esf ;
#line 19255 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
esf  . m_bNow  = TRUE ;
#line 19256 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penFlame  -> SendEvent  (esf );
#line 19257 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19259 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penView  != NULL ){
#line 19260 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerView  &) * m_penView ) . SendEvent  (EEnd  ());
#line 19261 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penView  = NULL ;
#line 19262 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19264 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FindMusicHolder  ();
#line 19267 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
InitializePlayer  (FALSE );
#line 19269 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOff  (ENF_CLIENTHANDLING );
#line 19271 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GoTo  (_pNetwork  -> MyCharacterInfo  . x  , _pNetwork  -> MyCharacterInfo  . h  + 0.5f , _pNetwork  -> MyCharacterInfo  . z  , 
#line 19272 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . r );
#line 19273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19273 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19277 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoGoToMarker(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoGoToMarker
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoGoToMarker expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19279 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulFlags  = AOF_LOOPING  | AOF_NORESTART ;
#line 19281 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iAnim  = GetModelObject  () -> GetAnim  ();
#line 19282 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iAnim  != PLAYER_ANIM_STAND )
#line 19283 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19284 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulFlags  |= AOF_SMOOTHCHANGE ;
#line 19285 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19287 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19288 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . m_bAttacking  = FALSE ;
#line 19289 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyWalkAnimation  ();
#line 19290 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fAutoSpeed  > plr_fSpeed  / 2){
#line 19291 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_RUN  , ulFlags );
#line 19292 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19293 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_NORMALWALK  , ulFlags );
#line 19294 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19297 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Jump(STATE_CURRENT,0x0191001e, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191001e_AutoGoToMarker_03(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191001e
if(!(
#line 19298 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(m_penActionMarker  -> GetPlacement  () . pl_PositionVector  - 
#line 19299 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlacement  () . pl_PositionVector ) . Length  () > 1.0f)){ Jump(STATE_CURRENT,0x0191001f, FALSE, EInternal());return TRUE;}
#line 19301 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(_pTimer  -> TickQuantum );
Jump(STATE_CURRENT, 0x0191001c, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191001c_AutoGoToMarker_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191001c
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x0191001d, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191001d_AutoGoToMarker_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191001d
;Jump(STATE_CURRENT,0x0191001e, FALSE, EInternal());return TRUE;
#line 19302 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}BOOL CPlayer::H0x0191001f_AutoGoToMarker_04(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191001f

#line 19305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19305 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19309 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoGoToMarkerAndStop(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoGoToMarkerAndStop
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoGoToMarkerAndStop expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19311 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ULONG  ulFlags  = AOF_LOOPING  | AOF_NORESTART ;
#line 19313 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
INDEX iAnim  = GetModelObject  () -> GetAnim  ();
#line 19314 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(iAnim  != PLAYER_ANIM_STAND )
#line 19315 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19316 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ulFlags  |= AOF_SMOOTHCHANGE ;
#line 19317 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19319 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19320 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyWalkAnimation  ();
#line 19321 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_fAutoSpeed  > plr_fSpeed  / 2){
#line 19322 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_RUN  , ulFlags );
#line 19323 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19324 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_NORMALWALK  , ulFlags );
#line 19325 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19328 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Jump(STATE_CURRENT,0x01910023, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910023_AutoGoToMarkerAndStop_03(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910023
if(!(
#line 19329 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(m_penActionMarker  -> GetPlacement  () . pl_PositionVector  - 
#line 19330 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetPlacement  () . pl_PositionVector ) . Length  () > m_fAutoSpeed  * _pTimer  -> TickQuantum  * 2.00f)){ Jump(STATE_CURRENT,0x01910024, FALSE, EInternal());return TRUE;}
#line 19332 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(_pTimer  -> TickQuantum );
Jump(STATE_CURRENT, 0x01910021, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910021_AutoGoToMarkerAndStop_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910021
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910022, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910022_AutoGoToMarkerAndStop_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910022
;Jump(STATE_CURRENT,0x01910023, FALSE, EInternal());return TRUE;
#line 19333 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}BOOL CPlayer::H0x01910024_AutoGoToMarkerAndStop_04(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910024

#line 19335 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fAutoSpeed  = 0.0f;
#line 19337 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19338 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyStillAnimation  ();
#line 19339 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_STAND  , AOF_LOOPING  | AOF_NORESTART );
#line 19342 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ForceFullStop  ();
#line 19345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19345 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19349 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoUseItem(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoUseItem
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoUseItem expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19353 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19354 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyPullItemAnimation  ();
#line 19357 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(0.2f);
Jump(STATE_CURRENT, 0x01910026, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910026_AutoUseItem_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910026
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910027, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910027_AutoUseItem_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910027
;
#line 19360 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerActionMarker  * ppam  = GetActionMarker  ();
#line 19371 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(2.20f - 0.2f);
Jump(STATE_CURRENT, 0x01910028, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910028_AutoUseItem_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910028
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910029, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910029_AutoUseItem_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910029
;
#line 19374 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19375 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyRemoveItem  ();
#line 19377 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetActionMarker  () -> m_penTrigger  != NULL ){
#line 19379 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (GetActionMarker  () -> m_penTrigger  , EET_TRIGGER  , this );
#line 19380 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19383 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetActionMarker  () -> m_penDoorController  != NULL ){
#line 19384 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPass  ePass ;
#line 19385 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePass  . penOther  = this ;
#line 19386 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetActionMarker  () -> m_penDoorController  -> SendEvent  (ePass );
#line 19387 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19389 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(3.25f - 2.20f);
Jump(STATE_CURRENT, 0x0191002a, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191002a_AutoUseItem_05(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191002a
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x0191002b, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191002b_AutoUseItem_06(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191002b
;
#line 19391 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19392 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyRemoveItem  ();
#line 19395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19395 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19399 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoPickItem(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoPickItem
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoPickItem expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19402 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19403 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyPickItemAnimation  ();
#line 19404 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_KEYLIFT  , 0);
#line 19406 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(1.2f);
Jump(STATE_CURRENT, 0x0191002d, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191002d_AutoPickItem_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191002d
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x0191002e, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191002e_AutoPickItem_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191002e
;
#line 19409 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetActionMarker  () -> m_penTrigger  != NULL ){
#line 19411 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (GetActionMarker  () -> m_penTrigger  , EET_TRIGGER  , this );
#line 19412 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19426 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(3.6f - 1.2f + GetActionMarker  () -> m_tmWait );
Jump(STATE_CURRENT, 0x0191002f, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191002f_AutoPickItem_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191002f
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910030, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910030_AutoPickItem_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910030
;
#line 19428 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19429 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . BodyRemoveItem  ();
#line 19432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19432 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19435 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoFallDown(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoFallDown
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoFallDown expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19437 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_BRIDGEFALLPOSE  , 0);
#line 19438 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelObject & moBody  = GetModelObject  () -> GetAttachmentModel  (PLAYER_ATTACHMENT_TORSO ) -> amo_moModelObject ;
#line 19439 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
moBody  . PlayAnim  (BODY_ANIM_BRIDGEFALLPOSE  , 0);
#line 19441 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(GetActionMarker  () -> m_tmWait );
Jump(STATE_CURRENT, 0x01910032, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910032_AutoFallDown_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910032
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910033, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910033_AutoFallDown_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910033
;
#line 19444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19444 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19447 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoFallToAbys(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoFallToAbys
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoFallToAbys expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19449 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_ABYSSFALL  , AOF_LOOPING );
#line 19450 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelObject & moBody  = GetModelObject  () -> GetAttachmentModel  (PLAYER_ATTACHMENT_TORSO ) -> amo_moModelObject ;
#line 19451 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
moBody  . PlayAnim  (BODY_ANIM_ABYSSFALL  , AOF_LOOPING );
#line 19453 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(GetActionMarker  () -> m_tmWait );
Jump(STATE_CURRENT, 0x01910035, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910035_AutoFallToAbys_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910035
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910036, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910036_AutoFallToAbys_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910036
;
#line 19456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19456 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19460 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoLookAround(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoLookAround
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoLookAround expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19462 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_BACKPEDAL  , 0);
#line 19463 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vAutoSpeed  = FLOAT3D (0 , 0 , plr_fSpeed  / 4 / 0.75f);
#line 19464 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelObject & moBody  = GetModelObject  () -> GetAttachmentModel  (PLAYER_ATTACHMENT_TORSO ) -> amo_moModelObject ;
#line 19465 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
moBody  . PlayAnim  (BODY_ANIM_NORMALWALK  , 0);
#line 19467 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(GetModelObject  () -> GetCurrentAnimLength  () / 2);
Jump(STATE_CURRENT, 0x01910038, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910038_AutoLookAround_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910038
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910039, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910039_AutoLookAround_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910039
;
#line 19469 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_vAutoSpeed  = FLOAT3D (0 , 0 , 0);
#line 19472 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_STAND  , 0);
#line 19473 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelObject & moBody  = GetModelObject  () -> GetAttachmentModel  (PLAYER_ATTACHMENT_TORSO ) -> amo_moModelObject ;
#line 19474 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
moBody  . PlayAnim  (BODY_ANIM_LOOKAROUND  , 0);
#line 19475 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19478 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(moBody  . GetCurrentAnimLength  () + 0.1f);
Jump(STATE_CURRENT, 0x0191003a, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191003a_AutoLookAround_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191003a
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x0191003b, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191003b_AutoLookAround_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191003b
;
#line 19481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19481 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19484 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
AutoTeleport(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_AutoTeleport
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::AutoTeleport expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19487 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
TeleportToAutoMarker  (GetActionMarker  ());
#line 19490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EReturn  ());
#line 19490 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19494 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
DoAutoActions(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_DoAutoActions
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CPlayer::DoAutoActions expects 'EVoid' as input!");  const EVoid &e = (const EVoid &)__eeInput;
#line 19497 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_plViewpoint  . pl_OrientationAngle  = ANGLE3D (0 , 0 , 0);
#line 19499 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19500 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . m_bDisableAnimating  = TRUE ;
#line 19503 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Jump(STATE_CURRENT,0x01910077, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910077_DoAutoActions_58(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910077
if(!(m_penActionMarker  != NULL  && IsOfClass  (m_penActionMarker  , "PlayerActionMarker"))){ Jump(STATE_CURRENT,0x01910078, FALSE, EInternal());return TRUE;}
#line 19506 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(!(GetActionMarker  () -> m_paaAction  == PAA_WAIT )){ Jump(STATE_CURRENT,0x01910076, FALSE, EInternal());return TRUE;}
#line 19508 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelObject & moBody  = GetModelObject  () -> GetAttachmentModel  (PLAYER_ATTACHMENT_TORSO ) -> amo_moModelObject ;
#line 19509 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
moBody  . PlayAnim  (BODY_ANIM_WAIT  , AOF_NORESTART  | AOF_LOOPING );
#line 19511 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(GetActionMarker  () -> m_tmWait );
Jump(STATE_CURRENT, 0x0191003e, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191003e_DoAutoActions_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191003e
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x0191003f, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191003f_DoAutoActions_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191003f
;Jump(STATE_CURRENT,0x01910075, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910076_DoAutoActions_57(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910076
if(!(GetActionMarker  () -> m_paaAction  == PAA_STOPANDWAIT )){ Jump(STATE_CURRENT,0x01910074, FALSE, EInternal());return TRUE;}
#line 19514 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StartModelAnim  (PLAYER_ANIM_STAND  , 0);
#line 19515 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CModelObject & moBody  = GetModelObject  () -> GetAttachmentModel  (PLAYER_ATTACHMENT_TORSO ) -> amo_moModelObject ;
#line 19516 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
moBody  . PlayAnim  (BODY_ANIM_WAIT  , AOF_NORESTART  | AOF_LOOPING );
#line 19518 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(GetActionMarker  () -> m_tmWait );
Jump(STATE_CURRENT, 0x01910040, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910040_DoAutoActions_03(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910040
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: return TRUE;case EVENTCODE_ETimer: Jump(STATE_CURRENT,0x01910041, FALSE, EInternal()); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910041_DoAutoActions_04(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910041
;Jump(STATE_CURRENT,0x01910073, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910074_DoAutoActions_55(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910074
if(!(GetActionMarker  () -> m_paaAction  == PAA_INTROSE_SELECT_WEAPON )){ Jump(STATE_CURRENT,0x01910072, FALSE, EInternal());return TRUE;}
#line 19532 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESelectWeapon  eSelect ;
#line 19533 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSelect  . iWeapon  = 1;
#line 19534 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerWeapons  &) * m_penWeapons ) . SendEvent  (eSelect );Jump(STATE_CURRENT,0x01910071, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910072_DoAutoActions_53(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910072
if(!(GetActionMarker  () -> m_paaAction  == PAA_TELEPORT )){ Jump(STATE_CURRENT,0x01910070, FALSE, EInternal());return TRUE;}
#line 19546 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_AutoTeleport, TRUE;
Jump(STATE_CURRENT, 0x01910042, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910042_DoAutoActions_05(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910042
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_AutoTeleport, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x01910043, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910043_DoAutoActions_06(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910043
const EReturn&__e= (EReturn&)__eeInput;
;Jump(STATE_CURRENT,0x0191006f, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910070_DoAutoActions_51(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910070
if(!(GetActionMarker  () -> m_paaAction  == PAA_WAITFOREVER )){ Jump(STATE_CURRENT,0x0191006e, FALSE, EInternal());return TRUE;}
#line 19551 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAt(THINKTIME_NEVER);
Jump(STATE_CURRENT, 0x01910044, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910044_DoAutoActions_07(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910044
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;
return TRUE;}ASSERT(FALSE);break;default:{return FALSE;}ASSERT(FALSE);break;
#line 19554 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE;}BOOL CPlayer::H0x01910045_DoAutoActions_08(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910045
Jump(STATE_CURRENT,0x0191006d, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191006e_DoAutoActions_49(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191006e
if(!(GetActionMarker  () -> m_paaAction  == PAA_DRAWWEAPON )){ Jump(STATE_CURRENT,0x0191006c, FALSE, EInternal());return TRUE;}
#line 19566 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESelectWeapon  eSelect ;
#line 19567 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSelect  . iWeapon  = - 4;
#line 19568 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerWeapons  &) * m_penWeapons ) . SendEvent  (eSelect );Jump(STATE_CURRENT,0x0191006b, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191006c_DoAutoActions_47(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191006c
if(!(GetActionMarker  () -> m_paaAction  == PAA_LOOKAROUND )){ Jump(STATE_CURRENT,0x0191006a, FALSE, EInternal());return TRUE;}
#line 19572 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_AutoLookAround, TRUE;
Jump(STATE_CURRENT, 0x01910046, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910046_DoAutoActions_09(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910046
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_AutoLookAround, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x01910047, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910047_DoAutoActions_10(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910047
const EReturn&__e= (EReturn&)__eeInput;
;Jump(STATE_CURRENT,0x01910069, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191006a_DoAutoActions_45(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191006a
if(!(GetActionMarker  () -> m_paaAction  == PAA_USEITEM )){ Jump(STATE_CURRENT,0x01910068, FALSE, EInternal());return TRUE;}
#line 19577 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_AutoUseItem, TRUE;
Jump(STATE_CURRENT, 0x01910048, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910048_DoAutoActions_11(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910048
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_AutoUseItem, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x01910049, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910049_DoAutoActions_12(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910049
const EReturn&__e= (EReturn&)__eeInput;
;Jump(STATE_CURRENT,0x01910067, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910068_DoAutoActions_43(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910068
if(!(GetActionMarker  () -> m_paaAction  == PAA_PICKITEM )){ Jump(STATE_CURRENT,0x01910066, FALSE, EInternal());return TRUE;}
#line 19582 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_AutoPickItem, TRUE;
Jump(STATE_CURRENT, 0x0191004a, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191004a_DoAutoActions_13(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191004a
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_AutoPickItem, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x0191004b, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191004b_DoAutoActions_14(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191004b
const EReturn&__e= (EReturn&)__eeInput;
;Jump(STATE_CURRENT,0x01910065, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910066_DoAutoActions_41(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910066
if(!(GetActionMarker  () -> m_paaAction  == PAA_FALLDOWN )){ Jump(STATE_CURRENT,0x01910064, FALSE, EInternal());return TRUE;}
#line 19587 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_AutoFallDown, TRUE;
Jump(STATE_CURRENT, 0x0191004c, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191004c_DoAutoActions_15(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191004c
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_AutoFallDown, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x0191004d, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191004d_DoAutoActions_16(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191004d
const EReturn&__e= (EReturn&)__eeInput;
;Jump(STATE_CURRENT,0x01910063, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910064_DoAutoActions_39(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910064
if(!(GetActionMarker  () -> m_paaAction  == PAA_RELEASEPLAYER )){ Jump(STATE_CURRENT,0x01910062, FALSE, EInternal());return TRUE;}
#line 19591 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  != NULL ){
#line 19592 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CCamera  *) & * m_penCamera ) -> m_bStopMoving  = TRUE ;
#line 19593 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19594 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = NULL ;
#line 19596 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetPlayerWeapons  () -> m_iCurrentWeapon  == WEAPON_NONE ){
#line 19598 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ESelectWeapon  eSelect ;
#line 19599 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eSelect  . iWeapon  = - 4;
#line 19600 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerWeapons  &) * m_penWeapons ) . SendEvent  (eSelect );
#line 19601 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19604 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmSpiritStart  = 0;Jump(STATE_CURRENT,0x01910061, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910062_DoAutoActions_37(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910062
if(!(GetActionMarker  () -> m_paaAction  == PAA_STARTCOMPUTER )){ Jump(STATE_CURRENT,0x01910060, FALSE, EInternal());return TRUE;}
#line 19609 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsPlayerLocal  (this ) && GetSP  () -> sp_bSinglePlayer ){
#line 19610 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmp_ppenPlayer  = this ;
#line 19611 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmp_bInitialStart  = TRUE ;
#line 19612 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}Jump(STATE_CURRENT,0x0191005f, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910060_DoAutoActions_35(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910060
if(!(GetActionMarker  () -> m_paaAction  == PAA_RUN )){ Jump(STATE_CURRENT,0x0191005e, FALSE, EInternal());return TRUE;}
#line 19634 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fAutoSpeed  = plr_fSpeed  * GetActionMarker  () -> m_fSpeed ;
#line 19635 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_AutoGoToMarker, TRUE;
Jump(STATE_CURRENT, 0x0191004e, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191004e_DoAutoActions_17(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191004e
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_AutoGoToMarker, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x0191004f, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x0191004f_DoAutoActions_18(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191004f
const EReturn&__e= (EReturn&)__eeInput;
;Jump(STATE_CURRENT,0x0191005d, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191005e_DoAutoActions_33(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191005e
if(!(GetActionMarker  () -> m_paaAction  == PAA_RUNANDSTOP )){ Jump(STATE_CURRENT,0x0191005c, FALSE, EInternal());return TRUE;}
#line 19640 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fAutoSpeed  = plr_fSpeed  * GetActionMarker  () -> m_fSpeed ;
#line 19641 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
STATE_CPlayer_AutoGoToMarkerAndStop, TRUE;
Jump(STATE_CURRENT, 0x01910050, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910050_DoAutoActions_19(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910050
switch(__eeInput.ee_slEvent) {case EVENTCODE_EBegin: Call(STATE_CURRENT, STATE_CPlayer_AutoGoToMarkerAndStop, TRUE, EVoid());return TRUE;case EVENTCODE_EReturn: Jump(STATE_CURRENT,0x01910051, FALSE, __eeInput); return TRUE;default: return FALSE; }}BOOL CPlayer::H0x01910051_DoAutoActions_20(const CEntityEvent &__eeInput){
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910051
const EReturn&__e= (EReturn&)__eeInput;
;Jump(STATE_CURRENT,0x0191005b, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191005c_DoAutoActions_31(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191005c
if(!(GetActionMarker  () -> m_paaAction  == PAA_RECORDSTATS )){ Jump(STATE_CURRENT,0x0191005a, FALSE, EInternal());return TRUE;}
#line 19646 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bSinglePlayer  || GetSP  () -> sp_bPlayEntireGame ){
#line 19648 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_tmEstTime  = GetActionMarker  () -> m_tmWait ;
#line 19650 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19651 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetGameEnd  ();
#line 19652 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}Jump(STATE_CURRENT,0x01910059, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191005a_DoAutoActions_29(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191005a
if(!(GetActionMarker  () -> m_paaAction  == PAA_SHOWSTATS )){ Jump(STATE_CURRENT,0x01910058, FALSE, EInternal());return TRUE;}
#line 19656 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(!(cmp_ppenPlayer  == NULL  && _pNetwork  -> IsPlayerLocal  (this ) && GetSP  () -> sp_bSinglePlayer )){ Jump(STATE_CURRENT,0x01910056, FALSE, EInternal());return TRUE;}
#line 19657 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bEndOfLevel  = TRUE ;
#line 19658 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
cmp_ppenPlayer  = this ;
#line 19659 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_DONTRENDER ;
#line 19660 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Jump(STATE_CURRENT,0x01910054, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910054_DoAutoActions_23(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910054
if(!(m_bEndOfLevel )){ Jump(STATE_CURRENT,0x01910055, FALSE, EInternal());return TRUE;}
#line 19661 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(_pTimer  -> TickQuantum );
Jump(STATE_CURRENT, 0x01910052, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910052_DoAutoActions_21(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910052
switch(__eeInput.ee_slEvent){case(EVENTCODE_ETimer):{const ETimer&e= (ETimer&)__eeInput;
UnsetTimer();Jump(STATE_CURRENT,0x01910053, FALSE, EInternal());return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_EPreLevelChange):{const EPreLevelChange&e= (EPreLevelChange&)__eeInput;
return FALSE;}ASSERT(FALSE);break;case(EVENTCODE_EPostLevelChange):{const EPostLevelChange&e= (EPostLevelChange&)__eeInput;

#line 19667 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ()){
#line 19669 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bEndOfLevel  = FALSE ;
#line 19670 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19671 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return FALSE;
#line 19672 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;default:{return TRUE;}ASSERT(FALSE);break;
#line 19674 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE;}BOOL CPlayer::H0x01910053_DoAutoActions_22(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910053
Jump(STATE_CURRENT,0x01910054, FALSE, EInternal());return TRUE;
#line 19675 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}BOOL CPlayer::H0x01910055_DoAutoActions_24(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910055

#line 19676 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ! PLF_DONTRENDER ;Jump(STATE_CURRENT,0x01910056, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910056_DoAutoActions_25(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910056
Jump(STATE_CURRENT,0x01910057, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x01910058_DoAutoActions_27(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910058
if(GetActionMarker  () -> m_paaAction  == PAA_ENDOFGAME ){
#line 19681 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Jump(STATE_CURRENT, STATE_CPlayer_TheEnd, TRUE, EVoid());return TRUE;
#line 19682 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(GetActionMarker  () -> m_paaAction  == PAA_NOGRAVITY ){
#line 19683 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (GetPhysicsFlags  () & ~ (EPF_TRANSLATEDBYGRAVITY  | EPF_ORIENTEDBYGRAVITY ));
#line 19684 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetActionMarker  () -> GetParent  () != NULL )
#line 19685 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19686 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetParent  (GetActionMarker  () -> GetParent  ());
#line 19687 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19688 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else if(GetActionMarker  () -> m_paaAction  == PAA_TURNONGRAVITY ){
#line 19689 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (GetPhysicsFlags  () | EPF_TRANSLATEDBYGRAVITY  | EPF_ORIENTEDBYGRAVITY );
#line 19690 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetParent  (NULL );
#line 19691 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19692 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else if(TRUE ){
#line 19693 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ASSERT  (FALSE );
#line 19694 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}Jump(STATE_CURRENT,0x01910057, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910057_DoAutoActions_26(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910057
Jump(STATE_CURRENT,0x01910059, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910059_DoAutoActions_28(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910059
Jump(STATE_CURRENT,0x0191005b, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x0191005b_DoAutoActions_30(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191005b
Jump(STATE_CURRENT,0x0191005d, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x0191005d_DoAutoActions_32(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191005d
Jump(STATE_CURRENT,0x0191005f, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x0191005f_DoAutoActions_34(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191005f
Jump(STATE_CURRENT,0x01910061, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910061_DoAutoActions_36(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910061
Jump(STATE_CURRENT,0x01910063, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910063_DoAutoActions_38(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910063
Jump(STATE_CURRENT,0x01910065, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910065_DoAutoActions_40(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910065
Jump(STATE_CURRENT,0x01910067, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910067_DoAutoActions_42(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910067
Jump(STATE_CURRENT,0x01910069, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910069_DoAutoActions_44(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910069
Jump(STATE_CURRENT,0x0191006b, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x0191006b_DoAutoActions_46(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191006b
Jump(STATE_CURRENT,0x0191006d, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x0191006d_DoAutoActions_48(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191006d
Jump(STATE_CURRENT,0x0191006f, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x0191006f_DoAutoActions_50(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191006f
Jump(STATE_CURRENT,0x01910071, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910071_DoAutoActions_52(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910071
Jump(STATE_CURRENT,0x01910073, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910073_DoAutoActions_54(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910073
Jump(STATE_CURRENT,0x01910075, FALSE, EInternal());return TRUE;}
BOOL CPlayer::H0x01910075_DoAutoActions_56(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910075

#line 19697 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetActionMarker  () -> m_penTrigger  != NULL  && 
#line 19698 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetActionMarker  () -> m_paaAction  != PAA_PICKITEM ){
#line 19700 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendToTarget  (GetActionMarker  () -> m_penTrigger  , EET_TRIGGER  , this );
#line 19701 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19704 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penActionMarker  = GetActionMarker  () -> m_penTarget ;Jump(STATE_CURRENT,0x01910077, FALSE, EInternal());return TRUE;
#line 19705 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}BOOL CPlayer::H0x01910078_DoAutoActions_59(const CEntityEvent &__eeInput) {
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910078

#line 19708 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_fAutoSpeed  = 0.0f;
#line 19711 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penActionMarker  = NULL ;
#line 19714 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayerAnimator  & plan  = (CPlayerAnimator  &) * m_penAnimator ;
#line 19715 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
plan  . m_bDisableAnimating  = FALSE ;
#line 19718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EVoid  ());
#line 19718 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};BOOL CPlayer::
#line 19723 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CPlayer_Main
  ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EPlayerInit, "CPlayer::Main expects 'EPlayerInit' as input!");  const EPlayerInit &ePLInit = (const EPlayerInit &)__eeInput;
#line 19725 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pNetwork  -> MyCharacterInfo  . statusEffect  . SetType  (CStatusEffect  :: T_PLAYER );
#line 19727 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
time  (& m_iStartTime );
#line 19729 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOn  (ENF_CLIENTHANDLING );
#line 19731 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bInitializeOverNet  = FALSE ;
#line 19732 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ctUnreadMessages  = 0;
#line 19733 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlags  (GetFlags  () | ENF_CROSSESLEVELS  | ENF_NOTIFYLEVELCHANGE );
#line 19736 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAttackingEnemy  = NULL ;
#line 19739 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl )
#line 19740 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19741 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
InitAsEditorModel  ();
#line 19742 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19743 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19744 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19745 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
InitAsSkaEditorModel  ();
#line 19746 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19748 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (EPF_MOVABLE );
#line 19749 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPhysicsFlags  (GetPhysicsFlags  () & ~ EPF_TRANSLATEDBYGRAVITY );
#line 19752 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CTString strDummy ;
#line 19754 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl )
#line 19755 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19756 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlayerAppearance  (GetModelObject  () , NULL  , strDummy  , FALSE );
#line 19757 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19758 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19759 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19760 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(en_pmiModelInstance  == NULL )
#line 19761 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19762 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_pmiModelInstance  = CreateModelInstance  ("");
#line 19763 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19764 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlayerAppearanceSka  (GetModelInstance  () , NULL  , strDummy  , FALSE  , en_pcCharacter  . pc_iPlayerType );
#line 19765 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19769 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ValidateCharacter  ();
#line 19771 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_bMdl )
#line 19772 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19773 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlayerAppearance  (& m_moRender  , & en_pcCharacter  , strDummy  , FALSE );
#line 19774 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19775 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19776 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19777 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CreateAnimAndBoneIDs  ();
#line 19780 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetPlayerAppearanceSka  (& m_miRender  , & en_pcCharacter  , strDummy  , FALSE );
#line 19781 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19783 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ParseGender  (strDummy );
#line 19784 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetFlagOn  (ENF_RENDERREFLECTION );
#line 19800 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ModelChangeNotify  ();
#line 19803 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iWeaponsID  = ePLInit  . ulWeaponsID ;
#line 19804 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ePLInit  . bCreate ){
#line 19805 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penWeapons  = CreateEntity  (GetPlacement  () , CLASS_PLAYER_WEAPONS  , ePLInit  . ulWeaponsID  , FALSE );
#line 19806 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19807 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penWeapons  = _pNetwork  -> ga_World  . EntityFromID  (m_iWeaponsID );
#line 19808 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19809 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EWeaponsInit  eInitWeapons ;
#line 19810 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInitWeapons  . eidOwner  = this ;
#line 19811 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penWeapons  -> Initialize  (eInitWeapons  , FALSE );
#line 19813 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_iAnimatorID  = ePLInit  . ulAnimatorID ;
#line 19815 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(ePLInit  . bCreate ){
#line 19816 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAnimator  = CreateEntity  (GetPlacement  () , CLASS_PLAYER_ANIMATOR  , ePLInit  . ulAnimatorID  , FALSE );
#line 19817 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19818 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAnimator  = _pNetwork  -> ga_World  . EntityFromID  (m_iAnimatorID );
#line 19819 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19820 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EAnimatorInit  eInitAnimator ;
#line 19821 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eInitAnimator  . eidPlayer  = this ;
#line 19822 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAnimator  -> Initialize  (eInitAnimator  , FALSE );
#line 19825 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_cmiComm  . IsNetworkOn  ())
#line 19826 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19827 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pInput  -> m_bTcpIp  = TRUE ;
#line 19828 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19830 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(!(_pNetwork  -> IsServer  ())){ Jump(STATE_CURRENT,0x0191007b, FALSE, EInternal());return TRUE;}
#line 19832 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAfter(0.2f);
Jump(STATE_CURRENT, 0x01910079, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x01910079_Main_01(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x01910079
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;
return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_ETimer):{const ETimer&e= (ETimer&)__eeInput;
UnsetTimer();Jump(STATE_CURRENT,0x0191007a, FALSE, EInternal());return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_EDisconnected):{const EDisconnected&e= (EDisconnected&)__eeInput;

#line 19836 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Destroy  ();
#line 19837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EVoid());
#line 19837 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19838 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;default:{return TRUE;}ASSERT(FALSE);break;
#line 19840 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE;}BOOL CPlayer::H0x0191007a_Main_02(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191007a
Jump(STATE_CURRENT,0x0191007b, FALSE, EInternal());return TRUE;}BOOL CPlayer::H0x0191007b_Main_03(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191007b

#line 19844 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SwitchToModel  ();
#line 19845 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_INITIALIZED ;
#line 19847 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Particles_RunningDust_Prepare  (this );
#line 19850 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_tmMaxHoldBreath  = 60.0f;
#line 19851 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
en_fDensity  = 1000.0f;
#line 19852 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetHealth  (10000.0f);
#line 19853 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ModelChangeNotify  ();
#line 19856 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetModelInstance  ())
#line 19857 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19858 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CSkaTag  tag ;
#line 19859 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__ROOT");
#line 19860 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 19861 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 19862 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetName  ("__TOP");
#line 19863 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetRot  (GetEulerAngleFromQuaternion  (en_pmiModelInstance  -> mi_qvOffset  . qRot ));
#line 19864 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
FLOATaabbox3D aabb ;
#line 19865 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> GetAllFramesBBox  (aabb );
#line 19866 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
tag  . SetOffsetPos  (0 , aabb  . Size  () (2) * GetModelInstance  () -> mi_vStretch  (2) , 0);
#line 19867 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
GetModelInstance  () -> m_tmSkaTagManager  . Register  (& tag );
#line 19868 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19872 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soMouth  . Set3DParameters  (50.0f , 10.0f , 1.0f , 1.0f);
#line 19873 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soFootL  . Set3DParameters  (20.0f , 2.0f , 1.0f , 1.0f);
#line 19874 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soFootR  . Set3DParameters  (20.0f , 2.0f , 1.0f , 1.0f);
#line 19875 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soBody  . Set3DParameters  (25.0f , 5.0f , 1.0f , 1.0f);
#line 19876 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_soMessage  . Set3DParameters  (30.0f , 5.0f , 1.0f , 1.0f);
#line 19885 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
try {
#line 19886 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_aoLightAnimation  . SetData_t  (CTFILENAME  ("Data\\Animations\\BasicEffects.ani"));
#line 19887 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}catch  (char  * strError ){
#line 19888 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
WarningMessage  (TRANS  ("Cannot load Data\\Animations\\BasicEffects.ani: %s") , strError );
#line 19889 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19890 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
PlayLightAnim  (LIGHT_ANIM_NONE  , 0);
#line 19892 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetTimerAt(THINKTIME_NEVER);
Jump(STATE_CURRENT, 0x0191007c, FALSE, EBegin());return TRUE;}BOOL CPlayer::H0x0191007c_Main_04(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191007c
switch(__eeInput.ee_slEvent){case(EVENTCODE_EBegin):{const EBegin&e= (EBegin&)__eeInput;
Call(STATE_CURRENT, STATE_CPlayer_FirstInit, TRUE, EVoid());return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_ERebirth):{const ERebirth&e= (ERebirth&)__eeInput;

#line 19895 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ()){
#line 19896 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerRebirth  epr ;
#line 19897 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epr  . iRespawnInPlace  = m_ulFlags  & PLF_RESPAWNINPLACE ;
#line 19898 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (epr  , TRUE );
#line 19899 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Call(STATE_CURRENT, STATE_CPlayer_Rebirth, TRUE, EVoid());return TRUE;
#line 19900 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19901 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19902 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EPlayerRebirth):{const EPlayerRebirth&epr= (EPlayerRebirth&)__eeInput;

#line 19904 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pNetwork  -> IsServer  ()){
#line 19905 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(epr  . iRespawnInPlace ){
#line 19906 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_RESPAWNINPLACE ;
#line 19907 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}else {
#line 19908 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_RESPAWNINPLACE ;
#line 19909 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19911 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Call(STATE_CURRENT, STATE_CPlayer_Rebirth, TRUE, EVoid());return TRUE;
#line 19912 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19913 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19914 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EDeath):{const EDeath&eDeath= (EDeath&)__eeInput;

#line 19916 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . hp  <= 0)
#line 19917 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19918 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ()){
#line 19919 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerDeath  ePLDeath ;
#line 19920 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLDeath  . eidInflictor  = (CEntity  *) eDeath  . eLastDamage  . penInflictor ;
#line 19921 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLDeath  . vDirection  = eDeath  . eLastDamage  . vDirection ;
#line 19922 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLDeath  . vHitPoint  = eDeath  . eLastDamage  . vHitPoint ;
#line 19923 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLDeath  . fAmount  = eDeath  . eLastDamage  . fAmount ;
#line 19924 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
ePLDeath  . dmtType  = eDeath  . eLastDamage  . dmtType ;
#line 19925 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (ePLDeath  , TRUE );
#line 19926 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Call(STATE_CURRENT, STATE_CPlayer_Death, TRUE, ePLDeath );return TRUE;
#line 19927 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19928 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19929 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19930 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EPlayerDeath):{const EPlayerDeath&ePLDeath= (EPlayerDeath&)__eeInput;

#line 19932 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> MyCharacterInfo  . hp  <= 0)
#line 19933 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19935 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Call(STATE_CURRENT, STATE_CPlayer_Death, TRUE, ePLDeath );return TRUE;
#line 19937 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19938 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19940 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EDamage):{const EDamage&eDamage= (EDamage&)__eeInput;
Call(STATE_CURRENT, STATE_CPlayer_Wounded, TRUE, eDamage );return TRUE;}ASSERT(FALSE);break;case(EVENTCODE_EPreLevelChange):
#line 19943 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const EPreLevelChange&e= (EPreLevelChange&)__eeInput;

#line 19944 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_INITIALIZED ;
#line 19945 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_CHANGINGLEVEL ;
#line 19946 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  &= ~ PLF_LEVELSTARTED ;
#line 19947 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_ulFlags  |= PLF_DONTRENDER ;
#line 19948 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
LevelChangePlayerClear  ();
#line 19949 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19950 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EPostLevelChange):
#line 19952 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const EPostLevelChange&e= (EPostLevelChange&)__eeInput;

#line 19953 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(GetSP  () -> sp_bSinglePlayer  || (GetFlags  () & ENF_ALIVE ))
#line 19954 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19955 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Call(STATE_CURRENT, STATE_CPlayer_WorldChange, TRUE, EVoid());return TRUE;
#line 19956 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19957 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 19958 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19959 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Call(STATE_CURRENT, STATE_CPlayer_WorldChangeDead, TRUE, EVoid());return TRUE;
#line 19960 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19961 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_ECameraStart):
#line 19963 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const ECameraStart&eStart= (ECameraStart&)__eeInput;

#line 19964 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_bDontLerpView  = TRUE ;
#line 19965 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = eStart  . penCamera ;
#line 19969 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _bLoginProcess )
#line 19970 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19972 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CancelSkill  (TRUE  , g_iAutoAttack  , FALSE );
#line 19973 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopAttack  ();
#line 19974 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
StopMove  ();
#line 19976 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pUIMgr  -> IsVisibleUIs  ())
#line 19977 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19978 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ToggleVisibleUIs  ();
#line 19979 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19980 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19983 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EStopLerp  eStop ;
#line 19984 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eStop  . bActive  = FALSE ;
#line 19985 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  -> SendEvent  (eStop  , TRUE );
#line 19988 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penActionMarker  == NULL )
#line 19989 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 19990 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredTranslation  (FLOAT3D (0.0f , 0.0f , 0.0f));
#line 19991 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SetDesiredRotation  (ANGLE3D (0.0f , 0.0f , 0.0f));
#line 19992 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 19994 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
((CPlayerWeapons  &) * m_penWeapons ) . SendEvent  (EReleaseWeapon  ());
#line 19995 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 19996 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_ECameraStop):
#line 19998 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const ECameraStop&eCameraStop= (ECameraStop&)__eeInput;

#line 20000 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
extern  BOOL _bWorldEditorApp ;
#line 20001 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_bLoginProcess  && ! _bWorldEditorApp )
#line 20002 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 20003 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EStopLerp  eStop ;
#line 20004 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
eStop  . bActive  = TRUE ;
#line 20005 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  -> SendEvent  (eStop  , TRUE );
#line 20006 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  == eCameraStop  . penCamera )
#line 20007 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 20009 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20010 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20011 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
else 
#line 20013 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 20014 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penCamera  == eCameraStop  . penCamera )
#line 20015 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 20016 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(! _pUIMgr  -> IsVisibleUIs  () && ! _bWorldEditorApp )
#line 20017 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{
#line 20018 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
_pUIMgr  -> ToggleVisibleUIs  ();
#line 20019 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20020 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penCamera  = NULL ;
#line 20021 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20022 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20023 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 20024 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EVoiceMessage):
#line 20044 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const EVoiceMessage&eMsg= (EVoiceMessage&)__eeInput;

#line 20045 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SayVoiceMessage  (eMsg  . fnmMessage );
#line 20046 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 20047 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EKilledEnemy):{const EKilledEnemy&eke= (EKilledEnemy&)__eeInput;

#line 20049 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(_pNetwork  -> IsServer  ()){
#line 20050 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
EPlayerKilledEnemy  epke ;
#line 20051 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epke  . eidEnemy  = eke  . penEnemy ;
#line 20052 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epke  . iScore  = eke  . iScore ;
#line 20053 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epke  . eCauseOfDeath  = eke  . eCauseOfDeath ;
#line 20054 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
epke  . eKillType  = eke  . eKillType ;
#line 20055 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SendEvent  (epke  , TRUE );
#line 20056 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20057 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 20058 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EPlayerKilledEnemy):
#line 20060 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const EPlayerKilledEnemy&epke= (EPlayerKilledEnemy&)__eeInput;

#line 20061 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psLevelStats  . ps_iKills  += 1;
#line 20062 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_psGameStats  . ps_iKills  += 1;
#line 20063 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 20064 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EWeaponChanged):
#line 20066 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const EWeaponChanged&e= (EWeaponChanged&)__eeInput;

#line 20075 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 20076 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_EDisconnected):{const EDisconnected&e= (EDisconnected&)__eeInput;

#line 20087 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
UnsetTimer();Jump(STATE_CURRENT,0x0191007d, FALSE, EInternal());return TRUE;
#line 20088 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;case(EVENTCODE_ETouch):
#line 20091 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
{const ETouch&eTouch= (ETouch&)__eeInput;

#line 20102 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE;
#line 20103 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}ASSERT(FALSE);break;default: return FALSE; break;
#line 20104 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}return TRUE;}BOOL CPlayer::H0x0191007d_Main_05(const CEntityEvent &__eeInput){
ASSERT(__eeInput.ee_slEvent==EVENTCODE_EInternal);
#undef STATE_CURRENT
#define STATE_CURRENT 0x0191007d

#line 20109 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_ulKeys  != 0){
#line 20111 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * penNextPlayer  = NULL ;
#line 20112 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
for(INDEX iPlayer  = 0;iPlayer  < GetMaxPlayers  ();iPlayer  ++){
#line 20113 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPlayer  * pen  = (CPlayer  *) & * GetPlayerEntity  (iPlayer );
#line 20114 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(pen  != NULL  && pen  != this  && (pen  -> GetFlags  () & ENF_ALIVE ) && ! (pen  -> GetFlags  () & ENF_DELETED )){
#line 20115 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penNextPlayer  = pen ;
#line 20116 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20117 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20120 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(penNextPlayer  != NULL ){
#line 20122 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
CPrintF  (TRANS  ("%s leaving, all keys transfered to %s\n") , 
#line 20123 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
(const char  *) m_strName  , (const char  *) penNextPlayer  -> GetPlayerName  ());
#line 20124 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
penNextPlayer  -> m_ulKeys  |= m_ulKeys ;
#line 20125 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20126 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20129 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
SpawnTeleport  ();
#line 20132 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penWeapons  -> Destroy  (FALSE );
#line 20133 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penAnimator  -> Destroy  (FALSE );
#line 20134 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_penView  != NULL ){
#line 20135 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_penView  -> Destroy  (FALSE );
#line 20136 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20137 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
if(m_pen3rdPersonView  != NULL ){
#line 20138 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
m_pen3rdPersonView  -> Destroy  (FALSE );
#line 20139 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
}
#line 20140 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Destroy  (FALSE );
#line 20141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
Return(STATE_CURRENT,EVoid());
#line 20141 "E:/질산/Korea/Client_USA/EntitiesMP/Player.es"
return TRUE; ASSERT(FALSE); return TRUE;};