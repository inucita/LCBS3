/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 2 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"

#include "StdH.h"

#include <ModelDestruction.h>
#include <ModelDestruction_tables.h>
CEntityEvent *ERangeModelDestruction::MakeCopy(void) { 	CEntityEvent *peeCopy = new ERangeModelDestruction(*this); 	return peeCopy;}
SLONG ERangeModelDestruction::GetSizeOf(void) { 	return sizeof(*this);}
ERangeModelDestruction::ERangeModelDestruction() : CEntityEvent(EVENTCODE_ERangeModelDestruction) {
}
BOOL ERangeModelDestruction::CheckIDs(void) {	return TRUE ; }

CEntityEvent *EModelDeath::MakeCopy(void) { 	CEntityEvent *peeCopy = new EModelDeath(*this); 	return peeCopy;}
SLONG EModelDeath::GetSizeOf(void) { 	return sizeof(*this);}
EModelDeath::EModelDeath() : CEntityEvent(EVENTCODE_EModelDeath) {
}
BOOL EModelDeath::CheckIDs(void) {	return TRUE ; }

void CModelDestruction::SetDefaultProperties(void) {
	m_strName = "ModelDestruction";
	m_strDescription = "";
	m_penModel0 = NULL;
	m_penModel1 = NULL;
	m_penModel2 = NULL;
	m_penModel3 = NULL;
	m_penModel4 = NULL;
	m_fHealth = 50.0f;
	m_ddtDebris = DDT_STONE ;
	m_ctDebris = 3;
	m_fDebrisSize = 1.0f;
	m_eibtBodyType = EIBT_ROCK ;
	m_sptType = SPT_NONE ;
	m_fParticleSize = 1.0f;
	m_bRequireExplosion = FALSE ;
	m_fDebrisLaunchPower = 1.0f;
	m_dptParticles = DPT_NONE ;
	m_betStain = BET_NONE ;
	m_fLaunchCone = 45.0f;
	m_fRndRotH = 720.0f;
	m_fRndRotP = 720.0f;
	m_fRndRotB = 720.0f;
	m_fParticleLaunchPower = 1.0f;
	m_colParticles = COLOR(C_WHITE  | CT_OPAQUE );
	m_iStartAnim = -1;
	m_bDebrisImmaterialASAP = TRUE ;
	m_strStartAnim = "";
	m_ctDustFall = 1;
	m_fMinDustFallHeightRatio = 0.1f;
	m_fMaxDustFallHeightRatio = 0.6f;
	m_fDustStretch = 1.0f;
	m_fDebrisDustRandom = 0.25f;
	m_fDebrisDustStretch = 1.0f;
	m_penShake = NULL;
	CEntity::SetDefaultProperties();
}

#line 99 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
void CModelDestruction::Precache(void) {
#line 100 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheClass  (CLASS_BASIC_EFFECT  , BET_EXPLOSIONSTAIN );
#line 101 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheClass  (CLASS_SOUND_HOLDER );
#line 102 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheSound  (SOUND_DESTRUCTION_STONE );
#line 103 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheSound  (SOUND_DESTRUCTION_WOOD );
#line 104 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheSound  (SOUND_DESTRUCTION_PALM );
#line 106 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
switch(m_ddtDebris ){
#line 107 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_STONE : {
#line 108 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheModel  (MODEL_STONE );
#line 109 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheTexture  (TEXTURE_STONE );
#line 110 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}break ;
#line 111 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_WOOD : {
#line 112 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheModel  (MODEL_WOOD );
#line 113 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheTexture  (TEXTURE_WOOD );
#line 114 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}break ;
#line 115 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_PALM : {
#line 116 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheModel  (MODEL_WOOD );
#line 117 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
PrecacheTexture  (TEXTURE_WOOD );
#line 118 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}break ;
#line 119 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 120 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 123 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CAnimData * CModelDestruction::GetAnimData(SLONG slPropertyOffset) 
#line 124 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 125 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(IsOfClass  (GetModel  (0) , "CModelHolder2")){
#line 126 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(slPropertyOffset  == offsetof  (CModelDestruction  , m_iStartAnim )){
#line 127 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CModelHolder2  * pmh  = (CModelHolder2  *) GetModel  (0);
#line 128 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(pmh  != NULL ){
#line 130 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return pmh  -> GetModelObject  () -> GetData  ();
#line 131 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 132 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 133 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 134 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return CEntity  :: GetAnimData  (slPropertyOffset );
#line 135 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 137 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
const CTString & CModelDestruction::GetDescription(void)const {
#line 138 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
INDEX ct  = GetModelsCount  ();
#line 139 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(ct  == 0){
#line 140 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
((CTString &) m_strDescription ) . PrintF  ("(%g): no more" , m_fHealth );
#line 141 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}else if(ct  == 1){
#line 142 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
((CTString &) m_strDescription ) . PrintF  ("(%g): %s" , m_fHealth  , m_penModel0  -> GetName  ());
#line 143 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}else if(TRUE ){
#line 144 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
((CTString &) m_strDescription ) . PrintF  ("(%g): %s,...(%d)" , m_fHealth  , m_penModel0  -> GetName  () , ct );
#line 145 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 146 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return m_strDescription ;
#line 147 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 150 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
void CModelDestruction::CheckOneModelTarget(CEntityPointer & pen) 
#line 151 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 152 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(pen  != NULL  && ! IsOfClass  (pen  , "ModelHolder2")){
#line 153 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
WarningMessage  ("Model '%s' is not ModelHolder2!" , pen  -> GetName  ());
#line 154 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
pen  = NULL ;
#line 155 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 156 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 159 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CEntity * CModelDestruction::GetNextPhase(void) 
#line 160 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 161 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
INDEX ct  = GetModelsCount  ();
#line 163 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(ct  == 0){
#line 165 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return NULL ;
#line 167 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}else {
#line 169 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return GetModel  (IRnd  () % ct );
#line 170 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 171 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 174 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
INDEX CModelDestruction::GetModelsCount(void)const 
#line 175 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 177 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(m_penModel0  == NULL ){return 0;};
#line 178 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(m_penModel1  == NULL ){return 1;};
#line 179 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(m_penModel2  == NULL ){return 2;};
#line 180 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(m_penModel3  == NULL ){return 3;};
#line 181 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(m_penModel4  == NULL ){return 4;};
#line 182 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return 5;
#line 183 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 185 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CEntity * CModelDestruction::GetModel(INDEX iModel) 
#line 186 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 187 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ASSERT  (iModel  <= GetModelsCount  ());
#line 188 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
iModel  = Clamp  (iModel  , INDEX (0) , GetModelsCount  ());
#line 189 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return (CModelHolder2  *) & * (& m_penModel0 ) [ iModel  ];
#line 190 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 192 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
void CModelDestruction::SpawnSoundHolder(DestructionDebrisType ddtDebris,CPlacement3D plModel) 
#line 193 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 194 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CTFileName fnSound ;
#line 195 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(ddtDebris  == DDT_CHILDREN_CUSTOM ){
#line 196 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return ;
#line 197 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 198 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
switch(ddtDebris ){
#line 199 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_STONE : 
#line 200 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
fnSound  = CTString ("Data\\Sounds\\Default.wav");
#line 201 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
break ;
#line 202 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_WOOD : 
#line 203 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
fnSound  = CTString ("Data\\Sounds\\Default.wav");
#line 204 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
break ;
#line 205 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_PALM : 
#line 206 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
fnSound  = CTString ("Data\\Sounds\\Default.wav");
#line 207 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
break ;
#line 208 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
default  :{
#line 209 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return ;}
#line 210 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
break ;
#line 211 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 213 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CEntityPointer penNew  = CreateEntity  (plModel  , CLASS_SOUND_HOLDER  , WLD_AUTO_ENTITY_ID  , FALSE );
#line 214 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CSoundHolder  * penSoundH  = (CSoundHolder  *) & * penNew ;
#line 215 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penSoundH  -> Initialize  (EVoid  () , FALSE );
#line 216 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penSoundH  -> m_fnSound  = fnSound ;
#line 217 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penSoundH  -> m_rFallOffRange  = 50.0f;
#line 218 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penSoundH  -> m_rHotSpotRange  = 10.0f;
#line 219 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penSoundH  -> m_fVolume  = 1.0f;
#line 220 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penSoundH  -> m_fPitch  = 0.9f + 0.2f * FRnd  ();
#line 221 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penSoundH  -> SendEvent  (EPlaySoundOnce  ());
#line 222 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}

#line 225 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
void CModelDestruction::SpawnDebris(CEntity * penDestroyed) 
#line 226 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 227 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOATaabbox3D box ;
#line 228 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penDestroyed  -> GetBoundingBox  (box );
#line 229 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fEntitySize  = box  . Size  () . MaxNorm  ();
#line 230 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
switch(m_ddtDebris ){
#line 231 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_STONE : {
#line 232 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Begin  (EIBT_ROCK  , DPT_NONE  , BET_NONE  , fEntitySize  , FLOAT3D (0 , 0 , 0) , FLOAT3D (0 , 0 , 0) , 1.0f , 0.0f);
#line 233 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
for(INDEX iDebris  = 0;iDebris  < m_ctDebris ;iDebris  ++){
#line 234 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_STONE  , TEXTURE_STONE  , 0 , 0 , 0 , IRnd  () % 4 , m_fDebrisSize  , 
#line 235 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (FRnd  () * 0.8f + 0.1f , FRnd  () * 0.8f + 0.1f , FRnd  () * 0.8f + 0.1f));
#line 236 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 237 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}break ;
#line 238 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_WOOD : 
#line 239 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 240 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Begin  (EIBT_WOOD  , DPT_NONE  , BET_NONE  , fEntitySize  , FLOAT3D (0 , 0 , 0) , FLOAT3D (0 , 0 , 0) , 1.0f , 0.0f);
#line 241 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
for(INDEX iDebris  = 0;iDebris  < m_ctDebris ;iDebris  ++)
#line 242 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 243 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 0 , m_fDebrisSize  , 
#line 244 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.5f , 0.5f));
#line 245 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 246 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
break ;
#line 247 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 248 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_CHILDREN_CUSTOM : 
#line 249 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 250 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Begin  (EIBT_WOOD  , DPT_NONE  , BET_NONE  , 1.0f , FLOAT3D (10 , 10 , 10) , FLOAT3D (0 , 0 , 0) , 5.0f , 2.0f);
#line 252 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
BOOL bValidModel  = TRUE ;
#line 253 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
BOOL bMH2  = TRUE ;
#line 254 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D vOldStretch ;
#line 255 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(IsOfClass  (penDestroyed  , "ModelHolder2")){
#line 256 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(((CModelHolder2  *) penDestroyed ) -> GetModelObject  () == NULL ){
#line 257 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
bValidModel  = FALSE ;
#line 258 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 259 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  = penDestroyed  -> GetModelObject  () -> mo_Stretch ;
#line 260 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}else {
#line 261 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(((CModelHolder3  *) penDestroyed ) -> GetModelInstance  () == NULL ){
#line 262 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
bValidModel  = FALSE ;
#line 263 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 264 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  = penDestroyed  -> GetModelInstance  () -> mi_vStretch ;
#line 265 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
bMH2  = FALSE ;
#line 266 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 269 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FOREACHINLIST  (CEntity  , en_lnInParent  , en_lhChildren  , iten )
#line 270 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 271 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(IsOfClass  (& * iten  , & CModelHolder2_DLLClass )){
#line 272 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CModelHolder2  & mhTemplate  = (CModelHolder2  &) * iten ;
#line 273 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(mhTemplate  . GetModelObject  () == NULL  || ! bValidModel ){
#line 274 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
continue ;
#line 275 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 276 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CModelObject & moNew  = * mhTemplate  . GetModelObject  ();
#line 277 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CPlacement3D plRel  = mhTemplate  . GetPlacement  ();
#line 278 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plRel  . AbsoluteToRelative  (this  -> GetPlacement  ());
#line 279 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CPlacement3D plLaunch  = plRel ;
#line 280 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . pl_PositionVector  (1) = plLaunch  . pl_PositionVector  (1) * vOldStretch  (1);
#line 281 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . pl_PositionVector  (2) = plLaunch  . pl_PositionVector  (2) * vOldStretch  (2);
#line 282 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . pl_PositionVector  (3) = plLaunch  . pl_PositionVector  (3) * vOldStretch  (3);
#line 283 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . RelativeToAbsolute  (penDestroyed  -> GetPlacement  ());
#line 285 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ANGLE3D angLaunch  = ANGLE3D (FRnd  () * 360.0f , 90.0f + m_fLaunchCone  * (FRnd  () - 0.5f) , 0);
#line 286 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D vLaunchDir ;
#line 287 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D vStretchTemplate  = FLOAT3D (
#line 288 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  (1) * moNew  . mo_Stretch  (1) , 
#line 289 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  (2) * moNew  . mo_Stretch  (2) , 
#line 290 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  (3) * moNew  . mo_Stretch  (3));
#line 291 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
AnglesToDirectionVector  (angLaunch  , vLaunchDir );
#line 292 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vLaunchDir  . Normalize  ();
#line 293 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vLaunchDir  = vLaunchDir  * m_fDebrisLaunchPower ;
#line 294 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ANGLE3D angRotSpeed  = ANGLE3D (m_fRndRotH  * 2.0f * (FRnd  () - 0.5f) , m_fRndRotP  * (FRnd  () - 0.5f) , m_fRndRotB  * (FRnd  () - 0.5f));
#line 296 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fDustSize  = 0.0f;
#line 297 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(FRnd  () < m_fDebrisDustRandom ){
#line 298 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
fDustSize  = m_fDebrisDustStretch ;
#line 299 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 301 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(bMH2 ){
#line 302 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn_MH2Template_FromMH2  (m_eibtBodyType  , m_dptParticles  , m_betStain  , 
#line 303 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
(CModelHolder2  *) penDestroyed  , this  , & mhTemplate  , vStretchTemplate  , 
#line 304 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
mhTemplate  . m_fStretchAll  , plLaunch  , vLaunchDir  , angRotSpeed  , 
#line 305 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
m_bDebrisImmaterialASAP  , fDustSize  , ((CModelHolder2  *) penDestroyed ) -> m_colBurning );
#line 306 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}else {
#line 307 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn_MH2Template_FromMH3  (m_eibtBodyType  , m_dptParticles  , m_betStain  , 
#line 308 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
(CModelHolder3  *) penDestroyed  , this  , & mhTemplate  , vStretchTemplate  , 
#line 309 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
mhTemplate  . m_fStretchAll  , plLaunch  , vLaunchDir  , angRotSpeed  , 
#line 310 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
m_bDebrisImmaterialASAP  , fDustSize  , ((CModelHolder3  *) penDestroyed ) -> m_colBurning );
#line 311 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 312 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 313 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(IsOfClass  (& * iten  , & CModelHolder3_DLLClass ))
#line 314 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 317 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CModelHolder3  & mhTemplate  = (CModelHolder3  &) * iten ;
#line 318 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(mhTemplate  . GetModelInstance  () == NULL  || ! bValidModel )
#line 319 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 320 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
continue ;
#line 321 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 322 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CModelInstance & miNew  = * mhTemplate  . GetModelInstance  ();
#line 323 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CPlacement3D plRel  = mhTemplate  . GetPlacement  ();
#line 325 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plRel  . AbsoluteToRelative  (this  -> GetPlacement  ());
#line 326 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CPlacement3D plLaunch  = plRel ;
#line 327 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . pl_PositionVector  (1) = plLaunch  . pl_PositionVector  (1) * vOldStretch  (1);
#line 328 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . pl_PositionVector  (2) = plLaunch  . pl_PositionVector  (2) * vOldStretch  (2);
#line 329 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . pl_PositionVector  (3) = plLaunch  . pl_PositionVector  (3) * vOldStretch  (3);
#line 330 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plLaunch  . RelativeToAbsolute  (penDestroyed  -> GetPlacement  ());
#line 331 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ANGLE3D angLaunch  = ANGLE3D (FRnd  () * 360.0f , 90.0f + m_fLaunchCone  * (FRnd  () - 0.5f) , 0);
#line 332 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D vLaunchDir ;
#line 333 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D vStretchTemplate  = FLOAT3D (
#line 334 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  (1) * miNew  . mi_vStretch  (1) , 
#line 335 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  (2) * miNew  . mi_vStretch  (2) , 
#line 336 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vOldStretch  (3) * miNew  . mi_vStretch  (3));
#line 337 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
AnglesToDirectionVector  (angLaunch  , vLaunchDir );
#line 338 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vLaunchDir  . Normalize  ();
#line 339 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vLaunchDir  = vLaunchDir  * m_fDebrisLaunchPower ;
#line 340 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ANGLE3D angRotSpeed  = ANGLE3D (m_fRndRotH  * 2.0f * (FRnd  () - 0.5f) , m_fRndRotP  * (FRnd  () - 0.5f) , m_fRndRotB  * (FRnd  () - 0.5f));
#line 342 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fDustSize  = 0.0f;
#line 343 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(FRnd  () < m_fDebrisDustRandom )
#line 344 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 345 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
fDustSize  = m_fDebrisDustStretch ;
#line 346 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 348 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(bMH2 ){
#line 349 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn_MH3Template_FromMH2  (m_eibtBodyType  , m_dptParticles  , m_betStain  , 
#line 350 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
(CModelHolder2  *) penDestroyed  , 
#line 351 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
this  , & mhTemplate  , vStretchTemplate  , 
#line 352 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
mhTemplate  . m_fStretchAll  , plLaunch  , 
#line 353 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vLaunchDir  , angRotSpeed  , m_bDebrisImmaterialASAP  , 
#line 354 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
fDustSize  , ((CModelHolder3  *) penDestroyed ) -> m_colBurning );
#line 355 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}else {
#line 356 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn_MH3Template_FromMH3  (m_eibtBodyType  , m_dptParticles  , m_betStain  , 
#line 357 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
(CModelHolder3  *) penDestroyed  , 
#line 358 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
this  , & mhTemplate  , vStretchTemplate  , 
#line 359 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
mhTemplate  . m_fStretchAll  , plLaunch  , 
#line 360 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vLaunchDir  , angRotSpeed  , m_bDebrisImmaterialASAP  , 
#line 361 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
fDustSize  , ((CModelHolder3  *) penDestroyed ) -> m_colBurning );
#line 362 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 363 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 364 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(IsOfClass  (& * iten  , & CSoundHolder_DLLClass ))
#line 365 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 366 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CSoundHolder  & ensh  = (CSoundHolder  &) * iten ;
#line 368 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CEntity  * penNewSH  = GetWorld  () -> CopyEntityInWorld  (ensh  , penDestroyed  -> GetPlacement  () , TRUE  , WLD_AUTO_ENTITY_ID  , FALSE );
#line 369 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penNewSH  -> SetParent  (NULL );
#line 370 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penNewSH  -> SendEvent  (EPlaySoundOnce  ());
#line 371 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 372 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 373 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
break ;
#line 374 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 375 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
case DDT_PALM : {
#line 376 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D vDamage  = FLOAT3D (0.0f , 0.0f , 0.0f);
#line 377 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(IsOfClass  (penDestroyed  , "ModelHolder2")){
#line 378 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vDamage  = ((CModelHolder2  *) penDestroyed ) -> m_vDamage ;
#line 379 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}else {
#line 380 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
vDamage  = ((CModelHolder3  *) penDestroyed ) -> m_vDamage ;
#line 381 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 382 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Begin  (EIBT_WOOD  , DPT_NONE  , BET_NONE  , fEntitySize  , vDamage  * 0.3f , FLOAT3D (0 , 0 , 0) , 1.0f , 0.0f);
#line 383 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 0 , m_fDebrisSize  , 
#line 384 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.2f , 0.5f));
#line 385 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 1 , m_fDebrisSize  , 
#line 386 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.3f , 0.5f));
#line 387 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 2 , m_fDebrisSize  , 
#line 388 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.4f , 0.5f));
#line 389 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 3 , m_fDebrisSize  , 
#line 390 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.5f , 0.5f));
#line 391 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 1 , m_fDebrisSize  , 
#line 392 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.6f , 0.5f));
#line 393 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 2 , m_fDebrisSize  , 
#line 394 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.8f , 0.5f));
#line 395 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Debris_Spawn  (penDestroyed  , this  , MODEL_WOOD  , TEXTURE_WOOD  , 0 , 0 , 0 , 1 , m_fDebrisSize  , 
#line 396 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT3D (0.5f , 0.9f , 0.5f));
#line 397 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 398 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
break ;
#line 399 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
default  :{}break ;
#line 400 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
};
#line 402 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
SpawnSoundHolder  (m_ddtDebris  , penDestroyed  -> GetPlacement  ());
#line 404 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
if(m_ctDustFall  > 0)
#line 405 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 406 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fHeight  = box  . Size  () (2);
#line 407 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fMinHeight  = fHeight  * m_fMinDustFallHeightRatio ;
#line 408 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fMaxHeight  = fHeight  * m_fMaxDustFallHeightRatio ;
#line 409 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fHeightSteep  = (fMaxHeight  - fMinHeight ) / m_ctDustFall ;
#line 410 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
for(INDEX iDust  = 0;iDust  < m_ctDustFall ;iDust  ++)
#line 411 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
{
#line 412 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
FLOAT fY  = fMinHeight  + iDust  * fHeightSteep ;
#line 413 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CPlacement3D plDust  = penDestroyed  -> GetPlacement  ();
#line 414 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
plDust  . pl_PositionVector  = plDust  . pl_PositionVector  + FLOAT3D (0 , fY  , 0);
#line 416 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ESpawnEffect  ese ;
#line 417 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ese  . colMuliplier  = C_WHITE  | CT_OPAQUE ;
#line 418 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ese  . vStretch  = FLOAT3D (m_fDustStretch  , m_fDustStretch  , m_fDustStretch );
#line 419 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ese  . vNormal  = FLOAT3D (0 , 1 , 0);
#line 420 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
ese  . betType  = BET_DUST_FALL ;
#line 421 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CEntityPointer penFX  = CreateEntity  (plDust  , CLASS_BASIC_EFFECT );
#line 422 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
penFX  -> Initialize  (ese );
#line 423 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 424 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
#line 425 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
}
BOOL CModelDestruction::
#line 428 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CModelDestruction_Main
	ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CModelDestruction::Main expects 'EVoid' as input!");	const EVoid &e = (const EVoid &)__eeInput;
#line 431 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CheckOneModelTarget  (m_penModel0 );
#line 432 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CheckOneModelTarget  (m_penModel1 );
#line 433 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CheckOneModelTarget  (m_penModel2 );
#line 434 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CheckOneModelTarget  (m_penModel3 );
#line 435 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
CheckOneModelTarget  (m_penModel4 );
#line 437 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
InitAsEditorModel  ();
#line 438 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
SetPhysicsFlags  (EPF_MODEL_IMMATERIAL );
#line 439 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
SetCollisionFlags  (ECF_IMMATERIAL );
#line 442 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
SetModel  (MODEL_MODELDESTRUCTION );
#line 443 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
SetModelMainTexture  (TEXTURE_MODELDESTRUCTION );
#line 445 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
Return(STATE_CURRENT,EVoid());
#line 445 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/ModelDestruction.es"
return TRUE; ASSERT(FALSE); return TRUE;};