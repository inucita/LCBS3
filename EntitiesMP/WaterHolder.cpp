/*
 * This file is generated by Entity Class Compiler, (c) CroTeam 1997-98
 */

#line 2 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"

#include "StdH.h"
#define C_WHITE_OPAQUE	(C_WHITE|CT_OPAQUE)

#include <WaterHolder.h>
#include <WaterHolder_tables.h>
void CWaterHolder::SetDefaultProperties(void) {
	m_fnModel = CTFILENAME("");
	m_fnmWaterTex = CTFILENAME("");
	m_fnmBumpTex = CTFILENAME("");
	m_fStretchAll = 1.0f;
	m_vStretchXYZ = FLOAT3D(1.0f , 1.0f , 1.0f);
	m_bColliding = FALSE ;
	m_bActive = TRUE ;
	m_bWireFrame = FALSE ;
	m_bReflection = TRUE ;
	m_bWave = FALSE ;
	m_fBumpMat11 = 0.03f;
	m_fBumpMat12 = -0.03f;
	m_fBumpMat21 = -0.03f;
	m_fBumpMat22 = 0.03f;
	m_fTexFlowX = 0.001f;
	m_fTexFlowY = 0.001f;
	m_colWater = C_WHITE_OPAQUE ;
	m_strName = "WaterHolder";
	CRationalEntity::SetDefaultProperties();
}

#line 38 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
void CWaterHolder::Precache(void) 
#line 39 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
{
#line 40 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
PrecacheSkaModel  (EDITOR_WATER_MODEL );
#line 41 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}

#line 59 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
void CWaterHolder::InitNiceWater() 
#line 60 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
{
#line 61 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(m_fnModel  == "")
#line 62 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
{
#line 65 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
m_fnModel  = CTFILENAME  ("Data\\World\\Water\\WaterPlane.smc");
#line 67 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}
#line 70 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(m_fnmWaterTex  == "")
#line 71 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
{
#line 72 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
m_fnmWaterTex  = CTFILENAME  ("Data\\World\\Water\\Texture\\WaterFX.tex");
#line 73 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}
#line 77 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(m_fnmBumpTex  == "")
#line 78 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
{
#line 79 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
m_fnmBumpTex  = CTFILENAME  ("Data\\World\\Water\\Texture\\OceanBump.tex");
#line 80 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}
#line 90 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
InitAsSkaModel  ();
#line 91 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
SetFlagOn  (ENF_NICEWATER );
#line 93 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
BOOL bLoadOK  = TRUE ;
#line 95 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
try {
#line 96 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
SetSkaModel_t  (m_fnModel );
#line 98 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}catch  (char  *){
#line 99 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
bLoadOK  = FALSE ;
#line 101 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}
#line 102 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(! bLoadOK )
#line 103 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
{
#line 104 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
SetSkaModel  (CTFILENAME  ("Data\\Models\\Editor\\Ska\\Axis.smc"));
#line 105 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
WarningMessage  (TRANS  ("Cannot load ska model '%s'") , (CTString &) m_fnModel );
#line 106 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}
#line 108 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
GetModelInstance  () -> SetModelColor  (m_colWater );
#line 111 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
StretchModel  ();
#line 112 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
ModelChangeNotify  ();
#line 114 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
return ;
#line 115 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}

#line 132 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
void CWaterHolder::StretchModel(void) 
#line 133 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
{
#line 135 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(Abs  (m_vStretchXYZ  (1)) < 0.01f){m_vStretchXYZ  (1) = 0.01f;}
#line 136 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(Abs  (m_vStretchXYZ  (2)) < 0.01f){m_vStretchXYZ  (2) = 0.01f;}
#line 137 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(Abs  (m_vStretchXYZ  (3)) < 0.01f){m_vStretchXYZ  (3) = 0.01f;}
#line 138 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(m_fStretchAll  < 0.01f){m_fStretchAll  = 0.01f;}
#line 140 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(Abs  (m_vStretchXYZ  (1)) > 1000.0f){m_vStretchXYZ  (1) = 1000.0f * Sgn  (m_vStretchXYZ  (1));}
#line 141 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(Abs  (m_vStretchXYZ  (2)) > 1000.0f){m_vStretchXYZ  (2) = 1000.0f * Sgn  (m_vStretchXYZ  (2));}
#line 142 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(Abs  (m_vStretchXYZ  (3)) > 1000.0f){m_vStretchXYZ  (3) = 1000.0f * Sgn  (m_vStretchXYZ  (3));}
#line 143 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
if(m_fStretchAll  > 1000.0f){m_fStretchAll  = 1000.0f;}
#line 144 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
GetModelInstance  () -> StretchModel  (m_vStretchXYZ  * m_fStretchAll );
#line 145 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
return ;
#line 146 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
}
BOOL CWaterHolder::
#line 149 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
Main(const CEntityEvent &__eeInput) {
#undef STATE_CURRENT
#define STATE_CURRENT STATE_CWaterHolder_Main
	ASSERTMSG(__eeInput.ee_slEvent==EVENTCODE_EVoid, "CWaterHolder::Main expects 'EVoid' as input!");	const EVoid &e = (const EVoid &)__eeInput;
#line 151 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
InitNiceWater  ();
#line 152 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
Return(STATE_CURRENT,EVoid());
#line 152 "C:/Users/pwesty/Desktop/SD-Source/nov-source/Reco_Csrc/EntitiesMP/WaterHolder.es"
return TRUE; ASSERT(FALSE); return TRUE;};